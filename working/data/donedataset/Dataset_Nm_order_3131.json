{
    "Link_API": "https://api.stackexchange.com/2.3/questions/3035452",
    "Title": "Error in solution of Peter Winkler &quot;red and blue dice&quot; puzzle?",
    "Score": 12,
    "Category": "Chứng minh",
    "Tags": "combinatorics, puzzle, integer-partitions",
    "Link": "https://math.stackexchange.com/questions/3035452/error-in-solution-of-peter-winkler-red-and-blue-dice-puzzle",
    "Content": "This question relates to the solution give in Peter Winkler's Mathematical Mind-Benders to the \"Red and Blue Dice\" problem appearing on page $23.$ You have two sets (one red, one blue) of $n\\ n-$ sided dice, each die labeled with the numbers from $1$ to $n.$ You roll all $2n$ dice simultaneously. Prove that there must be a nonempty subset of the red dice and a nonempty subset of the blue dice with the same sum! I tried to prove it by induction.  There must be an $n$ rolled or we can remove one die of each color and get a counterexample to the $n-1$ case.  If there is only on $n$ rolled, we can remove it, and any die of the other color, and again get a counterexample.  So there are at least two red $n$ 's, say. But I couldn't carry the induction idea any further.  I proved it up to $n=6,$ hoping to spot a pattern, but all I got was a collection of ad hoc arguments.  After several days, I gave up and looked at the answer. A solution is given on pages $33-34.$ Winkler advises proving a stronger statement. In fact, there is a much stronger statement than the one you were asked to prove, which is nonetheless still true.  Organize the red dice into a line, in any way you want, and do the same with the blue dice.  Then there is a contiguous nonempty subset of each line with the same sum. To put it more mathematically, given any two vector $\\langle a_1,\\dots,a_n\\rangle$ and $\\langle b_1,\\dots,b_n\\rangle$ in $\\{1,\\dots,n\\}^n,$ there are $j\\le k$ and $s\\le t$ such that $\\sum_{i=j}^k{a_i}=\\sum_{i=s}^t{b_i}.$ To see this, let $\\alpha_m$ be the sum of the first $m\\ a_i$ 's and let $\\beta_m$ be the sum of the first $m\\ b_i$ 's.  Assume that $\\alpha_n\\le\\beta_n$ (otherwise we can switch the roles of the $a$ 's and $b$ 's), and for each $m,$ let $m'$ be the greatest index for which $\\beta_{m'}\\le\\alpha_m.$ Winkler gives a diagram with two sample strings, lines joining $a_m$ and $b_{m'}$ labeled by $\\alpha_m-\\beta_{m'}$ It is apparent that the $a_i$ are the dice on top and the $b_i$ those on bottom.  Note that we have $\\alpha_6=22,\\ \\beta_6=18,$ contradicting $\\alpha_n\\le\\beta_n,$ so I imagine that the latter was a typo.  Also, the line labeled $3$ joining $a_3$ and $b_4$ should really end at $b_5$ and be labeled $0,$ but I guess this is just a mistake. Anyway, Winkler says, We always have $\\alpha_m-\\beta_{m'}\\ge0,$ and at most $n-1$ (if $\\alpha_m-\\beta_{m'}$ were larger than or equal to $n,\\ m'$ would have been a larger index.) He then goes on to observe that if any of the labels is $0$ we are done, so we have $n$ labels from $1$ to $n-1$ and two are equal.  Then the sum of the intervening dice must be the same.  For example, in the picture we have two lines labeled $2,$ and we have $6+5+3=3+2+3+6.$ It seems to me that there are two holes in this proof.  The first is in the statement that the labels must be less than $n$ .  Suppose that $\\alpha_n-\\beta_n\\ge n.$ Then $n'=n,$ and there is no larger index available.  Then  perhaps $\\alpha_n\\le\\beta_n$ is right after all, and the diagram is wrong. But this leaves the second problem, which doesn't depend on the relation between $\\alpha_n$ and $\\beta_n.$ Suppose that $a_1<b_1.$ How is $1'$ to be defined? I thought about abandoning the stronger statement, and attempting to solve the puzzle by arranging the $a_i$ in decreasing order and the $b_i$ in increasing order, but I don't see how to dispose of the case $\\max{a_i}>\\min{b_i}.$ Winkler's argument can't be applied, and I don't see how to dispose of it otherwise. I haven't been able to rescue this proof.  Am I overlooking something?  Can you solve the puzzle? Note: Winkler say that some similar results can be found in a paper by Diaconis, Graham, and Sturmfels.  I haven't tried to read the paper yet, but it looks a little heavy for the solution to a puzzle. Also, Winkler says that the source of the puzzle was David Kempe of USC, \"who needed the result in a computer science paper,\" but gives no further reference. P.S. I found a list of David Kempe's publications , but I can't tell which is likely to contain a proof of the theorem.",
    "AcceptedAnswer": "The figure is mistaken, but the proof is not, after a small clarification. Ignore the figure. Winkler intended to assume $\\alpha_n\\le \\beta_n$ . Furthermore, he intended $0$ to be an allowable index when choosing $m'$ , where $\\beta_0=0$ . This ensures ${m'}$ exists. For each $m\\ge 1$ , we have $\\alpha_m \\ge \\beta_0$ . This implies that $\\{i:0\\le i\\le n,\\alpha_m\\ge \\beta_i\\}$ is nonempty; possibly it only contains $i=0$ . We then let $m'$ be the largest element of this set. By definition, $\\alpha_m-\\beta_{m'}\\ge 0$ . If $\\alpha_m-\\beta_{m'}\\ge n$ , then it must be that $m'<n$ , because $\\alpha_m\\le \\alpha_n \\le \\beta_n$ . We can then consider $\\beta_{m'+1}$ , and would have $\\beta_{m'+1}=\\beta_{m'}+((m'+1)^{st}\\text{ dice})\\le \\beta_{m'}+n\\le \\alpha_m$ , contradicting the maximality of $m'$ . Therefore you have $0\\le \\alpha_m-\\beta_{m'}\\le n-1$ and the rest of the proof follows.",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nassumption: \nEach red die is an $n$-sided die labeled from $1$ to $n$,\nEach blue die is an $n$-sided die labeled from $1$ to $n$,\nThe problem involves two vectors $\\langle a_1,\\dots,a_n\\rangle$ (red dice) and $\\langle b_1,\\dots,b_n\\rangle$ (blue dice),\nThe sums of contiguous subsets of red and blue dice are considered,\n$\\alpha_m$ is the sum of the first $m$ red dice,\n$\\beta_m$ is the sum of the first $m$ blue dice,\n$\\alpha_n \\leq \\beta_n$ (or roles are switched if not),\nFor each $m$, $m'$ is the greatest index where $\\beta_{m'} \\leq \\alpha_m$,\nThe differences $\\alpha_m - \\beta_{m'}$ are in $\\{0,1,\\dots,n-1\\}$.\nproblem:\nProve that there exist nonempty contiguous subsets of red and blue dice with the same sum.\n###END_OF_FORMAT###",
    "reasoning_create_structured_problem": "Okay, let me try to work through this problem step by step. So, the problem is about proving that there must be a non-empty subset of red dice and a non-empty subset of blue dice with the same sum. The original approach suggested by Peter Winkler involves a stronger statement about contiguous subsets, but the user here is pointing out some potential holes in that proof.\n\nFirst, let me parse the problem again. We have two sets of dice, red and blue, each with n n-sided dice. Each die is labeled from 1 to n. We roll all 2n dice. The task is to prove that there exists a non-empty subset of red dice and a non-empty subset of blue dice such that their sums are equal.\n\nThe user tried induction but got stuck. Then they looked at Winkler's solution, which involves considering any arrangement of red and blue dice into vectors a and b, and then looking at the sums of their prefixes. The key idea is to define α_m as the sum of the first m a_i's and β_m as the sum of the first m b_i's. Assuming α_n ≤ β_n, for each m, m' is the greatest index where β_{m'} ≤ α_m. Then, the differences α_m - β_{m'} are considered, which should be between 0 and n-1. If any difference is 0, we're done. Otherwise, by the pigeonhole principle, two differences must be equal, leading to equal sums in between.\n\nBut the user points out two potential issues. The first is when α_n - β_n ≥ n. Wait, in the original setup, they assumed α_n ≤ β_n. If that's the case, then α_n - β_n would be ≤ 0, so maybe there's a typo in the example diagram where α_6=22 and β_6=18, which contradicts the assumption. So perhaps the diagram is wrong, and the assumption should hold.\n\nThe second issue is when a_1 < b_1. Then, how is 1' defined? If a_1 is less than b_1, then β_1 = b_1, which is greater than a_1. So m' for m=1 would be 0, since there's no index m' where β_{m'} ≤ α_1 (which is a_1). But β_0 is 0, right? Because the sum of the first 0 elements is 0. So if a_1 ≥ 1 (since dice are labeled from 1 to n), then β_0 = 0 ≤ α_1. So m' for m=1 is 0, because β_0 is the last index where β_{m'} ≤ α_1. Then the difference α_1 - β_0 = a_1 - 0 = a_1. Since a_1 is between 1 and n, the difference is between 1 and n. But Winkler says the labels are from 1 to n-1. Wait, if a_1 is n, then the difference would be n, which contradicts the statement that labels are at most n-1. Hmm, so maybe there's an error here.\n\nWait, let's think again. If α_n ≤ β_n, then for each m, m' is the greatest index where β_{m'} ≤ α_m. The difference is α_m - β_{m'}, which is non-negative. Now, if m' is n, then β_{n} ≥ α_m. But since α_n ≤ β_n, then α_m ≤ α_n ≤ β_n. So if m' =n, then β_n ≥ α_m. But m' is the greatest index where β_{m'} ≤ α_m. Wait, that can't be. If β_n ≥ α_m, then m' would be the greatest index such that β_{m'} ≤ α_m. If β_n is ≥ α_m, but m' is supposed to be the greatest index where β_{m'} ≤ α_m. So if β_n is greater than α_m, then m' can't be n. Unless α_m ≥ β_n. But since α_n ≤ β_n, then α_m ≤ α_n ≤ β_n. So if α_m ≤ β_n, then the maximum possible m' where β_{m'} ≤ α_m could be up to n, but if β_n is larger than α_m, then m' is the largest index such that β_{m'} ≤ α_m. However, since β is increasing (each term is positive), β_n is the largest sum. So if α_m ≤ β_n, then there exists some m' such that β_{m'} ≤ α_m < β_{m'+1}. Because β increases by at least 1 each step (since each b_i is at least 1). Therefore, the difference α_m - β_{m'} would be less than β_{m'+1} - β_{m'} = b_{m'+1}. Since b_{m'+1} ≤ n, the difference α_m - β_{m'} < n. Therefore, the difference is at most n-1. So the possible differences are from 0 to n-1. Wait, but in the case where m'=0, then the difference is α_m - 0 = α_m. But α_m could be up to m*n, but since m can be up to n, α_m could be up to n^2. Wait, this contradicts. Hmm, there's a confusion here.\n\nWait, no. If we're following Winkler's approach, he's considering for each m from 1 to n, defining m' as the greatest index such that β_{m'} ≤ α_m. Then, the difference d_m = α_m - β_{m'}. Since β_{m'+1} > α_m (because m' is the greatest index where β_{m'} ≤ α_m), then d_m = α_m - β_{m'} < β_{m'+1} - β_{m'} = b_{m'+1} ≤ n. Therefore, d_m < n. Since d_m is an integer (because all sums are integers), d_m ≤ n-1. But also, d_m ≥ 0. So d_m ∈ {0,1,...,n-1}. However, there are n differences (for m=1 to n). If any d_m =0, then we have α_m = β_{m'}, so the subsets from 1 to m in a and 1 to m' in b have the same sum. If none are zero, then by pigeonhole principle, two differences must be equal, say d_i = d_j for i < j. Then α_i - β_{i'} = α_j - β_{j'}, so α_j - α_i = β_{j'} - β_{i'}, which implies that the sum from i+1 to j in a equals the sum from i'+1 to j' in b. Therefore, these contiguous subsets have the same sum.\n\nBut the user's first issue is when α_n - β_n ≥ n. Wait, but in the setup, we assumed α_n ≤ β_n. So if we switch a and b if necessary to ensure α_n ≤ β_n. Therefore, α_n - β_n would be ≤ 0, so that difference is non-positive. Therefore, m' for m=n is such that β_{m'} ≤ α_n ≤ β_n. Since α_n ≤ β_n, then m'=n would satisfy β_{m'} = β_n ≥ α_n, but wait, m' is the greatest index where β_{m'} ≤ α_n. If α_n ≤ β_n, then β_n could be ≥ α_n. So if α_n = β_n, then m'=n, and d_n = 0. If α_n < β_n, then m' is the largest index where β_{m'} ≤ α_n. Since β_n > α_n, m' would be less than n. Therefore, d_n = α_n - β_{m'} < β_{m'+1} - β_{m'} = b_{m'+1} ≤ n. So d_n < n, hence d_n ≤ n-1. Therefore, all differences d_m are between 0 and n-1. If any is 0, done. Else, n differences over n-1 values, so two must be equal.\n\nBut the user's first problem is: if α_n - β_n ≥ n, but since we have α_n ≤ β_n by assumption, this can't happen. Therefore, the diagram in the book must have a typo where α_6=22 and β_6=18, which violates α_n ≤ β_n. So that's a mistake in the diagram, but the proof itself is okay if we correctly assume α_n ≤ β_n.\n\nThe second issue the user raises is when a_1 < b_1. How is 1' defined? Let's see. For m=1, α_1 = a_1. We need to find the largest m' such that β_{m'} ≤ α_1. Since β_1 = b_1, which is greater than a_1 (by assumption), then the largest m' where β_{m'} ≤ a_1 is m'=0 (since β_0=0). Therefore, d_1 = α_1 - β_0 = a_1 - 0 = a_1, which is between 1 and n. But according to the earlier reasoning, d_1 < b_{0+1} = b_1. But since a_1 < b_1, then d_1 = a_1 < b_1 ≤ n, so d_1 is between 1 and n-1 (since b_1 is at least 1, so a_1 is at least 1, but less than b_1, which is at least 1. Wait, but if a_1 is 1 and b_1 is 2, then d_1=1, which is allowed. If a_1 is 1 and b_1 is 1, then β_1=1, so m'=1, and d_1=0, which would mean we're done. So in the case where a_1 < b_1, m'=0, and d_1=a_1, which is between 1 and n-1 (since a_1 < b_1 ≤ n). Wait, no, if b_1 is n, then a_1 could be n-1. So d_1 could be n-1. So the differences can go up to n-1. So that's okay. Therefore, even if a_1 < b_1, the difference d_1 is between 1 and n-1, so fits into the pigeonhole principle. Therefore, the proof still holds.\n\nTherefore, the user's concern about defining 1' when a_1 < b_1 is addressed by allowing m'=0, which gives a valid difference. The key is that β_0=0, so even if a_1 is less than b_1, we can still set m'=0 and get a difference that's within the required range.\n\nSo, the two issues the user mentioned might be resolved by correctly applying the definitions. The first issue about α_n ≤ β_n is handled by swapping the roles if necessary, and the second issue about a_1 < b_1 is handled by allowing m'=0. Therefore, the proof by Winkler seems valid, and the user's concerns are addressed.\n\nTo structure the problem as per the required format, we need to list the assumptions and then state the problem. The original problem is to prove that for any two vectors of dice, there exist non-empty subsets (contiguous in the stronger version) with the same sum. The assumptions would include the properties of the dice and the structure of the problem.",
    "Original_Problem": "assumption: \nEach red die is an $n$-sided die labeled from $1$ to $n$,\nEach blue die is an $n$-sided die labeled from $1$ to $n$,\nThe problem involves two vectors $\\langle a_1,\\dots,a_n\\rangle$ (red dice) and $\\langle b_1,\\dots,b_n\\rangle$ (blue dice),\nThe sums of contiguous subsets of red and blue dice are considered,\n$\\alpha_m$ is the sum of the first $m$ red dice,\n$\\beta_m$ is the sum of the first $m$ blue dice,\n$\\alpha_n \\leq \\beta_n$ (or roles are switched if not),\nFor each $m$, $m'$ is the greatest index where $\\beta_{m'} \\leq \\alpha_m$,\nThe differences $\\alpha_m - \\beta_{m'}$ are in $\\{0,1,\\dots,n-1\\}$.\nproblem:\nProve that there exist nonempty contiguous subsets of red and blue dice with the same sum.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: Each red die is an $n$-sided die labeled from $1$ to $n$,\nAssumption 2: Each blue die is an $n$-sided die labeled from $1$ to $n$,\nAssumption 3: The problem involves two vectors $\\langle a_1,\\dots,a_n\\rangle$ (red dice) and $\\langle b_1,\\dots,b_n\\rangle$ (blue dice),\nAssumption 4: The sums of contiguous subsets of red and blue dice are considered,\nAssumption 5: $\\alpha_m$ is the sum of the first $m$ red dice,\nAssumption 6: $\\beta_m$ is the sum of the first $m$ blue dice,\nAssumption 7: $\\alpha_n \\leq \\beta_n$ (or roles are switched if not),\nAssumption 8: For each $m$, $m'$ is the greatest index where $\\beta_{m'} \\leq \\alpha_m$,\nAssumption 9: The differences $\\alpha_m - \\beta_{m'}$ are in $\\{0,1,\\dots,n-1\\}$.\nProblem:\nProve that there exist nonempty contiguous subsets of red and blue dice with the same sum.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$\\beta_{m'+1}=\\beta_{m'}+((m'+1)^{st}\\text{ dice})\\le \\beta_{m'}+n\\le \\alpha_m$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: Each red die is an $n$-sided die labeled from $1$ to $n$,\nAssumption 2: Each blue die is an $n$-sided die labeled from $1$ to $n$,\nAssumption 3: The problem involves two vectors $\\langle a_1,\\dots,a_n\\rangle$ (red dice) and $\\langle b_1,\\dots,b_n\\rangle$ (blue dice),\nAssumption 4: The sums of contiguous subsets of red and blue dice are considered,\nAssumption 5: $\\alpha_m$ is the sum of the first $m$ red dice,\nAssumption 6: $\\beta_m$ is the sum of the first $m$ blue dice,\nAssumption 7: $\\alpha_n \\leq \\beta_n$ (or roles are switched if not),\nAssumption 8: For each $m$, $m'$ is the greatest index where $\\beta_{m'} \\leq \\alpha_m$,\nAssumption 9: The differences $\\alpha_m - \\beta_{m'}$ are in $\\{0,1,\\dots,n-1\\}$.\nAssumption 10: $\\beta_{m'+1}=\\beta_{m'}+((m'+1)^{st}\\text{ dice})\\le \\beta_{m'}+n\\le \\alpha_m$\nProblem:\nProve that there exist nonempty contiguous subsets of red and blue dice with the same sum."
}