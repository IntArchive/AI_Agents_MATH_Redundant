{
    "Link_API": "https://api.stackexchange.com/2.3/questions/564751",
    "Title": "How to prove that the Pearson correlation coefficient is in $[-1, 1]$?",
    "Score": 33,
    "Category": "Chứng minh",
    "Tags": "statistics, proof-writing, correlation",
    "Link": "https://math.stackexchange.com/questions/564751/how-to-prove-that-the-pearson-correlation-coefficient-is-in-1-1",
    "Content": "For building a recommendation system, I also use the Pearson correlation coefficient, defined as follows. $$ r(x, y) = \\frac{\\sum\\limits_{i=1}^n \\left( x_i - \\bar{x} \\right) \\left( y_i - \\bar{y} \\right)}{\\sqrt{\\sum\\limits_{i=1}^n \\left( x_i - \\bar{x} \\right)^2 \\cdot \\sum\\limits_{i=1}^n \\left( y_i - \\bar{y} \\right)^2}} $$ where $x, y \\in {\\Bbb R}$ . Now for coding, it is important to take care of all potential outcomes. For example, if the denominator is zero, you will have to filter that or throw an exception. I came up with some arguments, one of them being that if all values of $x_i$ and/or $y_i$ were equal to the average of $x$ and/or $y$ , then the denominator would be zero. But how can I prove that the coefficient is either undefined (zero denominator) or in between $-1$ and $1$ ? What is the best approach?",
    "AcceptedAnswer": "First of all Pearson's correlation coefficient is bounded between -1 and 1, not 0 and one. It's absolute value is bounded between 0 and 1, and that useful later. Pearson's correlation coefficient is simply this ratio: $$\\rho = \\frac{Cov(X,Y)}{\\sqrt{Var(X)Var(Y)}}$$ Both of the variances are non-negative by definition, so the denominator is $\\ge 0$ . The only way a singularity can occur is if one of the variables has 0 variance. If two random variables are perfectly uncorrelated, (i.e. independent) then their covariance is 0. So 0 is a valid lower bound for the absolute value of the expression. This can be shown like so: $$Cov(X,Y) = E[(X-\\bar{X})(Y-\\bar{Y})] = E[XY] - E[X]E[Y]$$ if two random variables are independent, then $E[XY]=E[X]E[Y]$ , and $$Cov(X,Y) = E[XY] - E[X]E[Y] = E[X]E[Y] - E[X]E[Y] = 0.$$ Now for the upper bound. Here we apply the Cauchy-Schwarz inequality . $$|Cov(X,Y)|^2 \\le Var(X)Var(Y)$$ $$\\therefore |Cov(X,Y)| \\le \\sqrt{Var(X)Var(Y)}$$ plug this result from the Cauchy-Schwarz inequality into the formula for $\\rho$ , and we get: $$|\\rho| = \\left|\\frac{Cov(X,Y)}{\\sqrt{Var(X)Var(Y)}}\\right| \\le \\frac{\\sqrt{Var(X)Var(Y)}}{\\sqrt{Var(X)Var(Y)}} = 1$$ Thus we have the absolute value of the correlation is bounded below by 0 and above by 1.",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \n$x$ and $y$ are vectors in $\\mathbb{R}^n$,\nThe denominator of $r(x, y)$ is zero if all $x_i$ are equal to $\\bar{x}$,\nThe denominator of $r(x, y)$ is zero if all $y_i$ are equal to $\\bar{y}$.\nProblem:\nProve that the Pearson correlation coefficient $$ r(x, y) = \\frac{\\sum\\limits_{i=1}^n \\left( x_i - \\bar{x} \\right) \\left( y_i - \\bar{y} \\right)}{\\sqrt{\\sum\\limits_{i=1}^n \\left( x_i - \\bar{x} \\right)^2 \\cdot \\sum\\limits_{i=1}^n \\left( y_i - \\bar{y} \\right)^2}}$$ is either undefined or satisfies $-1 \\leq r(x, y) \\leq 1$.\n###",
    "reasoning_create_structured_problem": "Alright, let me try to work through this problem. The user is asking how to prove that the Pearson correlation coefficient is either undefined (when the denominator is zero) or lies between -1 and 1. \n\nFirst, I need to recall the formula for Pearson's r. The numerator is the covariance of x and y, and the denominator is the product of the standard deviations of x and y. The denominator being zero would mean that either the standard deviation of x is zero, or the standard deviation of y is zero, or both. That happens when all the x_i are equal to their mean (so no variation in x) or similarly for y. That's why the user mentioned filtering those cases.\n\nNow, to prove that r is in [-1,1] when the denominator isn't zero. I remember that this is related to the Cauchy-Schwarz inequality. The Cauchy-Schwarz inequality states that for any vectors a and b, the absolute value of their dot product is less than or equal to the product of their norms. If I consider the vectors (x_i - x̄) and (y_i - ȳ), then the numerator of r is their dot product, and the denominator is the product of their norms. So by Cauchy-Schwarz, the absolute value of the numerator is less than or equal to the denominator, which directly gives that |r| ≤ 1.\n\nBut maybe I should elaborate more. Let's see. Let a_i = x_i - x̄ and b_i = y_i - ȳ. Then r = (sum a_i b_i) / (sqrt(sum a_i^2) sqrt(sum b_i^2)). The Cauchy-Schwarz inequality says that (sum a_i b_i)^2 ≤ (sum a_i^2)(sum b_i^2). Taking square roots on both sides, |sum a_i b_i| ≤ sqrt(sum a_i^2) sqrt(sum b_i^2). Dividing both sides by the denominator (assuming it's non-zero), we get |r| ≤ 1. That's the proof.\n\nAlternatively, another approach could use the fact that the correlation coefficient is the cosine of the angle between the two vectors (centered by their means). Since the cosine of an angle is always between -1 and 1, that's another way to see it. But the Cauchy-Schwarz approach is more straightforward here.\n\nSo the assumptions would include that x and y are real vectors (since they are in ℝ), and the denominator is not zero. But in the problem statement, they want to structure the problem with assumptions and the problem itself. The original question mentions that the denominator could be zero, leading to an undefined coefficient, otherwise, it's between -1 and 1. So the assumptions need to capture the conditions where the coefficient is defined, i.e., the denominator is non-zero. Therefore, each x_i and y_i being equal to their means would make the denominator zero. But in the problem, when we state the assumptions, we need to list the conditions required for the problem to hold. Wait, the user wants to structure the problem into assumptions and the problem statement. The problem is to prove that the coefficient is either undefined or in [-1,1]. So the assumptions would include the definitions: that x and y are real numbers, that the denominator is non-zero (if we are considering the case where it's defined), but in the original question, they want to cover both possibilities. Wait, maybe the problem is to show that for any x, y in R^n, the coefficient is either undefined (denominator zero) or in [-1,1]. So the assumptions would include that x and y are real vectors, and the problem is to prove that r is in [-1,1] when defined.\n\nLooking back at the example provided, the original problem was about proving divisibility by 91, and the formatted assumption listed that n is an integer and n is divisible by 7. Wait, but in the example, the user added an assumption that n is divisible by 7, but the original problem didn't mention that. Wait, that might be an error. Let me check the example again.\n\nOriginal problem example: The user wanted to prove A(n) is divisible by 91 for every integer n. The formatted assumption says n is an integer, and n is divisible by 7. Wait, that seems incorrect because the original problem says \"for every integer n\", but the formatted problem added an extra assumption that n is divisible by 7. That might be a mistake in the example. Perhaps the user intended that in the problem, but maybe the example is flawed. However, in the current problem, the user's question is about proving that Pearson's r is either undefined or in [-1,1]. So the assumptions here would be the conditions under which the problem holds. So in this case, the problem is for any real vectors x and y, the Pearson coefficient is either undefined (if denominator is zero) or in [-1,1]. Therefore, the assumptions should list the conditions given in the problem. Let me check the original question again.\n\nThe original question states that x and y are in R^n (wait, actually, the user wrote \"x, y ∈ ℝ\", but that's probably a typo; it should be x and y are vectors in R^n). Then the formula is given. The user wants to prove that r is either undefined (denominator zero) or in [-1,1]. So the assumptions would include that x and y are real vectors (each of length n), and the denominator is non-zero (for the case when it's defined). Wait, but the problem is to show that if the denominator is not zero, then r is in [-1,1], and otherwise, it's undefined. So the assumptions for the problem would be the definitions of r, and the problem is to show that under these definitions, r is either undefined or in [-1,1].\n\nBut in the example given by the user, the assumptions included specific conditions on n, even though the original problem said \"for every integer n\". It seems like there might be a misunderstanding in the example. However, following the user's instructions, we need to structure the problem as Assumption and Problem, listing each assumption line by line, each addressing one property or condition applied to one object.\n\nSo for this Pearson problem, the assumptions would be:\n\n- x and y are real vectors of length n.\n- The denominator of the Pearson correlation coefficient is non-zero if and only if at least one of the following is true: not all x_i are equal to the mean of x, and not all y_i are equal to the mean of y.\n\nWait, but the problem is to prove that r is either undefined or in [-1,1]. So perhaps the assumptions are:\n\n- x and y are real numbers (but wait, x and y are vectors, so maybe \"x and y are vectors in R^n\").\n- The denominator of the Pearson correlation coefficient is zero if and only if all x_i are equal to the mean of x or all y_i are equal to the mean of y.\n\nBut the problem is to show that r is either undefined (denominator zero) or in [-1,1]. Therefore, the assumptions would include the definition of r, and the problem is to prove that under the definition, it's either undefined or in the interval.\n\nAlternatively, perhaps the user wants the assumptions to list the conditions under which r is defined, but the problem is to show that in those cases, it's in [-1,1]. So:\n\nAssumption:\nx and y are vectors in R^n,\nNot all x_i are equal to x̄,\nNot all y_i are equal to ȳ.\n\nProblem:\nProve that the Pearson correlation coefficient r(x, y) is in the interval [-1, 1].\n\nBut the original question also includes the case when it's undefined, so maybe the problem is to show that for any x, y, either the denominator is zero (undefined) or r is in [-1,1].\n\nTherefore, structuring it:\n\nAssumption:\nx and y are real vectors of length n,\nThe denominator of r(x, y) is zero if all x_i are equal to x̄ or all y_i are equal to ȳ.\n\nProblem:\nProve that the Pearson correlation coefficient r(x, y) is either undefined (denominator zero) or lies in the interval [-1, 1].\n\nBut the user's example had each assumption as one line per condition. So:\n\nAssumption:\nx and y are vectors in R^n,\nEach x_i is a real number,\nEach y_i is a real number,\nThe denominator of r(x, y) is zero if all x_i are equal to x̄,\nThe denominator of r(x, y) is zero if all y_i are equal to ȳ.\n\nProblem:\nProve that the Pearson correlation coefficient r(x, y) is either undefined or satisfies -1 ≤ r(x, y) ≤ 1.\n\nBut maybe some of these are redundant. For example, x and y being vectors in R^n already implies each component is real. So perhaps:\n\nAssumption:\nx and y are vectors in R^n,\nThe denominator of r(x, y) is zero if all x_i are equal to x̄,\nThe denominator of r(x, y) is zero if all y_i are equal to ȳ.\n\nProblem:\nProve that the Pearson correlation coefficient r(x, y) is either undefined or lies in [-1, 1].\n\nAlternatively, since the user's example split assumptions line by line for each condition applied to one object, maybe:\n\nAssumption:\nx is a vector in R^n,\ny is a vector in R^n,\nThe denominator of r(x, y) is zero when all x_i are equal to x̄,\nThe denominator of r(x, y) is zero when all y_i are equal to ȳ.\n\nProblem:\nProve that the Pearson correlation coefficient r(x, y) is either undefined or in the interval [-1, 1].\n\nBut perhaps the key assumptions are about the denominator being zero in certain cases and the vectors being real. The problem is to show that when it's defined (denominator non-zero), it's between -1 and 1. So maybe:\n\nAssumption:\nx and y are real vectors,\nThe denominator of r(x, y) is non-zero.\n\nProblem:\nProve that -1 ≤ r(x, y) ≤ 1.\n\nBut the original question wants to include the undefined case. So maybe:\n\nAssumption:\nx and y are real vectors,\nThe denominator of r(x, y) is zero if all x_i are equal to their mean or all y_i are equal to their mean.\n\nProblem:\nProve that the Pearson correlation coefficient r(x, y) is either undefined or lies in [-1, 1].\n\nAlternatively, the problem could be structured as:\n\nAssumption:\nx and y are vectors in R^n,\nFor x, not all x_i are equal to x̄,\nFor y, not all y_i are equal to ȳ.\n\nProblem:\nProve that the Pearson correlation coefficient r(x, y) satisfies -1 ≤ r(x, y) ≤ 1.\n\nBut the original question wants to address both possibilities: either undefined or in [-1,1]. So the problem statement should include both cases. Therefore, the assumptions would be:\n\nAssumption:\nx and y are vectors in R^n,\nThe denominator of r(x, y) is zero when all x_i are equal to x̄,\nThe denominator of r(x, y) is zero when all y_i are equal to ȳ.\n\nProblem:\nProve that the Pearson correlation coefficient r(x, y) is either undefined or lies in the interval [-1, 1].\n\nYes, that seems to fit. Each assumption is one condition applied to one object. First, x and y are vectors in R^n. Then, the denominator is zero if all x_i are equal to their mean. Similarly for y. The problem is to prove that r is either undefined (denominator zero) or in [-1,1].\n\nI think that's the correct structure.",
    "Original_Problem": "Assumption: \n$x$ and $y$ are vectors in $\\mathbb{R}^n$,\nThe denominator of $r(x, y)$ is zero if all $x_i$ are equal to $\\bar{x}$,\nThe denominator of $r(x, y)$ is zero if all $y_i$ are equal to $\\bar{y}$.\nProblem:\nProve that the Pearson correlation coefficient $$ r(x, y) = \\frac{\\sum\\limits_{i=1}^n \\left( x_i - \\bar{x} \\right) \\left( y_i - \\bar{y} \\right)}{\\sqrt{\\sum\\limits_{i=1}^n \\left( x_i - \\bar{x} \\right)^2 \\cdot \\sum\\limits_{i=1}^n \\left( y_i - \\bar{y} \\right)^2}}$$ is either undefined or satisfies $-1 \\leq r(x, y) \\leq 1$.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: $x$ and $y$ are vectors in $\\mathbb{R}^n$,\nAssumption 2: The denominator of $r(x, y)$ is zero if all $x_i$ are equal to $\\bar{x}$,\nAssumption 3: The denominator of $r(x, y)$ is zero if all $y_i$ are equal to $\\bar{y}$.\nProblem:\nProve that the Pearson correlation coefficient $$ r(x, y) = \\frac{\\sum\\limits_{i=1}^n \\left( x_i - \\bar{x} \\right) \\left( y_i - \\bar{y} \\right)}{\\sqrt{\\sum\\limits_{i=1}^n \\left( x_i - \\bar{x} \\right)^2 \\cdot \\sum\\limits_{i=1}^n \\left( y_i - \\bar{y} \\right)^2}}$$ is either undefined or satisfies $-1 \\leq r(x, y) \\leq 1$.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$\\therefore |Cov(X,Y)| \\le \\sqrt{Var(X)Var(Y)}$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: $x$ and $y$ are vectors in $\\mathbb{R}^n$,\nAssumption 2: The denominator of $r(x, y)$ is zero if all $x_i$ are equal to $\\bar{x}$,\nAssumption 3: The denominator of $r(x, y)$ is zero if all $y_i$ are equal to $\\bar{y}$.\nAssumption 4: $$\\therefore |Cov(X,Y)| \\le \\sqrt{Var(X)Var(Y)}$$\nProblem:\nProve that the Pearson correlation coefficient $$ r(x, y) = \\frac{\\sum\\limits_{i=1}^n \\left( x_i - \\bar{x} \\right) \\left( y_i - \\bar{y} \\right)}{\\sqrt{\\sum\\limits_{i=1}^n \\left( x_i - \\bar{x} \\right)^2 \\cdot \\sum\\limits_{i=1}^n \\left( y_i - \\bar{y} \\right)^2}}$$ is either undefined or satisfies $-1 \\leq r(x, y) \\leq 1$."
}