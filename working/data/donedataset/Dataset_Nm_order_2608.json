{
    "Link_API": "https://api.stackexchange.com/2.3/questions/92284",
    "Title": "Diameter of a graph when removing a non-cut edge",
    "Score": 13,
    "Category": "Chứng minh",
    "Tags": "graph-theory",
    "Link": "https://math.stackexchange.com/questions/92284/diameter-of-a-graph-when-removing-a-non-cut-edge",
    "Content": "It appears plausible to me that if we have a connected graph $G$ with diameter $d$ and we remove a non-cut edge $e$ from it, the diameter of the resulting graph $G_e$ will be at most $2d$. By removing a non-cut edge I mean that the resulting graph is still connected. I was not able to find a proof or a counter-example. Any suggestion?\nThanks. EDIT: I've tried to follow Perce's hint, and I'm quite sure I success in showing what I was looking for, but it was hard for me to explain. Then I ask for the correctness of my proof. Let $G$ be a graph with a certain diameter $d$, and let $$(u_0,u_d)=<u_0, u_1, ..., u_i, ..., u_d >  (0\\leq i \\leq d)$$ a shortest path from some node $u_0$ to some node $u_d$ such that its lenght is $d$. Let's add to $G$ an edge $e$. By adding $e$, maybe, there will be a shorter path $(u_0,u_d)'$ in the graph from $u_0$ to $u_d$ that differs from $(u_0,u_d)$ for some nodes $u_i$ (with $0<i<d$ ); it's easy to see that these different nodes are consecutive in  $(u_0,u_d)'$, that is they replace a substring of $<u_0, u_1, ..., u_i, ..., u_d >$.\nIndeed, they form a new shortest path between some $u_j$ and $u_k$ using the new edge $e$ (because this new path $(u_j,u_k)$ wasn't the shortest before adding $e$); if there were not-consecutive $u_i$s in  $(u_0,u_d)'$, then $e$ would be used more than one time, and  $(u_0,u_d)'$ would not be a shortest path. EDIT2: fixed the following part of my solution Hence, adding an edge we create at most one shorter route among the nodes in the path $(u_0,u_d)$, that in the best case is of lenght 1 (if we use $e$ itself).\nNow, it's easy to see that, by adding a an edge between two nodes in a path, we cannot reduce its lenght $l$ below $l/2$.",
    "AcceptedAnswer": "Let $G$ be a connected graph with diameter $D$, and let $v$ be a vertex that is part of a diametric pair.  Now define $S_i$ to be the vertices at distance $i$ from $u$.  By construction, $S_i$ is not empty for $0\\le i\\le D$. Now contract the $S_i$ and discard loops and multiple edges to get a graph $H$ on $D+1$ vertices $s_0, s_1,\\ldots, s_D$. Fact 1: $H$ is a path. Proof: Build the $S_i$ via breadth-first search, which shows there is an edge between $s_i$ and $s_{i+1}$.  On the other hand, shortcuts contradict the definition of $S_i$. Now add a new edge $ij$ to $G$ to get a graph $G'$.  Contract the same sets of vertices $S_i$ that were contracted to make $H$ and again discard multiple edges to get $H'$. Fact 2: $H'$ is a path plus one edge. Proof: The surviving edges are just the edges of $H$ plus the new edge $ij$. Fact 3: The diameter of $H'$ is at most the diameter of $G'$. Proof: Contracting shortens paths and discarding multiple edges leaves distances the same. Thus if the diameter of $H'$ is at least $D/2$, then so is the diameter of $G'$, and we are done. Edit: Pedro is right that there was a bug in my original argument for the path case.  Here is a quick patch that still uses the structure of a BFS. $H'$ has the structure of a cycle, possibly with up to two \"tails\" ending at $s_0$ or $s_D$; these tails meet the cycle at neighboring vertices. For zero tails, the claim is clear. For one tail, do a BFS from the end of the tail. The BFS goes one vertex per layer, splits, and then merges, so each BFS layer has at most two vertices. Again we are done. Now look at two tails, with $a$ and $b$ non cycle vertices in each (ie the length of the tail) \nand $a\\le b$. Consider the BFS starting at end of the longer tail.  This time, each layer has one vertex for $b$ steps, the BFS branches in a layer of two vertices, and then there are three vertices per layer for at most $a$ steps more.  Since $b\\ge a$, we charge the layers with three vertices to layers with one vertex, so we are done.",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nassumption: \n$G$ is a connected graph,\nthe diameter of $G$ is $d$,\n$e$ is a non-cut edge of $G$.\nproblem:\nProve that the diameter of the graph obtained by removing $e$ from $G$ is at most $2d$.\n###",
    "reasoning_create_structured_problem": "Okay, let's tackle this problem. The user wants to know if removing a non-cut edge from a connected graph G with diameter d results in the new graph G_e having a diameter of at most 2d. They also mentioned their attempt at a proof using the idea of adding an edge and how it affects the shortest path. \n\nFirst, I need to parse the original question and the edits. The main points are:\n\n1. G is connected with diameter d.\n2. Removing a non-cut edge e (so G_e is still connected).\n3. The claim is that the diameter of G_e is at most 2d.\n4. The user tried to prove this by considering adding an edge and how it affects the shortest path, suggesting that adding an edge can only shorten the path by at most half, but here we are removing an edge.\n\nWait, but the user's example is about adding an edge, but the problem is about removing. Maybe there's a confusion here. Let me focus on the original problem: removing a non-cut edge. The user is trying to adapt their approach from adding an edge to removing one, but I need to check if their reasoning applies.\n\nThe user's proof sketch seems to involve that when you add an edge, the maximum reduction in path length is by half, so when you remove it, the path can't get longer than double. But I need to verify if this logic holds.\n\nTo structure the problem as per the required format, I need to list the assumptions line by line, each addressing one property or condition applied to one object.\n\nAssumptions:\n- G is a connected graph.\n- The diameter of G is d.\n- e is a non-cut edge of G (removing e does not disconnect G).\n- G_e is the graph obtained by removing edge e from G.\n\nProblem: Prove that the diameter of G_e is at most 2d.\n\nWait, but in the original problem, the user states \"if we remove a non-cut edge e from it, the diameter of the resulting graph G_e will be at most 2d\". So the assumptions are that G is connected, has diameter d, e is a non-cut edge, and the problem is to prove that after removal, diameter ≤ 2d.\n\nBut in the user's edit, they talk about adding an edge and how it affects the path length. Maybe they tried to reverse the process? For example, if adding an edge can reduce the diameter by at most half, then removing it would double the diameter. However, that's not necessarily directly applicable. The user's approach might have a flaw here.\n\nBut according to the problem structure example, the assumptions should list all the conditions. The original problem doesn't state that n is divisible by 7; in the example, maybe that was part of the original problem? Wait, the example given by the user had an original problem where the assumption was n is an integer and n is divisible by 7, but in the formatted problem, the assumption was split into two. Wait, actually, looking back, the original problem in the example was to prove for every integer n, the number A(n) is divisible by 91. But the formatted problem's assumption includes that n is an integer and n is divisible by 7. That seems incorrect. Wait, maybe the example was a mistake? Because the original problem says \"for every integer n\", so the assumption shouldn't include that n is divisible by 7. But in the formatted problem, they listed n is an integer, and n is divisible by 7. That might be an error in the example. However, the user is providing that as their own example, so perhaps they intended to filter out unrelated info. Maybe the original problem had some hidden condition or the user made a mistake. But regardless, I should focus on the current problem.\n\nBack to the Diameter problem. The key assumptions are:\n\n- G is connected.\n- The diameter of G is d.\n- e is a non-cut edge (so G_e is connected).\n- Problem: Show diameter of G_e ≤ 2d.\n\nSo the assumptions should list each condition. Each line should be one condition. So:\n\nAssumption:\nG is a connected graph,\nG has diameter d,\ne is an edge in G,\nremoving e from G results in a connected graph G_e.\n\nProblem: Prove that the diameter of G_e is at most 2d.\n\nWait, the original question mentions \"removing a non-cut edge e\", so e being a non-cut edge implies that G_e is connected. So the third assumption is that e is a non-cut edge. So maybe:\n\nAssumption:\nG is a connected graph,\nG has diameter d,\ne is a non-cut edge of G.\n\nProblem: Prove that the diameter of the graph obtained by removing e from G is at most 2d.\n\nBut perhaps breaking down \"non-cut edge\" into more basic properties. But according to the example, each assumption is a single condition. So \"e is a non-cut edge of G\" is one condition because it's a property of the edge e. So the three assumptions would be:\n\n1. G is a connected graph.\n2. The diameter of G is d.\n3. e is a non-cut edge of G.\n\nProblem: Prove that the diameter of G_e (G with e removed) is at most 2d.\n\nThe user's own attempt involved adding an edge and how the path lengths change. But in this problem, we are removing an edge. However, the user's approach might have considered the inverse: if adding an edge can reduce the diameter, then removing it could increase it, but by how much? The user suggests that adding an edge can at most reduce a path length by half, so removing it would at most double the length, leading to diameter at most 2d. But is that accurate?\n\nAlternatively, consider that in G, any two vertices have a path of length at most d. When we remove edge e, which is not a cut edge, the graph remains connected. Now, the distance between two vertices that previously used edge e might increase. How much can it increase?\n\nSuppose u and v were connected by a path of length 1 (the edge e). After removing e, the shortest path between u and v must go through another route. The longest possible detour would be going around the rest of the graph. But since the original diameter is d, the distance from u to v in G_e can't be more than d + d = 2d? Wait, maybe.\n\nBut need a more formal approach. For any two vertices x and y in G_e, their distance in G_e is at most 2d. Take any pair x, y. In G, their distance is ≤d. If the shortest path in G between x and y does not use the edge e, then their distance in G_e is the same. If their shortest path in G does use e, then in G_e, we need to find another path. Since e is not a cut edge, there exists another path between x and y that doesn't use e. The length of this alternative path can be at most the sum of the distances from x to one end of e, then the other end of e to y, but since the original diameter is d, the distances from x to u and v to y would each be ≤d, so the total would be ≤d + 1 + d, but since e is removed, we need to go around. Wait, maybe better to think:\n\nIf the shortest path from x to y in G uses e, then in G_e, the path must detour around e. Let e = (u, v). The original path was x -> ... -> u -> v -> ... -> y. In G_e, we need to go from u to v via another path. Since G is connected and e is not a cut edge, there's another path from u to v not involving e. The length of this path is at most the diameter d (since in G, the distance from u to v is 1, but in G_e, it's the length of this other path, which could be up to d). So the total path from x to y would be (distance from x to u in G) + (distance from v to y in G) + (distance from u to v in G_e). But since in G, distance from x to u is ≤d -1 (since the original path was x->...->u->v->...->y, which had length ≤d). Wait, if the original path was length ≤d, then x to u is length k, u to v is 1, and v to y is m, where k +1 + m ≤d. Then in G_e, x to u is still k, v to y is still m, but u to v is now some path of length ≤d (since the diameter of G is d). So total path length becomes k + (d) + m. But k + m +1 ≤d, so k + m ≤d -1. Therefore, k + m +d ≤d -1 +d = 2d -1, which is ≤2d. Hence, the distance from x to y in G_e is ≤2d -1, which is ≤2d.\n\nTherefore, the diameter of G_e is at most 2d. This seems to work.\n\nThe user's approach might have considered that when you add an edge, you can shorten a path by at most half, but here removing an edge can at most double the distance, hence leading to the diameter being at most 2d. However, their explanation was about adding edges, but the key idea is that the detour can't be longer than 2d. Therefore, the problem is correctly structured as:\n\nAssumption:\nG is a connected graph,\nthe diameter of G is d,\ne is a non-cut edge of G.\n\nProblem: Prove that the diameter of the graph obtained by removing e from G is at most 2d.",
    "Original_Problem": "assumption: \n$G$ is a connected graph,\nthe diameter of $G$ is $d$,\n$e$ is a non-cut edge of $G$.\nproblem:\nProve that the diameter of the graph obtained by removing $e$ from $G$ is at most $2d$.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: $G$ is a connected graph,\nAssumption 2: the diameter of $G$ is $d$,\nAssumption 3: $e$ is a non-cut edge of $G$.\nProblem:\nProve that the diameter of the graph obtained by removing $e$ from $G$ is at most $2d$.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$0\\le i\\le D$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: $G$ is a connected graph,\nAssumption 2: the diameter of $G$ is $d$,\nAssumption 3: $e$ is a non-cut edge of $G$.\nAssumption 4: $0\\le i\\le D$\nProblem:\nProve that the diameter of the graph obtained by removing $e$ from $G$ is at most $2d$."
}