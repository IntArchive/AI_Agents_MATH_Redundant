{
    "Link_API": "https://api.stackexchange.com/2.3/questions/734615",
    "Title": "Proving $\\left(\\sum_{n=-\\infty}^\\infty q^{n^2} \\right)^2 = \\sum_{n=-\\infty}^\\infty \\frac{1}{\\cos(n \\pi \\tau)}$",
    "Score": 28,
    "Category": "Chứng minh",
    "Tags": "sequences-and-series, complex-analysis, theta-functions",
    "Link": "https://math.stackexchange.com/questions/734615/proving-left-sum-n-infty-infty-qn2-right2-sum-n-infty-inf",
    "Content": "The so-called \"two squares theorem\" can be proven by establishing the following identity: $$\\left(\\sum_{n=-\\infty}^\\infty e^{\\pi i \\tau n^2}\\right)^2 = \\sum_{n=-\\infty}^\\infty \\frac{1}{\\cos(n \\pi \\tau)}$$ where $\\Im \\tau>0$. Stein and Shakarchi give a lengthy proof in their complex analysis book.  The proof is quite complicated and the motivation is unclear.  I would be interested in a more intuitive (or at least concise) proof of the above identity.",
    "AcceptedAnswer": "Below is the shortest proof I know. I would say this proof is motivated insomuch that it is a corollary--albeit not immediate--of the Jacobi triple product. We proceed a la Ramanujan. The proof is quite elementary, but the algebraic manipulations are a bit tedious. The key ingredient of the proof is the Jacobi triple product:\n$$\\sum_{n \\in \\mathbb{Z}} q^{n^2} x^n = \\prod_{n = 1}^\\infty (1 - q^{2n})(1 + q^{2n - 1}x)(1 + q^{2n - 1}x^{-1}), \\quad |q| < 1, \\quad x \\ne 0.$$\nReplacing $q$ with $\\sqrt{q}$ and letting $x = \\sqrt{q}y$ leads to\n$$\\sum_{n \\in \\mathbb Z} q^{n(n + 1)/2} y^n = \\frac{y + 1}{y}\\prod_{n = 1}^\\infty (1 - q^n)(1 + q^n y)(1 + q^n y^{-1}).$$\nNow put $y = -z^2$ so that\n\\begin{align*}\n\\sum_{n \\in \\mathbb Z} (-1)^n q^{n(n + 1)/2} z^{2n + 1} &= \\sum_{n \\in \\mathbb Z} q^{2n^2 + n} z^{4n + 1} - \\sum_{n \\in \\mathbb Z} q^{2n^2 - n} z^{4n - 1}\\\\\n&= (z - z^{-1})\\prod_{n = 1}^\\infty (1 - q^n)(1 - q^n z^2)(1 - q^n z^{-2}).\n\\end{align*}\nUsing the Jacobi triple product we can express the sums on the left-hand side as infinite products:\n\\begin{align*}\n&z\\prod_{n = 1}^\\infty (1 - q^{4n})(1 + q^{4n - 1} z^4)(1 + q^{4n - 3} z^{-4})\\\\\n&\\quad- z^{-1}\\prod_{n = 1}^\\infty (1 - q^{4n})(1 + q^{4n - 3} z^4)(1 + q^{4n - 1} z^{-4})\\\\\n&= (z - z^{-1})\\prod_{n = 1}^\\infty (1 - q^n)(1 - q^n z^2)(1 - q^n z^{-2}).\n\\end{align*}\nIf we differentiate both sides logarithmically with respect to $z$ and then set $z = 1$ we get\n$$1 + 4\\sum_{n = 1}^\\infty (-1)^n \\frac{q^{2n - 1}}{1 + q^{2n - 1}} = \\frac{\\prod_{n = 1}^\\infty (1 - q^n)^3}{\\prod_{n = 1}^\\infty (1 - q^{4n})(1 + q^{4n - 1})(1 + q^{4n - 3})}.$$\nYet,\n$$\\frac{\\prod_{n = 1}^\\infty (1 - q^n)^3}{\\prod_{n = 1}^\\infty (1 - q^{4n})(1 + q^{4n - 1})(1 + q^{4n - 3})} = \\frac{\\prod_{n = 1}^\\infty (1 - q^n)^3}{\\prod_{n = 1}^\\infty (1 + q^n)(1 - q^{2n})} = \\frac{\\prod_{n = 1}^\\infty (1 - q^n)^2}{\\prod_{n = 1}^\\infty (1 + q^n)^2} = \\theta_4^2(q),$$\nwhere the last equality follows from the Jacobi triple product (use $x = -1$) and Euler's identity:\n$$(1 + q)(1 + q^2)(1 + q^3)\\cdots = \\frac{1}{(1 - q)(1 - q^3)(1 - q^5)\\cdots}.$$\nTo prove this identity write\n$$(1 + q)(1 + q^2)(1 + q^3)\\cdots = \\frac{(1 + q)(1 - q)(1 + q^2)(1 - q^2)(1 + q^3)(1 - q^3)\\cdots}{(1 - q)(1 - q^2)(1 - q^3)\\cdots}.$$\nEvidently, all the terms of the form $(1 - q^{2n})$ cancel because $(1 + q)(1 - q) = (1 - q^2)$, $(1 + q^2)(1 - q^2) = (1 - q^4)$, etc. Consequently,\n$$\\theta_4^2(q) = 1 + 4\\sum_{n = 1}^\\infty (-1)^n \\frac{q^{2n - 1}}{1 + q^{2n - 1}},$$\nwhich is equivalent to\n$$\\theta_3^2(q) = 1 + 4\\sum_{n = 0}^\\infty (-1)^n \\frac{q^{2n + 1}}{1 - q^{2n + 1}}$$\nas $\\theta_4(-q) = \\theta_3(q)$. However,\n$$\\sum_{n = 0}^\\infty (-1)^n \\frac{q^{2n + 1}}{1 - q^{2n + 1}} = \\sum_{n = 1}^\\infty \\frac{q^n}{1 + q^{2n}}$$\nbecause\n\\begin{align*}\n&(q + q^2 + q^3 + \\cdots) - (q^3 + q^6 + q^9 + \\cdots) + (q^5 + q^{10} + q^{15} + \\cdots) - \\cdots\\\\\n&\\quad= (q + q^2 + q^3 + \\cdots) - (q^3 + q^6 + q^9 + \\cdots) + (q^5 + q^{10} + q^{15} + \\cdots) - \\cdots\\\\\n&\\qquad+ (q^3 + q^7 + q^{11} + \\cdots) - (q^3 + q^7 + q^{11} + \\cdots)\\\\\n&\\quad\\qquad= q(1 - q^2 + q^4 - \\cdots) + q^2(1 - q^4 + q^8 - \\cdots) + q^3(1 - q^6 + q^{12} - \\cdots) + \\cdots\n\\end{align*}\nThus\n$$\\theta_3^2(q) = 1 + 4\\sum_{n = 1}^\\infty \\frac{q^n}{1 + q^{2n}} = 1 + 4\\sum_{n = 1}^\\infty \\frac{1}{q^n + q^{-n}} = 2\\sum_{n \\in \\mathbb{Z}} \\frac{1}{q^n + q^{-n}} = \\sum_{n \\in \\mathbb{Z}} \\frac{1}{\\cos(n \\pi \\tau)}$$\nfor it is clear that $q^n + q^{-n} = e^{n\\pi i \\tau} + e^{-n\\pi i \\tau} = 2\\cos(n\\pi \\tau).$",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \n$\\Im \\tau > 0$.\nProblem: \nProve that $$\\left(\\sum_{n=-\\infty}^\\infty e^{\\pi i \\tau n^2}\\right)^2 = \\sum_{n=-\\infty}^\\infty \\frac{1}{\\cos(n \\pi \\tau)}$$ holds.\n###END_OF_FORMAT###",
    "reasoning_create_structured_problem": "Okay, let's tackle this problem. The user wants me to structure the given Math Stack Exchange question into the specified format. First, I need to identify the assumptions and the problem statement from the original question.\n\nLooking at the original problem: The user mentions an identity involving sums over infinity of exponential terms and reciprocals of cosine functions. The key points here are the equality of two infinite sums under certain conditions. \n\nThe identity is presented as $$\\left(\\sum_{n=-\\infty}^\\infty e^{\\pi i \\tau n^2}\\right)^2 = \\sum_{n=-\\infty}^\\infty \\frac{1}{\\cos(n \\pi \\tau)}$$ with the condition that the imaginary part of τ is greater than zero. \n\nNow, breaking down the assumptions. The problem states that this is part of proving the two squares theorem, but the user is specifically focusing on the identity. The main assumption here is about the imaginary part of τ being positive. Since τ is a complex variable here, the condition ℑτ > 0 ensures convergence of the sums, especially the theta function on the left side. \n\nI need to list each assumption line by line, each addressing one property or condition applied to one object. In this case, the only explicit assumption given is that the imaginary part of τ is positive. The original problem doesn't mention any other conditions, like specific values of n or additional constraints on τ beyond its imaginary part. \n\nSo, the assumptions would be:\n- The imaginary part of τ is positive (ℑτ > 0).\n\nThe problem is to prove the given identity. I should make sure that the problem statement is correctly restated without any additional information. The user also mentions that Stein and Shakarchi's proof is lengthy and asks for a more intuitive or concise proof, but that part is more of the motivation for the question rather than part of the problem itself. So the problem remains as proving the identity.\n\nTherefore, the formatted problem should have the assumption regarding τ's imaginary part and the problem statement as proving the equality of the two sums.",
    "Original_Problem": "Assumption: \n$\\Im \\tau > 0$.\nProblem: \nProve that $$\\left(\\sum_{n=-\\infty}^\\infty e^{\\pi i \\tau n^2}\\right)^2 = \\sum_{n=-\\infty}^\\infty \\frac{1}{\\cos(n \\pi \\tau)}$$ holds.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: $\\Im \\tau > 0$.\nProblem: \nProve that $$\\left(\\sum_{n=-\\infty}^\\infty e^{\\pi i \\tau n^2}\\right)^2 = \\sum_{n=-\\infty}^\\infty \\frac{1}{\\cos(n \\pi \\tau)}$$ holds.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$1 + 4\\sum_{n = 1}^\\infty (-1)^n \\frac{q^{2n - 1}}{1 + q^{2n - 1}} = \\frac{\\prod_{n = 1}^\\infty (1 - q^n)^3}{\\prod_{n = 1}^\\infty (1 - q^{4n})(1 + q^{4n - 1})(1 + q^{4n - 3})}.$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: $\\Im \\tau > 0$.\nAssumption 2: $$1 + 4\\sum_{n = 1}^\\infty (-1)^n \\frac{q^{2n - 1}}{1 + q^{2n - 1}} = \\frac{\\prod_{n = 1}^\\infty (1 - q^n)^3}{\\prod_{n = 1}^\\infty (1 - q^{4n})(1 + q^{4n - 1})(1 + q^{4n - 3})}.$$\nProblem: \nProve that $$\\left(\\sum_{n=-\\infty}^\\infty e^{\\pi i \\tau n^2}\\right)^2 = \\sum_{n=-\\infty}^\\infty \\frac{1}{\\cos(n \\pi \\tau)}$$ holds."
}