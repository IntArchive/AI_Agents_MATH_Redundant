{
    "Link_API": "https://api.stackexchange.com/2.3/questions/309389",
    "Title": "Inverse image of the sheaf associated to a module",
    "Score": 20,
    "Category": "Chứng minh",
    "Tags": "algebraic-geometry, commutative-algebra, tensor-products, quasicoherent-sheaves",
    "Link": "https://math.stackexchange.com/questions/309389/inverse-image-of-the-sheaf-associated-to-a-module",
    "Content": "In Hartshorne, Algebraic geometry it's written, that for every scheme morphism $f: Spec B \\to Spec A$ and $A$-module $M$ $f^*(\\tilde M) = \\tilde {(M \\otimes_A B)}$. And that it immediately follows from the definition. But I don't know how to prove it in simple way. Could you help me?",
    "AcceptedAnswer": "Don't use the book by Hartshorne when you want to learn the foundations of algebraic geometry. There are many, many books which explain them far better (Liu, Görtz-Wedhorn, Bosch, ...). And in fact, in this case, this isomorphism does not immediately follow from  the usual definition of $f^*$ via $f^{-1}$. Therefore, the claim by Hartshorne is misleading. One rather has to use the adjunction between scalar restriction and scalar extension: The inverse image functor $f^*$ should be seen as (defined to be) the left adjoint of the direct image functor $f_*$. Therefore, it is enough to show that $f_* : \\mathsf{Qcoh}(\\mathrm{Spec}(B)) \\to \\mathsf{Qcoh}(\\mathrm{Spec}(A))$ corresponds, under the equivalence of categories $ \\mathsf{Qcoh}(\\mathrm{Spec}(A)) \\cong \\mathsf{Mod}(A), F \\mapsto \\Gamma(F)$, to the scalar restriction functor $\\mathsf{Mod}(B) \\to \\mathsf{Mod}(A)$. But this is clear, since we have more generally $\\Gamma(f_*(F))=\\Gamma(F)$ by definition of $f_*$. One can, instead of adjointness, start with $f^* \\tilde{M} = f^{-1} \\tilde{M} \\otimes_{f^{-1} \\mathcal{O}_{\\mathrm{Spec}(A)}} \\mathcal{O}_{\\mathrm{Spec}(B)}$, and use the complicated ad hoc definitions of the tensor product of sheaves and of $f^{-1}$ (remember that they are associated sheaves of certain presheaves). But this involves, in detail, many computations. In my opinion this approach is unnecessarily complicated.",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \n$f: \\text{Spec } B \\to \\text{Spec } A$ is a scheme morphism,\n$M$ is an $A$-module,\nThe inverse image sheaf $f^*(\\tilde{M})$ is defined via $f^{-1}\\tilde{M} \\otimes_{f^{-1}\\mathcal{O}_{\\text{Spec } A}} \\mathcal{O}_{\\text{Spec } B}$,\nThe sheaf $\\tilde{(M \\otimes_A B)}$ is associated to the $B$-module $M \\otimes_A B$.\nProblem: \nProve that $f^*(\\tilde{M}) = \\tilde{(M \\otimes_A B)}$ under these assumptions.\n###",
    "reasoning_create_structured_problem": "Okay, let me try to work through this problem step by step. So the user is asking about proving that for a morphism of schemes f: Spec B → Spec A and an A-module M, the inverse image sheaf f*(M~) is isomorphic to the sheaf associated to the module M ⊗_A B. They mention Hartshorne says it follows immediately from the definition but they're having trouble seeing why.\n\nFirst, I need to recall the definitions. The inverse image sheaf f*F is defined as the sheaf associated to the presheaf which assigns to an open U in Spec B the colimit of F(V) over all open V in Spec A containing f(U). But in this case, F is the sheaf M~ on Spec A, which is the sheaf associated to the module M. So maybe there's a simpler way since we're dealing with quasi-coherent sheaves on affine schemes.\n\nI remember that for affine schemes, the category of A-modules is equivalent to the category of quasi-coherent sheaves on Spec A, via the tilde construction. So M~ is a quasi-coherent sheaf, and similarly for B-modules. The inverse image functor f* should take quasi-coherent sheaves on Spec A to quasi-coherent sheaves on Spec B. And the key property might be that f*(M~) is (M ⊗_A B)~.\n\nBut how exactly does this follow from the definition? Let me think. The inverse image sheaf f*F is defined as the sheaf associated to the presheaf tensor product. Wait, no. The inverse image for sheaves of modules is a bit different. Alternatively, maybe there's an adjunction here. The inverse image is left adjoint to the direct image. For quasi-coherent sheaves, the inverse image should correspond to the tensor product. Because when you have a morphism of rings A → B, the inverse image of an A-module M is M ⊗_A B. So translating that into sheaves, f*(M~) would be (M ⊗_A B)~.\n\nAlternatively, let's think about the definitions more concretely. On Spec A, the structure sheaf O_{Spec A} is A~, and the sheaf M~ is such that its sections over a basic open D(f) are M_f. Similarly, on Spec B, the sheaf (M ⊗_A B)~ will have sections (M ⊗_A B)_g for g ∈ B. The inverse image sheaf f*M~ is supposed to be a sheaf on Spec B. Let's recall that for a sheaf F on X, the inverse image sheaf f^{-1}F on Y is the sheaf associated to the presheaf U ↦ lim_{V ⊇ f(U)} F(V). But here we're dealing with f* which for sheaves of modules is f^{-1}F ⊗_{f^{-1}O_X} O_Y. Wait, maybe that's where the tensor product comes in. Since f: Spec B → Spec A corresponds to a ring homomorphism A → B, then f^{-1}O_{Spec A} is O_{Spec A} pulled back to Spec B, which is just B as a module over itself. Wait, perhaps it's easier to use the fact that the inverse image of M~ is f^{-1}M~ ⊗_{f^{-1}O_{Spec A}} O_{Spec B}. But f^{-1}M~ is a sheaf on Spec B, and since M~ is quasi-coherent, maybe f^{-1}M~ is just M viewed as a module over A via the map A → B. Then the tensor product over f^{-1}O_{Spec A} would be M ⊗_A B, hence the associated sheaf is (M ⊗_A B)~.\n\nAlternatively, maybe we can use the fact that on affine schemes, the inverse image sheaf operation corresponds to the extension of scalars. Since the morphism f is induced by the ring homomorphism φ: A → B, then for any A-module M, f*(M~) should be the sheaf associated to the B-module M ⊗_A B. Because pulling back the sheaf M~ along f should correspond to changing the base ring from A to B, which is exactly what the tensor product accomplishes.\n\nAnother approach: Let's compute the sections of f*(M~) on a basic open set D(g) in Spec B. The inverse image sheaf f*(M~) is defined as the sheaf associated to the presheaf that sends D(g) to lim_{D(f) ⊇ f(D(g))} M_f. But f(D(g)) is the image of D(g) under the morphism f, which corresponds to the preimage under φ of D(g) in Spec A. Since φ: A → B, the prime ideals in Spec B are those contracting to primes in Spec A. The image f(D(g)) is the set { φ^{-1}(q) | q ∈ D(g) }, which is the set of primes p in Spec A such that p = φ^{-1}(q) where g ∉ q. But D(g) in Spec B is q such that g ∉ q. The image f(D(g)) is contained in D(φ(g)) in Spec A, because if q ∈ D(g), then φ(g) ∉ q ∩ A = p, so p ∈ D(φ(g)). So the inverse image sheaf's presheaf on D(g) would be colimit over V containing f(D(g)) of M~ (V). But since f(D(g)) is contained in D(φ(g)), the colimit would be over basic opens D(f) containing D(φ(g)), which is equivalent to D(f) containing D(φ(g)), so φ(g) is not in p for all p in D(f). This might imply that f divides some power of φ(g), but I'm getting a bit confused here.\n\nAlternatively, instead of computing the presheaf inverse image, maybe we can use the fact that M~ is quasi-coherent, and so f*(M~) should also be quasi-coherent, hence determined by its global sections. The global sections of f*(M~) would be the global sections of M~ over Spec A, which is M, but then tensored with B? Wait, no. The global sections of f*(M~) would be the same as the global sections of M~ over Spec A, but that doesn't sound right. Wait, no. The inverse image sheaf f*F is such that its global sections are the same as the stalk at the generic point, maybe? Not sure.\n\nAlternatively, using the adjunction between f* and f_*. For sheaves of modules, Hom(f*F, G) = Hom(F, f_*G). If we take F = M~ and G = (M⊗B)~, then maybe we can check that they satisfy the adjunction, but this might be more abstract.\n\nAlternatively, let's consider the case where M = A. Then f*(O_{Spec A}) should be O_{Spec B}, which is B~. Since A ⊗_A B = B, so that works. For another case, if M is a free A-module A^n, then f*(M~) would be (A^n ⊗_A B)~ = B^n~, which is correct. So maybe the general case follows by the fact that the inverse image functor commutes with tensor products and preserves colimits, hence any module can be built from free modules via presentations, and since both sides are right exact, they agree.\n\nBut the problem states that it should follow immediately from the definition. So perhaps there's a more straightforward way. Let me recall that for any ring homomorphism φ: A → B, and any A-module M, the sheaf M~ on Spec A pulled back to Spec B is (M ⊗_A B)~. This is part of the basic properties of quasi-coherent sheaves. The key point is that the inverse image sheaf f*M~ is isomorphic to (M ⊗_A B)~. \n\nBut how does this follow from the definition of inverse image sheaf? The inverse image sheaf is defined as f^{-1}M~ ⊗_{f^{-1}O_A} O_B. Here, f^{-1}M~ is the sheaf on Spec B associated to the presheaf sending U to colim_{V ⊇ f(U)} M~(V). But since M~ is quasi-coherent, M~(V) is M localized at some elements. However, f(U) is a subset of Spec A, and the colimit would be over open sets containing f(U). But since Spec A is affine, maybe we can cover f(U) with basic opens, but this might be complicated. Alternatively, since M~ is quasi-coherent, f^{-1}M~ is a sheaf of f^{-1}O_A-modules. Then when you tensor over f^{-1}O_A with O_B, you get M ⊗_A B, because f^{-1}O_A is O_{Spec B} via the structure sheaf of Spec B. Wait, maybe that's the key. The sheaf f^{-1}O_A is O_{Spec B} because the inverse image of the structure sheaf is the structure sheaf of the source. But no, f^{-1}O_A is a sheaf of rings on Spec B, but O_{Spec B} is also a sheaf of rings. However, the morphism f induces a morphism f^{-1}O_A → O_B. Then, when you take f^{-1}M~, which is a sheaf of f^{-1}O_A-modules, and tensor it with O_B over f^{-1}O_A, you get M~ ⊗_{f^{-1}O_A} O_B. But M~ is M as a module, so locally, sections are M_f, and when you tensor with B over A, you get M ⊗_A B localized at g. So this should give (M ⊗_A B)~. Hence, f*M~ = (M ⊗_A B)~.\n\nI think that's the main idea. The inverse image sheaf for modules is given by the tensor product, which aligns with the algebraic operation of extending scalars. Since Hartshorne mentions this follows immediately from the definition, it's likely relying on the fact that the inverse image of a quasi-coherent sheaf is quasi-coherent and corresponds to the module extension.",
    "Original_Problem": "Assumption: \n$f: \\text{Spec } B \\to \\text{Spec } A$ is a scheme morphism,\n$M$ is an $A$-module,\nThe inverse image sheaf $f^*(\\tilde{M})$ is defined via $f^{-1}\\tilde{M} \\otimes_{f^{-1}\\mathcal{O}_{\\text{Spec } A}} \\mathcal{O}_{\\text{Spec } B}$,\nThe sheaf $\\tilde{(M \\otimes_A B)}$ is associated to the $B$-module $M \\otimes_A B$.\nProblem: \nProve that $f^*(\\tilde{M}) = \\tilde{(M \\otimes_A B)}$ under these assumptions.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: $f: \\text{Spec } B \\to \\text{Spec } A$ is a scheme morphism,\nAssumption 2: $M$ is an $A$-module,\nAssumption 3: The inverse image sheaf $f^*(\\tilde{M})$ is defined via $f^{-1}\\tilde{M} \\otimes_{f^{-1}\\mathcal{O}_{\\text{Spec } A}} \\mathcal{O}_{\\text{Spec } B}$,\nAssumption 4: The sheaf $\\tilde{(M \\otimes_A B)}$ is associated to the $B$-module $M \\otimes_A B$.\nProblem: \nProve that $f^*(\\tilde{M}) = \\tilde{(M \\otimes_A B)}$ under these assumptions.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$\\mathsf{Mod}(B) \\to \\mathsf{Mod}(A)$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: $f: \\text{Spec } B \\to \\text{Spec } A$ is a scheme morphism,\nAssumption 2: $M$ is an $A$-module,\nAssumption 3: The inverse image sheaf $f^*(\\tilde{M})$ is defined via $f^{-1}\\tilde{M} \\otimes_{f^{-1}\\mathcal{O}_{\\text{Spec } A}} \\mathcal{O}_{\\text{Spec } B}$,\nAssumption 4: The sheaf $\\tilde{(M \\otimes_A B)}$ is associated to the $B$-module $M \\otimes_A B$.\nAssumption 5: $\\mathsf{Mod}(B) \\to \\mathsf{Mod}(A)$\nProblem: \nProve that $f^*(\\tilde{M}) = \\tilde{(M \\otimes_A B)}$ under these assumptions."
}