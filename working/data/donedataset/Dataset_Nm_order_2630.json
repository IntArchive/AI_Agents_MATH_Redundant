{
    "Link_API": "https://api.stackexchange.com/2.3/questions/2136944",
    "Title": "Differentiation under the integral sign and uniform integrability",
    "Score": 14,
    "Category": "Chứng minh",
    "Tags": "real-analysis, measure-theory, derivatives, lebesgue-integral, uniform-integrability",
    "Link": "https://math.stackexchange.com/questions/2136944/differentiation-under-the-integral-sign-and-uniform-integrability",
    "Content": "Let $(X,\\mu)$ be a measure space (if it's convenient we can assume $\\mu$ is finite).  Let $[a,b]$ be an interval, and suppose we have a function $f : [a,b] \\times X \\to \\mathbb{R}$ such that: For each $x \\in X$, we have $f(\\cdot, x) \\in C^1([a,b])$; For each $t \\in [a,b]$, we have $f(t, \\cdot), \\partial_t f(t, \\cdot) \\in L^1(\\mu)$. (If it helps I'm happy to also assume that $f$ and $\\partial_t f$ are  jointly measurable.) Set $F(t) = \\int_X f(t,x)\\, \\mu(dx)$.  The classical \"differentiation under the integral sign\" theorem says that if we assume the hypothesis\n$$\\text{There exists $g \\in L^1(\\mu)$ such that $\\sup_{t \\in [a,b]} |\\partial_t f(t,x)| \\le g(x)$} \\tag{DOM}$$\nthen $F$ is differentiable on $(a,b)$ and $F'(t) = \\int_X \\partial_t f(t,x) \\,\\mu(dx)$.  Indeed, it would follow that $F \\in C^1([a,b])$. Now, in many situations, one can weaken a \"domination\" hypothesis to uniform integrability.  (For instance, the dominated convergence theorem is extended by the Vitali convergence theorem .) So suppose we replace the hypothesis (DOM) with the following:\n$$\\text{$\\{\\partial_t f(t,\\cdot) : t \\in [a,b]\\}$ is uniformly integrable with respect to $\\mu$} \\tag{UI}$$\nDoes the same conclusion hold? I'd think this would be standard if it's true, but I've never seen it written down.  But I also can't think of a counterexample. I would like to follow the proof of the classical result by proceeding as follows: Fix $t_0 \\in (a,b)$ and an arbitrary sequence $t_n \\to t_0$ with all $t_n \\in (a,b)$.  We have $$F'(t_0) = \\lim_{n \\to \\infty} \\int_X \\frac{f(t_n, x)-f(t_0, x)}{t_n - t_0}\\,\\mu(dx)$$\nif the limit exists, and we would like to pass the limit under the integral sign.  This would be possible if the sequence of difference quotients $D_n(x) = \\frac{f(t_n, x)-f(t_0, x)}{t_n - t_0}$ were uniformly integrable.  By the mean value theorem, we know that for each $x$ there is $t_n^*(x) \\in (a,b)$ such that $D_n(x) = \\partial_t f(t_n^*(x), x)$.  If we could choose $t_n$ independently of $x$, then $\\{D_n\\}$ would be dominated by a UI sequence and we would be done.  But of course that will not work in general. Note: there are a couple of inequivalent definitions of uniformly integrable .  I would be happy to adopt the stronger one, in which we assume that $\\{\\partial_t f(t,\\cdot) : t \\in [a,b]\\}$ is bounded in $L^1$ norm. (In the specific case that I care about, $\\mu$ is a probability measure and I can show $\\sup_{t \\in [a,b]} \\|\\partial_t f(t, \\cdot)\\|_{L^p(\\mu)} < \\infty$ for some $p>1$, which implies (UI) by the so-called \"crystal ball condition\".)",
    "AcceptedAnswer": "Thinking a little more, I believe this is true. Let's adopt the strong sense of uniform integrability, and further assume that $\\partial_t f$ is jointly measurable. Set $G(t) = \\int_X \\partial_t f(t,x) \\mu(dx)$ .  The assumption (UI) ensures that $G$ is continuous on $[a,b]$ .  Fixing $t_0$ in $[a,b]$ and a sequence $t_n \\to t_0$ within $[a,b]$ , we have assumed $\\partial_t f(t_n,x) \\to \\partial_t f(t_0, x)$ for each $x$ , so by the Vitali convergence theorem we have $G(t_n) \\to G(t_0)$ . Now if we adopt the strong sense of uniform integrability, then (UI) implies $$M := \\sup_{t \\in [a,b]} \\int |\\partial_t f(t,x)|\\,\\mu(dx) < \\infty.$$ As such we have, for any $t \\in [a,b]$ , $$\\int_a^t \\int_X |\\partial_t f(s,x)|\\,\\mu(dx)\\,ds \\le M|t-a| < \\infty$$ So Fubini's theorem and the first fundamental theorem of calculus gives $$\\begin{align*}\n\\int_a^t G(s)\\,ds &= \\int_a^t \\int_X \\partial_t f(s,x)\\,\\mu(dx)\\,ds \\\\\n&= \\int_X \\int_a^t \\partial_t f(s,x)\\,ds\\,\\mu(dx) \\\\\n&= \\int_X (f(t,x) - f(a,x)) \\,\\mu(dx) \\\\\n&= F(t) - F(a).\n\\end{align*}\n$$ So $F(t) = F(a) + \\int_a^t G(s)\\,ds$ , for any $t \\in [a,b]$ .  The second fundamental theorem of calculus says that $F$ is differentiable on $(a,b)$ and $F' = G$ .  Since $G$ is continuous, $F$ is $C^1$ . I never did find a proof in the literature, so I wrote it out as Lemma 6.1 of Eldredge, Nathaniel , Strong hypercontractivity and strong logarithmic Sobolev inequalities for log-subharmonic functions on stratified Lie groups , Nonlinear Anal., Theory Methods Appl., Ser. A, Theory Methods 168, 1-26 (2018). ZBL1382.35084 , arXiv:1706.07517 .",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \nFor each $x \\in X$, $f(\\cdot, x) \\in C^1([a,b])$,\nFor each $t \\in [a,b]$, $f(t, \\cdot) \\in L^1(\\mu)$,\nFor each $t \\in [a,b]$, $\\partial_t f(t, \\cdot) \\in L^1(\\mu)$,\nThe family $\\{\\partial_t f(t, \\cdot) : t \\in [a,b]\\}$ is uniformly integrable with respect to $\\mu$,\n$f$ and $\\partial_t f$ are jointly measurable.\nProblem: \nProve that $F(t) = \\int_X f(t,x)\\, \\mu(dx)$ is differentiable on $(a,b)$ and $F'(t) = \\int_X \\partial_t f(t,x) \\,\\mu(dx)$.\n###END_OF_FORMAT###",
    "reasoning_create_structured_problem": "Okay, let's try to tackle this problem. The user wants me to structure the given Math Stack Exchange question into the specified format. The original question is about differentiating under the integral sign using uniform integrability instead of domination. \n\nFirst, I need to parse the original problem and filter out the unnecessary information. The example provided shows that assumptions should be listed line by line, each addressing one property or condition applied to one object. The problem statement should then be concise.\n\nLooking at the original question, the setup includes a measure space (X, μ), an interval [a,b], and a function f: [a,b] × X → ℝ. The conditions given are:\n\n1. For each x ∈ X, f(·, x) is in C¹([a,b]).\n2. For each t ∈ [a,b], f(t, ·) and ∂ₜf(t, ·) are in L¹(μ).\n3. The hypothesis (DOM) is replaced with (UI): {∂ₜf(t, ·) : t ∈ [a,b]} is uniformly integrable with respect to μ.\n\nThe problem is whether under these conditions, F(t) = ∫ₓ f(t,x) μ(dx) is differentiable with F’(t) = ∫ₓ ∂ₜf(t,x) μ(dx).\n\nSo, the assumptions would need to list each condition separately. Let me break them down:\n\n- The measure space (X, μ) is given (though the user allows assuming μ is finite if convenient, but maybe that's optional? The problem doesn't require it, so perhaps it's not part of the core assumptions unless specified. The original problem mentions it but says \"if convenient\", so maybe it's not a strict assumption here.)\n- For each x in X, f(·,x) is continuously differentiable on [a,b].\n- For each t in [a,b], f(t, ·) is in L¹(μ).\n- For each t in [a,b], ∂ₜf(t, ·) is in L¹(μ).\n- The family {∂ₜf(t, ·) : t ∈ [a,b]} is uniformly integrable with respect to μ.\n\nWait, the problem says to replace (DOM) with (UI). So the original (DOM) is not an assumption here; instead, (UI) is the key assumption. Also, the user mentions that they can assume joint measurability if needed, but since the problem is whether (UI) suffices, maybe that's an additional assumption if required. The original problem states \"if it helps I'm happy to also assume...\", which might mean that the user is willing to include it, but perhaps it's part of the problem's assumptions now. However, the core problem is whether under (UI) the conclusion holds, so maybe joint measurability is an extra condition. But in the example given earlier, the assumption list didn't include all possible details from the original problem, just the necessary ones. So perhaps the joint measurability is optional and not part of the core assumptions unless required. The problem as posed by the user on Math Exchange is whether (UI) is sufficient. So in structuring this, the key assumptions are:\n\n- For each x ∈ X, f(·, x) is in C¹([a,b]).\n- For each t ∈ [a,b], f(t, ·) and ∂ₜf(t, ·) are in L¹(μ).\n- The family {∂ₜf(t, ·) : t ∈ [a,b]} is uniformly integrable with respect to μ.\n\nAdditionally, the problem mentions that they can assume joint measurability if needed, but since the problem is to check if (UI) suffices, perhaps the joint measurability is part of the assumptions. Wait, in the original problem, the user says: \"(if it helps I'm happy to also assume that f and ∂ₜf are jointly measurable.)\" So this is an optional assumption. The problem is posed as \"Does the same conclusion hold?\" under (UI). Therefore, the core assumptions are the ones listed above, and joint measurability is an additional possible assumption. However, since the problem allows for that assumption, maybe it should be included. But the example given in the original instruction didn't include all possible conditions from the problem, just the necessary ones. For instance, in the example, the assumption included that n is divisible by 7, which was part of the problem's hypothesis. Here, the problem is replacing (DOM) with (UI). The initial conditions are:\n\n1. For each x, f(·,x) is C¹.\n2. For each t, f(t,·) and ∂ₜf(t,·) are integrable.\n3. The family ∂ₜf(t,·) is UI.\n\nAdditionally, joint measurability might be needed but the user is open to assuming it. Since the user is okay with assuming joint measurability, perhaps that's part of the assumptions. However, the problem as structured is whether (UI) suffices. So perhaps to make the problem precise, we should include joint measurability if it's necessary. But the standard differentiation under the integral sign requires some measurability, right? So maybe the problem assumes that f and ∂ₜf are jointly measurable. But the original question says \"if it helps I'm happy to also assume that f and ∂ₜf are jointly measurable.\" So maybe in the structured problem, we should include that as an assumption. But the user might not have made it explicit. Hmm.\n\nAlternatively, the original problem's standard theorem (DOM case) requires certain conditions, and the user is asking if replacing DOM with UI works under the same other conditions. So the assumptions would be:\n\n- (X, μ) is a measure space (possibly with μ finite if needed, but not specified as an assumption here).\n- For each x ∈ X, f(·, x) ∈ C¹([a,b]).\n- For each t ∈ [a,b], f(t, ·) ∈ L¹(μ).\n- For each t ∈ [a,b], ∂ₜf(t, ·) ∈ L¹(μ).\n- The family {∂ₜf(t, ·) : t ∈ [a,b]} is uniformly integrable.\n\nAdditionally, joint measurability of f and ∂ₜf might be required, so if the user is assuming that, it should be listed. Since the original problem states \"if it helps I'm happy to also assume...\", in the structured problem, we should include that as an assumption if it's necessary for the result. Since differentiation under the integral sign usually requires some measurability, perhaps it's part of the assumptions here. So, in the assumption list:\n\n- For each x ∈ X, f(·, x) is in C¹([a,b]).\n- For each t ∈ [a,b], f(t, ·) is in L¹(μ).\n- For each t ∈ [a,b], ∂ₜf(t, ·) is in L¹(μ).\n- The family {∂ₜf(t, ·) : t ∈ [a,b]} is uniformly integrable with respect to μ.\n- f and ∂ₜf are jointly measurable.\n\nBut the original problem doesn't explicitly require joint measurability in the UI case, but the user is open to assuming it. Since the problem is about whether (UI) is sufficient, and if joint measurability is needed, then it's part of the assumptions. So to make the problem well-posed, maybe we need to include that. However, in the example given by the user, the formatted problem didn't include all the original problem's conditions, just the key ones. For example, in the example, the original problem mentioned A(n) = 5^n(5^n +1) -6^n(3^n +2^n), and the formatted assumption was that n is an integer and divisible by 7, which seems like it was part of the problem's specific conditions. \n\nIn this case, the problem's key assumptions are:\n\n1. For each x ∈ X, f(·,x) is continuously differentiable on [a,b].\n2. For each t ∈ [a,b], f(t,·) and ∂ₜf(t,·) are in L¹(μ).\n3. The collection {∂ₜf(t,·) : t ∈ [a,b]} is uniformly integrable.\n4. f and ∂ₜf are jointly measurable (since the user allows this assumption if needed, which likely is necessary for the problem to hold).\n\nSo each of these should be separate lines in the assumption section. The problem is to prove that F is differentiable with derivative equal to the integral of ∂ₜf.\n\nWait, but in the original problem statement, the user is asking whether under (UI), the same conclusion holds as in the classical theorem. The conclusion being that F is differentiable on (a,b) with F’(t) = ∫ ∂ₜf(t,x) μ(dx). So the problem is to prove that under the given assumptions (including UI instead of DOM), F is differentiable and the derivative is as stated.\n\nSo the assumptions are:\n\n- (X, μ) is a measure space (but this is given, maybe not an assumption per se? Wait, in the example, the assumption was about n being an integer and divisible by 7. The measure space is part of the problem setup, but perhaps not listed as assumptions. Wait, the example didn't include the setup as assumptions. The example's original problem was about integers n, and the assumption was that n is an integer and divisible by 7. So perhaps the measure space here is part of the problem setup, not the assumptions. The user's task is to list the assumptions, which are the conditions imposed on the objects in the problem. So in this case, the measure space is part of the problem's context, but the assumptions are the conditions on f.\n\nTherefore, the assumptions would be:\n\n- For each x ∈ X, f(·, x) is in C¹([a,b]).\n- For each t ∈ [a,b], f(t, ·) ∈ L¹(μ).\n- For each t ∈ [a,b], ∂ₜf(t, ·) ∈ L¹(μ).\n- The family {∂ₜf(t, ·) : t ∈ [a,b]} is uniformly integrable with respect to μ.\n- f and ∂ₜf are jointly measurable (if required; since the user allows it, this should be included).\n\nBut the original problem mentions \"if it helps I'm happy to also assume that f and ∂ₜf are jointly measurable.\" So in the structured problem, this should be included as an assumption. Therefore, the assumptions list includes that.\n\nEach of these should be a separate line. So:\n\nAssumption:\nFor each x ∈ X, f(·, x) is in C¹([a,b]),\nFor each t ∈ [a,b], f(t, ·) ∈ L¹(μ),\nFor each t ∈ [a,b], ∂ₜf(t, ·) ∈ L¹(μ),\nThe family {∂ₜf(t, ·) : t ∈ [a,b]} is uniformly integrable with respect to μ,\nf and ∂ₜf are jointly measurable.\n\nProblem:\nProve that F is differentiable on (a,b) with F’(t) = ∫ₓ ∂ₜf(t,x) μ(dx).\n\nWait, but the original problem statement says \"Set F(t) = ∫ₓ f(t,x) μ(dx). The classical theorem says under (DOM), F is differentiable and F’(t) = ∫ ∂ₜf(t,x) μ(dx). Now, replacing (DOM) with (UI), does the same conclusion hold?\"\n\nSo the problem is whether under (UI) instead of (DOM), F is differentiable with derivative as the integral of the partial derivative. Hence, the problem is to prove that under the assumptions (including UI), F is differentiable and the derivative is as stated.\n\nHence, the formatted problem should list all the necessary assumptions (each on a separate line) and then state the problem.\n\nTherefore, the final answer should be structured as per the example, listing each assumption and then the problem.",
    "Original_Problem": "Assumption: \nFor each $x \\in X$, $f(\\cdot, x) \\in C^1([a,b])$,\nFor each $t \\in [a,b]$, $f(t, \\cdot) \\in L^1(\\mu)$,\nFor each $t \\in [a,b]$, $\\partial_t f(t, \\cdot) \\in L^1(\\mu)$,\nThe family $\\{\\partial_t f(t, \\cdot) : t \\in [a,b]\\}$ is uniformly integrable with respect to $\\mu$,\n$f$ and $\\partial_t f$ are jointly measurable.\nProblem: \nProve that $F(t) = \\int_X f(t,x)\\, \\mu(dx)$ is differentiable on $(a,b)$ and $F'(t) = \\int_X \\partial_t f(t,x) \\,\\mu(dx)$.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: For each $x \\in X$, $f(\\cdot, x) \\in C^1([a,b])$,\nAssumption 2: For each $t \\in [a,b]$, $f(t, \\cdot) \\in L^1(\\mu)$,\nAssumption 3: For each $t \\in [a,b]$, $\\partial_t f(t, \\cdot) \\in L^1(\\mu)$,\nAssumption 4: The family $\\{\\partial_t f(t, \\cdot) : t \\in [a,b]\\}$ is uniformly integrable with respect to $\\mu$,\nAssumption 5: $f$ and $\\partial_t f$ are jointly measurable.\nProblem: \nProve that $F(t) = \\int_X f(t,x)\\, \\mu(dx)$ is differentiable on $(a,b)$ and $F'(t) = \\int_X \\partial_t f(t,x) \\,\\mu(dx)$.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$M := \\sup_{t \\in [a,b]} \\int |\\partial_t f(t,x)|\\,\\mu(dx) < \\infty.$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: For each $x \\in X$, $f(\\cdot, x) \\in C^1([a,b])$,\nAssumption 2: For each $t \\in [a,b]$, $f(t, \\cdot) \\in L^1(\\mu)$,\nAssumption 3: For each $t \\in [a,b]$, $\\partial_t f(t, \\cdot) \\in L^1(\\mu)$,\nAssumption 4: The family $\\{\\partial_t f(t, \\cdot) : t \\in [a,b]\\}$ is uniformly integrable with respect to $\\mu$,\nAssumption 5: $f$ and $\\partial_t f$ are jointly measurable.\nAssumption 6: $$M := \\sup_{t \\in [a,b]} \\int |\\partial_t f(t,x)|\\,\\mu(dx) < \\infty.$$\nProblem: \nProve that $F(t) = \\int_X f(t,x)\\, \\mu(dx)$ is differentiable on $(a,b)$ and $F'(t) = \\int_X \\partial_t f(t,x) \\,\\mu(dx)$."
}