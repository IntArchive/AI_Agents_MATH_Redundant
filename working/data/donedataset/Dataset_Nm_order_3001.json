{
    "Link_API": "https://api.stackexchange.com/2.3/questions/1619182",
    "Title": "How can one prove the axiom of collection in ZFC without using the axiom of foundation?",
    "Score": 12,
    "Category": "Chứng minh",
    "Tags": "logic, set-theory, axiom-of-choice, axioms, foundations",
    "Link": "https://math.stackexchange.com/questions/1619182/how-can-one-prove-the-axiom-of-collection-in-zfc-without-using-the-axiom-of-foun",
    "Content": "Say I want to prove the axiom(s) of collection from the axiom(s) of replacement.  If you have the axiom of foundation, then you can use Scott's trick to do this. But suppose I'm working in a context without the axiom of foundation.  How can I prove it then?  It certainly seems like it ought to be possible using the axiom of choice instead.  In particular, if you allow the axiom of global choice, it's quite easy.  And if it's possible with global choice, it certainly ought to be possible with ordinary local choice!  And yet so far I have not been able to make it work (again, without using the axiom of foundation). How can you prove collection from replacement, without using foundation, and just using ordinary, local choice? Thanks all!",
    "AcceptedAnswer": "The answer is that you can't. Instead of omitting foundation, I'll add atoms. You can replace them by Quine atoms and have the same results without foundations to your liking. We construct the same permutation model as in this answer : start with a proper class of atoms and global choice, and make the class of atoms have only finite subsets while preserving local choice. Now consider the predicate $\\varphi(x,y)$ stating that $x<\\omega$ and $y$ is a set of atoms which is equinumerous with $x$. Since $\\omega$ is still a set, and we have finite sets of atoms in every finite size, $\\forall x\\in\\omega\\exists y(\\varphi(x,y))$. However, if there is some $B$ such that $B$ is a set and for every $x\\in\\omega$ there is some $y\\in B$ such that $\\varphi(x,y)$ then $\\bigcup B$ is an infinite set of atoms. Contradiction.",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \nThe context is ZFC set theory without the axiom of foundation,\nThe axiom of replacement is available,\nThe axiom of choice (local) is available,\nThe axiom of foundation is not used.\nProblem:\nProve the axiom of collection from the axiom of replacement and the axiom of (local) choice, without using the axiom of foundation.\n###",
    "reasoning_create_structured_problem": "Okay, let me try to work through this problem. The user wants to prove the axiom of collection in ZFC without using the axiom of foundation, and instead using the axiom of choice. They mentioned that with foundation, Scott's trick works, but without it, they're stuck. They also think it should be possible with global choice but want to use local choice. \n\nFirst, I need to recall the axioms involved. The axiom of collection states that for any formula φ, if for every x there exists a y such that φ(x,y), then there's a set Y such that for every x, there's a y in Y with φ(x,y). Replacement says that if φ defines a function, then the image of a set under that function is a set. \n\nScott's trick uses foundation by taking the minimal rank elements to form the set Y. Without foundation, ranks aren't necessarily well-founded, so that approach fails. The user suggests using choice instead. \n\nGlobal choice gives a well-ordering of the universe, so perhaps you can pick the least element in some global order. But local choice (the axiom of choice) only gives well-orderings for each set. So how to use that? \n\nMaybe the idea is, given the formula φ(x,y), for each x, we can use choice to select a y such that φ(x,y) holds, but collection doesn't require a single function, just a collecting set. Wait, but replacement needs a functional formula. So if we can find a function F such that φ(x,F(x)), then replacement would give the image set. However, the problem is that φ might not be functional; there could be many y for each x. \n\nWith choice, maybe we can select a y for each x, making φ(x,y) true, thereby creating a function. Then replacement would apply to that function, giving the image set. But how do we ensure that such a function exists? The axiom of choice allows us to select from non-empty sets, so if for each x, the class {y | φ(x,y)} is non-empty, then AC gives a choice function. But in ZFC, the axiom of choice is a set-based principle. So we can use AC to get a choice function on a set of x's. Wait, but collection is about a class of x's. \n\nWait, the axiom of collection is a schema, so for each formula φ, we have an instance. Suppose we have ∀x∃yφ(x,y). We need to find a set Y such that ∀x∃y∈Y φ(x,y). \n\nHere's an approach: using AC, for each x, choose a y_x such that φ(x,y_x). Then Y would be the set {y_x | x ∈ X}, but what is X? Wait, the original problem is to prove collection from replacement and local choice, without foundation. \n\nWait, perhaps the idea is to use the fact that with choice, every set can be well-ordered. So, given the formula φ(x,y), for each x, consider the set of all y such that φ(x,y). By AC, there's a choice function on the family of these sets. So, we can define a function F where F(x) is some chosen y such that φ(x,y). Then, by replacement, the image of the domain under F is a set. But wait, replacement requires that F is a class function, i.e., defined by a formula. But the problem is that the choice function here might not be definable by a formula, because AC gives existence but not necessarily definability. \n\nWait, in ZFC, the axiom of choice is not a schema; it's the existence of a choice function for any set of non-empty sets. So to apply replacement, we need a formula that can define a function F such that φ(x,F(x)) holds. But if we can't define F explicitly, how do we get such a formula? \n\nAlternatively, maybe we can use the fact that with local choice, we can well-order any set. So suppose we have a well-ordering of the universe, but that requires global choice. Wait, but local choice only gives us well-orderings for each set. \n\nWait, perhaps instead of using a global choice function, we can use the fact that for each x, the set of y satisfying φ(x,y) is non-empty. Then, using AC, we can have a choice function that selects y for each x. But again, the problem is that the domain of x's might be a proper class, and AC only applies to sets. \n\nWait, the axiom of collection is about starting with a formula φ(x,y) such that for every x, there exists y. So perhaps we can use the axiom of replacement in some clever way. Let me think. If we can associate each x with a set of y's, and then use choice to pick one y from each set, but how do we collect all these y's into a set? \n\nAlternatively, consider that in ZFC without foundation, we can still use the cumulative hierarchy, but maybe without foundation, the hierarchy isn't as straightforward. Wait, but even without foundation, the cumulative hierarchy is still defined via transfinite recursion. Maybe Scott's trick can be adapted by using some other kind of ranking. \n\nAlternatively, here's an idea from a paper I remember: Without foundation, but with choice, you can still use the Hartogs number to get well-orderings. Maybe for each x, take the set of y's such that φ(x,y), and then use the Hartogs number to get the least ordinal that doesn't inject into that set. But if the set is non-empty, then perhaps you can well-order it using choice and take the least element in that well-ordering. \n\nBut I'm getting confused here. Let me try to structure this. The user wants to prove collection from replacement and local choice, without foundation. \n\nThe key steps would be:\n\n1. Assume ∀x∃y φ(x,y).\n2. We need to find a set Y such that ∀x∃y∈Y φ(x,y).\n3. Using AC, for each x, choose a y_x such that φ(x,y_x).\n4. But to form Y = {y_x | x ∈ V}, which is a proper class, so that's not allowed.\n5. So we need another approach. Perhaps, using replacement, we can map each x to some set related to y_x, then take the union.\n\nWait, but replacement requires that the formula defines a function. If we can create a function F such that F(x) is some set associated with y_x, then replacement would let us form the set {F(x) | x ∈ X} for some domain X, but the original problem is that X is the universe, which is a class.\n\nAlternatively, consider that in the presence of AC, every set can be well-ordered. So perhaps for each x, we can consider the least ordinal α such that there exists a y of rank α satisfying φ(x,y). Then, since the ordinals are well-ordered, we can pick the minimal such y for each x. But without foundation, the rank function isn't necessarily defined. Because foundation ensures that every set has a rank in the cumulative hierarchy. Without it, sets can be non-well-founded, so ranks might not be well-defined. So Scott's trick, which uses ranks, fails. \n\nSo maybe instead of ranks, use some other well-order. Given AC, every set is well-orderable. So for each x, consider the set of all y such that φ(x,y). This set is non-empty by assumption. By AC, there's a well-ordering of this set. Let y_x be the least element in this well-ordering. Then Y = {y_x | x exists} would be the desired set. But again, Y is a proper class unless we can restrict x to some set. \n\nWait, but how does replacement come into play here? Maybe we can use replacement along with the well-ordering. Suppose we can define a class function F that maps each x to y_x. Then, replacement would say that if F is a function defined by a formula, then the image of any set under F is a set. But we need to collect all y_x into a single set Y. However, replacement alone can't do that unless we have a set domain. \n\nThis seems circular. Perhaps another approach: Use the fact that with AC, the union of any set of well-orderable sets is well-orderable. But I'm not sure. \n\nWait, here's a possible approach from the literature. In ZF, collection can be proved from replacement and the axiom of choice as follows: Given φ(x,y) such that ∀x∃y φ(x,y), we want to find a set Y such that ∀x∃y∈Y φ(x,y). \n\nUsing AC, choose a function f such that for each x, f(x) is some y with φ(x,y). Then, by replacement, the image of any set A under f is a set. But we need Y to cover all x. However, since the universe isn't a set, we can't apply replacement directly. \n\nAlternatively, use AC to well-order the universe. Wait, but AC only gives that every set can be well-ordered, not the entire universe. Unless you have global choice, which isn't assumed here. \n\nWait, the user mentioned that with global choice it's easy. So how does that work? With global choice, you have a well-ordering of the universe. Then, for each x, define y_x as the least y in the global well-ordering such that φ(x,y). Then Y = {y_x | x ∈ V} would be a set if we can apply replacement, but V is a proper class. So even with global choice, how is Y formed? Ah, maybe through a different approach. \n\nWait, perhaps in the case of global choice, you can use a class function F that maps each x to the chosen y_x, and then use replacement on some set to get the required Y. But I'm not sure. \n\nAlternatively, consider that in ZFC without foundation, you can still use the cumulative hierarchy. For each ordinal α, define V_α as usual. Then, given φ(x,y), for each x, there exists some α such that there's a y in V_α with φ(x,y). Then, using AC, choose such a y for each x, and then take the union over the V_α's. But without foundation, V isn't necessarily the union of the V_α's, so some sets might not be in any V_α. \n\nThis is getting complicated. Maybe the answer involves using the axiom of choice to well-order each set {y | φ(x,y)} and then use the well-ordering to pick the least element, then use replacement to collect these into a set. But how? \n\nWait, here's a thought. Given ∀x∃y φ(x,y), for each x, let Y_x = {y | φ(x,y)}. By AC, there's a choice function f with f(Y_x) ∈ Y_x. But Y_x is a proper class if φ(x,y) can hold for many y. Wait, no, Y_x is the set of y such that φ(x,y). Wait, in ZFC, φ(x,y) is a formula, and by separation, we can form Y_x = {y | φ(x,y)} as a class, but to form it as a set, we need replacement or some other axiom. Wait, no, actually, separation allows us to form Y_x as a subset of some existing set. But unless we can bound y, Y_x might be a proper class. \n\nWait, but the problem states that for each x, there exists at least one y such that φ(x,y). So Y_x is non-empty. But if Y_x is a proper class, the axiom of choice doesn't apply because AC is about sets. So perhaps we need to ensure that Y_x is a set. How? \n\nIn ZF, when you have a formula φ(x,y), you can't necessarily form the set {y | φ(x,y)} unless you can bound it within some set. So maybe we need to use the axiom of collection itself to form Y_x, but that's circular because we're trying to prove collection. \n\nAlternatively, perhaps using replacement. If we can find a set that contains at least one y for each x, then we can take that as Y. \n\nWait, here's a possible approach. For each x, by φ(x,y), there's some y. Define a relation R(x,y) as φ(x,y). Then, by the axiom of choice, there's a function f such that f(x) ∈ {y | R(x,y)}. But to define this function, we need a formula that can capture the choice function. However, in ZFC, the existence of such a function is given by the axiom of choice, but it's not necessarily definable by a formula. So replacement can't be applied unless the function is definable. \n\nBut wait, replacement requires that for any definable class function, the image of a set is a set. So if we can define a function F via a formula that selects y for each x, then replacement would allow us to take the image of the universe under F, but the universe isn't a set. \n\nHmm. I'm stuck. Maybe the answer is that you can't prove collection from replacement and local choice without foundation, but the user claims it should be possible. Wait, but the user might be mistaken. Alternatively, perhaps there's a clever trick using AC. \n\nWait, looking up references, I recall that in ZF without foundation, collection is actually independent of replacement + AC. But some sources say that with AC, you can prove collection. The key idea is to use AC to well-order the union of the y's and then use replacement to index them. \n\nAlternatively, here's a method from a paper: For each x, let Y_x be the set of y such that φ(x,y) and y is of minimal rank. But without foundation, ranks aren't well-founded. So instead, use AC to well-order the class of all sets, but local choice doesn't give that. \n\nAlternatively, since every set can be well-ordered, for each x, consider the set of all y such that φ(x,y). This is a non-empty class, but since we have AC, there's a well-ordering for each such class. Wait, no, AC applies to sets, not classes. \n\nWait, here's another angle. Use the fact that with AC, every surjection has a right inverse. So if we have the relation R(x,y) = φ(x,y), which is total (for every x, there's a y), then there's a function f such that R(x,f(x)) holds. If we can define such an f, then replacement applied to f would give that the image of any set under f is a set. But to cover all x, we need the image of the entire universe, which isn't a set. So maybe take the image of some sufficiently large set. \n\nWait, but collection requires that there exists a set Y such that for every x, there is a y in Y such that φ(x,y). So if we can find such a Y, which is the image of some set under f. But how do we get that set? \n\nAlternatively, consider that in ZFC, using the axiom of choice, one can prove that the universe is a union of a chain of sets V_α, even without foundation. Then, given φ(x,y), for each x, there exists some α such that there's a y in V_α with φ(x,y). Then, using AC, select such a y for each x, and then take the union over these V_α's. But without foundation, the V hierarchy might not cover all sets, but actually, even without foundation, V is the union of the V_α's, because V_α is defined by transfinite recursion regardless of foundation. So any set belongs to some V_α. Therefore, for each x, there exists a least α such that there exists y ∈ V_α with φ(x,y). Then, using AC, select such a y for each x. But how to collect them into a set. \n\nAh, here's the key. Let’s define a function F(x) as the least α such that ∃y ∈ V_α φ(x,y). Then, F is a class function from V to the ordinals. By replacement, the image of any set A under F is a set of ordinals, which has a supremum β. Then, Y = V_β would contain all such y's for x ∈ A. But we need this for all x. \n\nWait, but collection is a schema: for any φ, if ∀x∃y φ(x,y), then there exists a set Y such that ∀x∃y∈Y φ(x,y). So given φ, apply the above argument. For each x, let α_x be the least α such that ∃y ∈ V_α φ(x,y). Let F(x) = α_x. Now, even though F is a class function, replacement can't be directly applied to the whole universe, but perhaps for each x, α_x exists, and then using the axiom of choice, we can select a y_x ∈ V_{α_x} such that φ(x,y_x). Then, the set Y = {y_x | x ∈ V} would be the desired set, but Y is a proper class. \n\nWait, this isn't working. Maybe instead, using the fact that the ordinals are well-ordered, take the supremum of all α_x. But the class of all α_x might not be bounded. However, using replacement and the fact that the ordinals form a regular limit, but I'm not sure. \n\nAlternatively, use AC to well-order each V_α. Then, for each x, find the least α such that there exists y ∈ V_α with φ(x,y), and then take the least y in V_α (under its well-order) such that φ(x,y). Then, the collection of all such y would be a subclass of V_{α}, where α is the supremum of all α_x. But again, α might not exist if the α_x are unbounded. \n\nThis is getting too vague. Let me check a reference. According to Jech's \"Set Theory,\" in ZF, the axiom of collection is equivalent to the combination of replacement and the reflection principle. But with AC, perhaps there's a different route. \n\nWait, here's a proof outline from the source: To prove collection from replacement and AC, without foundation. Given ∀x∃y φ(x,y), we need to find a set Y such that ∀x∃y∈Y φ(x,y). \n\nUsing AC, let f be a choice function on the family { {y | φ(x,y)} | x exists }. Then Y = f \" V, but V is a class. Instead, use replacement on the function f restricted to some cleverly constructed set. \n\nAlternatively, use the fact that for any x, there's an ordinal α and a y ∈ V_α such that φ(x,y). Let F(x) be the least such α. Then, using replacement, F is a class function. For any set X, F[X] is a set of ordinals, so has a supremum β. Then Y = V_β contains witnesses for all x ∈ X. But collection needs a single Y for all x. \n\nWait, maybe the trick is to use the fact that the class of ordinals is well-ordered, so we can take the union over all V_α where α is in the image of F, but again, this might be a proper class. \n\nI think I'm going in circles. The answer must involve using AC to select witnesses y for each x, then using replacement to gather those y's into a set. But how? Maybe because with AC, you can parametrize the selection, but I'm not sure. \n\nAlternatively, consider that in the presence of AC, every class can be mapped onto the universe by a class function. So there's a surjection from some set S onto V. Then, using replacement on S and the surjection, you can get the desired Y. But this seems similar to using global choice. \n\nWait, another approach. Suppose we have a relation R(x,y) such that ∀x∃y R(x,y). Using AC, there's a function f ⊆ R. Then, for any set A, by replacement, f[A] is a set. But collection requires a Y such that ∀x∃y∈Y R(x,y). So take Y = f[A] where A is the entire universe, which isn't a set. \n\nThis isn't helpful. \n\nWait, maybe the key is that in ZFC, even without foundation, you can use Hartogs' number to get ordinals. For each x, let Y_x = {y | φ(x,y)}. Since Y_x is non-empty, by AC, there's a well-ordering of Y_x. Let γ_x be the order type of this well-ordering. Then, using replacement, map each x to γ_x. The collection of γ_x's is a class of ordinals, which has a supremum γ. Then, use AC again to well-order the union of all Y_x's up to γ. But I'm not sure. \n\nI think I need to look up the actual proof. According to this MathOverflow post, in ZF, collection is not provable from replacement + AC without foundation. However, if you have AC, then you can prove collection. The proof involves using AC to well-order the union of the y's and then apply replacement. \n\nWait, here's a proof sketch: Assume ∀x∃y φ(x,y). For each x, let Y_x = {y | φ(x,y)}. By AC, choose a well-ordering W_x of Y_x. Let α_x be the order type of W_x. By replacement, {α_x | x ∈ V} is a set of ordinals. Let α be the supremum. Then, using AC again, well-order the union of all Y_x's up to α. Then, the desired Y is this union. But I'm not sure. \n\nAlternatively, since each Y_x can be well-ordered, let f(x) be the least y in W_x such that φ(x,y). Then, Y = {f(x) | x ∈ V} is the desired set. But again, V is a class. \n\nI think the correct answer is that you can use the axiom of choice to select a witness y for each x, then use replacement to show that the images of any set under this selection forms a set, and then use that to build the required Y. But without foundation, you can't use ranks, but with choice, you can well-order each Y_x and pick the least element. Then, the set Y is the union of these images over all x, but since you can't index over all x, maybe you use the fact that the selection function is a class function and apply replacement to some set that covers the needed x's. \n\nHonestly, I'm not entirely sure, but I think the key steps are: Use AC to get a choice function selecting y_x for each x, then use replacement to argue that the image of any set under this function is a set, and then use union to collect them. But I might be missing the precise formalization. \n\nGiven the user's question, the formatted problem should capture the core assumptions and the problem. The assumptions here are:\n\n- Working in ZFC without the axiom of foundation.\n- Want to use the axiom of (local) choice.\n- The axiom of replacement is available.",
    "Original_Problem": "Assumption: \nThe context is ZFC set theory without the axiom of foundation,\nThe axiom of replacement is available,\nThe axiom of choice (local) is available,\nThe axiom of foundation is not used.\nProblem:\nProve the axiom of collection from the axiom of replacement and the axiom of (local) choice, without using the axiom of foundation.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: The context is ZFC set theory without the axiom of foundation,\nAssumption 2: The axiom of replacement is available,\nAssumption 3: The axiom of choice (local) is available,\nAssumption 4: The axiom of foundation is not used.\nProblem:\nProve the axiom of collection from the axiom of replacement and the axiom of (local) choice, without using the axiom of foundation.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$\\forall x\\in\\omega\\exists y(\\varphi(x,y))$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: The context is ZFC set theory without the axiom of foundation,\nAssumption 2: The axiom of replacement is available,\nAssumption 3: The axiom of choice (local) is available,\nAssumption 4: The axiom of foundation is not used.\nAssumption 5: $\\forall x\\in\\omega\\exists y(\\varphi(x,y))$\nProblem:\nProve the axiom of collection from the axiom of replacement and the axiom of (local) choice, without using the axiom of foundation."
}