{
    "Link_API": "https://api.stackexchange.com/2.3/questions/269248",
    "Title": "Exact power of $p$ that divides the discriminant of an algebraic number field",
    "Score": 12,
    "Category": "Chứng minh",
    "Tags": "algebraic-number-theory",
    "Link": "https://math.stackexchange.com/questions/269248/exact-power-of-p-that-divides-the-discriminant-of-an-algebraic-number-field",
    "Content": "I am doing Marcus problem 21 (b) of chapter 3. The setup for this problem is given in problem 20: Setup: Let $L/K$ be a finite extension of algebraic number fields. Write $R = \\mathcal{O}_K$ and $S = \\mathcal{O}_L$. Fix a prime $P$ of $R$ and let $Q_1,\\ldots,Q_r$ be the distinct primes of $S$ that live above $P$. For each $Q_i$ fix a subset $B_i \\subset S$ corresponding to a basis for $S/Q_i$ over $R/P$. For each $i=1,\\ldots,r$ and each $j = 1,\\ldots,e_i$ fix an element $$\\alpha_{ij} \\in (Q_i^{j-1} - Q_i^j) \\cap \\left( \\cap_{h \\neq i} Q_h^{e_h}  \\right). $$\n    Such an element exists because firstly unique factorisation guarantees that for each $i,j$ we can choose an $x_{ij} \\in Q_i^{j-1} - Q_i^j$. We then know that the following system of equations has a solution by the Chinese Remainder Theorem:\n    $$ \\begin{eqnarray*} x &\\equiv& \\alpha_{ij} \\pmod{Q_i^j} \\\\\nx &\\equiv& 0 \\pmod{Q_h^{e_h}} \\hspace{2mm} (\\text{as $h$ runs through all indices not equal to $i$}) \\end{eqnarray*}$$\n    We can now set $x_{ij}$ to be equal to a solution of this system.  Now consider the $n = \\sum_{i=1}^r e_if_i$ elements $\\alpha_{ij}\\beta_{il}$, where $\\beta_{il} \\in B_i$, $1 \\leq i\\leq r$,$1 \\leq j \\leq e_i$ and $1 \\leq l\\leq f_i$. I have proven that these $n$ elements are independent mod $P$, that is to say that their images in $S/PS$ are linearly independent over $R/P$. Problem 21(b): Call the $n$ elements $\\alpha_{ij}\\beta_i$ as constructed above $\\alpha_1,\\ldots,\\alpha_n$ with now $K = \\Bbb{Q}$. Except we replace $Q_h^{e_h}$ by $Q_h^N$ where $N$ is some large number to be decided later. How do I show that \n$$p^k | \\textrm{disc}(\\alpha_1,\\ldots,\\alpha_n)$$\nwhere $k = \\sum_{i=1}^r (e_i - 1)f_i$ ? I have been stuck on this problem for some days now and I can't seem to make any progress on it. What confuses me is what does he mean by $N$ is some large number to be decided later? Any help is appreciated, but please do not post complete solutions. Thanks. Edit:* User Sanchez has asked for a definition of the $\\beta_{il}$ which I will now define: Recall that for each prime ideal $Q_i$ lying over a prime $p \\in \\Bbb{Z}$, we have that $S/Q_i$ is an $f_i$ dimensional vector space over $\\Bbb{Z}/p\\Bbb{Z}$. Let $B_i$ be a subset of $S$ consisting of $f_i$ elements such that the image of each element of $B_i$ under the canonical homomorphism $\\pi : S \\to S/Q_i$ is a basis element of $S/Q_i$. Then our $\\beta_{i1},\\ldots, \\beta_{if_i}$ are defined to be the $f_i$ elements in $B_i$.",
    "AcceptedAnswer": "Let us work with a fixed Galois closure $M$ of $L/K$, because then discriminant can be calculated via elements of $Gal(M/K)$. The key would be to calculate the valuations of the discriminant in terms of $R_{it}$, a generic prime lying over $p$. The answer will show why a large $N$ is important, although I will not find the optimal value of $N$. Some terminologies $\\sigma_1,\\cdots,\\sigma_n$ are the $K$-embeddings of $L$ into $M$. They can be extended to elements of $Gal(M/K)$, up to an element of $Gal(M/L)$. We will denote the extension also by $\\sigma_i$ should there be no confusion. $R_{it}$ are primes of $M$ lying above $Q_i$ in $L$, where $1 \\leq i \\leq r$. For convenience I will not list the range of $t$. $e_i,f_i$ are the ramification index/residue field degree for $Q_i/p$. $e,f$ are the ramification index/residue field degree for $R_{it}/p$. The values are the same for any $i,t$ since $M/K$ is Galois. It then follows that $e/e_i, f/f_i$ is the ramification index/residue field degree for $R_{it}/Q_i$. $A = (\\sigma_i(\\alpha_j))$. The discriminant $disc_{L/K}(\\alpha_1,\\cdots,\\alpha_n) = (det A)^2$. $B = (v_{R_{11}} (\\sigma_i(\\alpha_j)))$, where $v_{R_{11}}$ is the valuation for $R_{11}$ in $M$. By definition, we have that $v_{Q_i} (\\alpha_{ij}) = j-1$, so for any $t$,\n$$v_{R_{it}} (\\alpha_{ij}) = \\frac{e}{e_i} (j-1)$$\nand for $k \\neq i$, $v_{Q_k} (\\alpha_{ij}) \\ge N$ so for any $t$,\n$$v_{R_{kt}} (\\alpha_{ij}) \\ge \\frac{e}{e_i}N \\ge N \\hspace{5mm}(*)$$ This gives\n$$v_{R_{it}}(\\alpha_{ij} \\beta_{il}) = \\frac{e}{e_i}(j-1)$$\nand for $k \\neq i$,\n$$v_{R_{kt}} (\\alpha_{ij} \\beta_{il}) \\ge \\frac{e}{e_i}N \\ge N \\hspace{5mm} (**)$$ Here RHS of double star just follows by RHS of (*), and the precise value is not important as long as we know it’s large. Now look at the matrix $A = (\\sigma_i (\\alpha_j))$ - we try to look at the valuations of the discriminant. Without loss of generality let's work with $R_{11}$. Arrange the embeddings and the $\\alpha$ as follows. For the embeddings, it can be extended to an element of $Gal(M/K)$, and any such extension is off by an element of $Gal(M/L)$. List first those embeddings whose extension sends $R_{1t}$ to $R_{11}$ for some $t$ (note that this property is independent of the extension you choose), and the first element being the inclusion of $L$ into $M$. Then we list those that sends $R_{2t}$ to $R_{11}$ for some $t$ and so on. For the elements, list $\\alpha_{1j}\\beta_{1l}$ first, in the order you want. Then those of the form $\\alpha_{2j}\\beta_{2l}$, and so forth. We wish to calculate $v_{R_{11}} (det A)$. Consider the matrix $B$ where each element is replaced by its value under $v_{Q_1}$, for this is good enough if all we care is to get a lower bound for $v_{R_{11}}(det A)$. Look at the first diagonal block, i.e. the upper left block, of which on the embedding side it contains those whose extension sends $R_{1t}$ to $R_{11}$ for some $t$, and on the element side things are of the form $\\alpha_{1j}\\beta_{1l}$. Using the display equations above, it’s clear that modulo some rearrangement, the first row of the block (remember that the first automorphism listed is the inclusion) is \n$$\\begin{bmatrix}\\frac{e}{e_1}(1-1) & \\cdots & \\frac{e}{e_1}(1-1) & \\cdots & \\frac{e}{e_1}(e_1-1)\\end{bmatrix} = \\begin{bmatrix}0 & \\cdots & 0 & \\cdots &\\frac{e}{e_1}(e_1 - 1)\\end{bmatrix}$$\nwhere each number appears $f_1$ times. The other rows are exactly the same by looking at the display equations way above. Now look at the $(1,2)$-block, the one immediately to the right of the first diagonal block. On the embedding side it contains those whose extension that sends $R_{2t}$ to $R_{11}$ for some $t$, and on the element side it has $\\alpha_{1j}\\beta_{1l}$. Let $\\sigma(R_{2t}) = R_{11}$. (For simplicity, we will denote an extension of an embedding $\\sigma$ by $\\sigma$ too) Then \n$$v_{R_{11}} (\\sigma(x)) = v_{\\sigma^{-1}(R_{11})} (x) = v_{R_{2t}}(x)$$\nfor any $x$. In particular it means that for a typical element in this block, we are looking at $v_{R_{2t}} (\\alpha_{1j}\\beta_{1l})$, where we know is large by (**). Try to convince yourself that each other diagonal/off-diagonal block behaves similarly as the first diagonal/$(1,2)$-block. This means that if you only focus on valuations, AND IF THE LOWER BOUND YOU HAVE FROM (**) IS LARGE ENOUGH, then $B$ looks something like (for simplicity I will use $L$ to mean a generic large number) $$\\begin{bmatrix}\n0 & \\cdots & 0 & \\cdots & \\frac{e}{e_1}(e_1 -1) & L & \\cdots & L & \\cdots & L & \\cdots \\\\\n\\cdots & \\cdots & \\cdots & \\cdots & \\cdots & L & \\cdots & L & \\cdots & L & \\cdots\\\\\n0 & \\cdots & 0 & \\cdots & \\frac{e}{e_1}(e_1 -1) & L & \\cdots & L & \\cdots & L & \\cdots \\\\\nL & \\cdots & L & \\cdots & L & * & * & * & \\cdots & L & \\cdots \\\\\n\\cdots & \\cdots & \\cdots & \\cdots & \\cdots & \\cdots & \\cdots &\\cdots & \\cdots & \\cdots & \\cdots \\\\\n\\end{bmatrix}$$ So you can see that in the first batch of columns of $A$, you can pull out a factor of\n$$ R_{11}^{\\frac{e}{e_1}f_1 ( 1 + \\cdots + e_1-1)} = R_{11}^{ef_1(e_1-1)/2}$$ \nDoing the same for the next batch of columns and so forth, we see that in the original matrix $A$, one can pull out a factor of \n$$R_{11}^{e\\sum_{i=1}^r f_i(e_i-1)/2}$$ Now \n$$v_{R_{11}} (disc (\\alpha_1,\\cdots,\\alpha_n)) = 2 v_{R_{11}} (A) \\ge e \\sum_{i=1}^r f_i(e_i-1)$$\nTherefore \n$$v_p (disc (\\alpha_1,\\cdots,\\alpha_n)) = \\frac{1}{e}v_{R_{11}} (disc (\\alpha_1,\\cdots,\\alpha_n)) \\ge \\sum_i f_i (e_i -1)$$",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \n$L/\\mathbb{Q}$ is a finite extension of algebraic number fields,\n$S = \\mathcal{O}_L$ is the ring of integers of $L$,\n$p$ is a prime in $\\mathbb{Z}$,\n$Q_1, \\ldots, Q_r$ are distinct primes of $S$ lying above $p$,\nFor each $Q_i$, $e_i$ is the ramification index of $Q_i$ over $p$,\nFor each $Q_i$, $f_i$ is the inertial degree of $Q_i$ over $p$,\nFor each $Q_i$, $B_i$ is a basis for $S/Q_i$ over $\\mathbb{Z}/p\\mathbb{Z}$,\nFor each $i$ and $j$ ($1 \\leq j \\leq e_i$), $\\alpha_{ij} \\in Q_i^{j-1} \\setminus Q_i^j$,\nFor each $i$ and $j$, $\\alpha_{ij} \\in \\bigcap_{h \\neq i} Q_h^N$ where $N$ is a sufficiently large integer,\nThe elements $\\alpha_1, \\ldots, \\alpha_n$ are constructed as $\\alpha_{ij}\\beta_{il}$ with $\\beta_{il} \\in B_i$.\nProblem: \nShow that $$p^k \\mid \\mathrm{disc}(\\alpha_1, \\ldots, \\alpha_n)$$ where $k = \\sum_{i=1}^r (e_i - 1)f_i$.\n###",
    "reasoning_create_structured_problem": "Okay, let me try to parse this problem step by step. The user is working on Marcus problem 21(b) from chapter 3, and they need to show that the discriminant of certain elements α₁,…,αₙ is divisible by pᵏ where k is the sum over (e_i -1)f_i. \n\nFirst, let's recall the setup from problem 20. They have a finite extension L/K of algebraic number fields, with R being the ring of integers of K and S of L. They fix a prime P in R and consider the primes Q₁,…,Q_r in S lying above P. For each Q_i, they have a basis B_i for S/Q_i over R/P. Then, for each Q_i and j from 1 to e_i (the ramification index), they choose elements α_{ij} in Q_i^{j-1} minus Q_i^j, and also in the intersection of all other Q_h^{e_h}. These α_{ij} exist by unique factorization and the Chinese Remainder Theorem. Then, combining these α's with the β's from the bases B_i, they form n = sum e_i f_i elements, which are independent mod P.\n\nNow, problem 21(b) changes the setup: K is now ℚ, so R is ℤ, and P is a prime p in ℤ. Instead of using Q_h^{e_h}, they use Q_h^N where N is a large number to be decided later. The task is to show that pᵏ divides the discriminant of these α₁,…,αₙ, where k is sum (e_i -1)f_i.\n\nThe user is confused about the role of N here. Let me try to see. In the original setup, α_{ij} was chosen to be in the intersection of Q_h^{e_h} for h ≠ i. Now, replacing e_h with N, which is \"large\". Maybe N is taken large enough so that Q_h^N is contained in p^m S for some m, but since p is in Q_h^{e_h}, maybe N needs to be at least e_h? Wait, but if N is large, perhaps it's to ensure that when we take elements in Q_h^N, their contributions to the discriminant are multiples of high powers of p, hence when calculating the discriminant modulo p^k, these terms can be neglected? Hmm.\n\nThe discriminant of a basis is the square of the determinant of the trace matrix. So, disc(α₁,…,αₙ) = det(Tr(α_i α_j))^2. To show that p^k divides this discriminant, we need to show that each entry of the trace matrix is divisible by p, raised to some power. But maybe more precise: each trace Tr(α_i α_j) should be divisible by p, and the total determinant would then have divisibility by p^k.\n\nBut how does changing Q_h^{e_h} to Q_h^N affect this? If N is large, then the α_{ij} are in Q_h^N for h ≠ i. So when we take products α_i α_j, if they lie in different primes Q_h, their product would lie in Q_h^{N} Q_i^{something}... Wait, maybe the key is that when you take traces, the trace of an element in Q_h^N would be divisible by a higher power of p. Since trace maps elements of S to ℤ, and if an element is in Q_h^N, then its trace should be in p^m for some m. If N is large enough, maybe m is large enough that when multiplied across the matrix entries, the determinant has the required divisibility.\n\nBut how exactly does the exponent k = sum (e_i -1)f_i come into play? Each prime Q_i has ramification index e_i and inertial degree f_i. The sum (e_i -1)f_i suggests that for each Q_i, we're contributing (e_i -1) times its inertial degree. Since the discriminant's exponent is related to the ramification indices and inertial degrees, this formula might come from the contribution of each prime above p to the discriminant.\n\nIn the original problem 21(b), by replacing Q_h^{e_h} with Q_h^N, maybe the idea is to make sure that the elements α_{ij} are congruent to 0 modulo higher powers of the other primes, which might simplify the trace calculations. If N is sufficiently large, then the elements α_{ij} are in Q_h^N for all h ≠ i, which would mean their traces would be divisible by higher powers of p. But how does this interact with the discriminant?\n\nAlternatively, maybe when constructing the basis, the discriminant's p-adic valuation is determined by the exponents in the different ideal. The different ideal's exponent is related to the ramification indices, so perhaps the exponent k here is coming from the different. But I need to recall that the discriminant is the norm of the different ideal times the square of the discriminant of the field. Wait, no, the discriminant of the field is the norm of the different. Hmm.\n\nAlternatively, the discriminant of the basis elements α_i would be a product of local discriminants at each prime above p. For each prime Q_i, the local contribution might be p^{(e_i -1)f_i}, and since there are r primes, the total exponent would be sum (e_i -1)f_i. But how does the choice of α_{ij} and the large N play into this?\n\nThe key might be that each α_{ij} is in Q_i^{j-1} but not in Q_i^j, and also in Q_h^N for h ≠ i. Since N is large, when we take traces of products α_i α_j, if they lie in different primes, their product would lie in Q_h^N Q_i^{j-1} Q_i^{j'-1} etc., but since N is large, maybe these terms contribute higher powers of p in the trace, making the trace entries divisible by higher powers of p. However, the exact calculation would require looking at the valuation of each trace entry.\n\nAlternatively, maybe the discriminant is being calculated modulo p^k, and by choosing N large enough, the cross terms (involving different primes) become negligible, leaving only the contributions from each Q_i. Then, for each Q_i, the discriminant contribution would be related to e_i and f_i, leading to the exponent (e_i -1)f_i per prime, and summing over i.\n\nThe user also mentioned that in their setup, the elements α_{ij}β_{il} are independent mod P, which they have already proven. So perhaps the discriminant's divisibility by p^k is a refinement of this independence, taking into account higher powers of p.\n\nAnother angle: The discriminant of the basis is related to the discriminant ideal of S over R. The discriminant ideal is generated by the discriminants of all bases of S over R. Since they have a specific basis, its discriminant should generate the discriminant ideal, which would include p^k. But the discriminant ideal's exponent at p is given by the formula involving the ramification indices and inertial degrees. In particular, for a prime p in ℤ, the exponent in the discriminant is given by the sum over all primes Q_i above p of (e_i -1)f_i. So, if that's the case, then the discriminant should indeed be divisible by p^k where k is this sum. Therefore, the problem is essentially asking to show that the discriminant of the given basis has at least this exponent, which matches the general formula.\n\nBut how does the construction of the α_{ij} with large N help in proving this? Maybe by ensuring that the basis elements are \"nice\" with respect to the primes Q_i, such that when computing their trace products, the off-diagonal terms (those involving different Q_i's) vanish modulo higher powers of p, leaving only the diagonal terms which contribute the desired exponents. If N is large enough, then the cross terms would be in p^{k+1}, hence when taking the determinant, their contribution is negligible, and the main terms give the required divisibility.\n\nAlternatively, using the fact that the discriminant is the product of the squares of the differences of the embeddings, but since we are dealing with p-adic valuations, maybe local methods would be more appropriate. Each prime Q_i contributes to the discriminant a certain power based on its ramification and inertia, and by constructing the basis elements to lie in high powers of the other primes, their local contributions at those primes are minimized, focusing the discriminant's p-part on the intended exponents.\n\nIn summary, the key assumptions here are:\n\n- L/K is a finite extension with K = ℚ.\n- S is the ring of integers of L, R = ℤ.\n- P = pℤ is a prime in ℤ.\n- Q₁,…,Q_r are the primes of S above p.\n- Each Q_i has ramification index e_i and inertial degree f_i.\n- For each Q_i, B_i is a basis for S/Q_i over ℤ/pℤ.\n- α_{ij} are chosen such that they are in Q_i^{j-1} \\ Q_i^j and in Q_h^N for h ≠ i, where N is large.\n- The elements α₁,…,α_n are formed by α_{ij}β_{il} where β_{il} are from B_i.\n\nThe problem is to show that p^k divides disc(α₁,…,α_n) with k = sum (e_i -1)f_i.\n\nSo the assumptions should list all these conditions, each as a separate point. The problem is the divisibility of the discriminant by p^k.",
    "Original_Problem": "Assumption: \n$L/\\mathbb{Q}$ is a finite extension of algebraic number fields,\n$S = \\mathcal{O}_L$ is the ring of integers of $L$,\n$p$ is a prime in $\\mathbb{Z}$,\n$Q_1, \\ldots, Q_r$ are distinct primes of $S$ lying above $p$,\nFor each $Q_i$, $e_i$ is the ramification index of $Q_i$ over $p$,\nFor each $Q_i$, $f_i$ is the inertial degree of $Q_i$ over $p$,\nFor each $Q_i$, $B_i$ is a basis for $S/Q_i$ over $\\mathbb{Z}/p\\mathbb{Z}$,\nFor each $i$ and $j$ ($1 \\leq j \\leq e_i$), $\\alpha_{ij} \\in Q_i^{j-1} \\setminus Q_i^j$,\nFor each $i$ and $j$, $\\alpha_{ij} \\in \\bigcap_{h \\neq i} Q_h^N$ where $N$ is a sufficiently large integer,\nThe elements $\\alpha_1, \\ldots, \\alpha_n$ are constructed as $\\alpha_{ij}\\beta_{il}$ with $\\beta_{il} \\in B_i$.\nProblem: \nShow that $$p^k \\mid \\mathrm{disc}(\\alpha_1, \\ldots, \\alpha_n)$$ where $k = \\sum_{i=1}^r (e_i - 1)f_i$.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: $L/\\mathbb{Q}$ is a finite extension of algebraic number fields,\nAssumption 2: $S = \\mathcal{O}_L$ is the ring of integers of $L$,\nAssumption 3: $p$ is a prime in $\\mathbb{Z}$,\nAssumption 4: $Q_1, \\ldots, Q_r$ are distinct primes of $S$ lying above $p$,\nAssumption 5: For each $Q_i$, $e_i$ is the ramification index of $Q_i$ over $p$,\nAssumption 6: For each $Q_i$, $f_i$ is the inertial degree of $Q_i$ over $p$,\nAssumption 7: For each $Q_i$, $B_i$ is a basis for $S/Q_i$ over $\\mathbb{Z}/p\\mathbb{Z}$,\nAssumption 8: For each $i$ and $j$ ($1 \\leq j \\leq e_i$), $\\alpha_{ij} \\in Q_i^{j-1} \\setminus Q_i^j$,\nAssumption 9: For each $i$ and $j$, $\\alpha_{ij} \\in \\bigcap_{h \\neq i} Q_h^N$ where $N$ is a sufficiently large integer,\nAssumption 10: The elements $\\alpha_1, \\ldots, \\alpha_n$ are constructed as $\\alpha_{ij}\\beta_{il}$ with $\\beta_{il} \\in B_i$.\nProblem: \nShow that $$p^k \\mid \\mathrm{disc}(\\alpha_1, \\ldots, \\alpha_n)$$ where $k = \\sum_{i=1}^r (e_i - 1)f_i$.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$v_{R_{it}} (\\alpha_{ij}) = \\frac{e}{e_i} (j-1)$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: $L/\\mathbb{Q}$ is a finite extension of algebraic number fields,\nAssumption 2: $S = \\mathcal{O}_L$ is the ring of integers of $L$,\nAssumption 3: $p$ is a prime in $\\mathbb{Z}$,\nAssumption 4: $Q_1, \\ldots, Q_r$ are distinct primes of $S$ lying above $p$,\nAssumption 5: For each $Q_i$, $e_i$ is the ramification index of $Q_i$ over $p$,\nAssumption 6: For each $Q_i$, $f_i$ is the inertial degree of $Q_i$ over $p$,\nAssumption 7: For each $Q_i$, $B_i$ is a basis for $S/Q_i$ over $\\mathbb{Z}/p\\mathbb{Z}$,\nAssumption 8: For each $i$ and $j$ ($1 \\leq j \\leq e_i$), $\\alpha_{ij} \\in Q_i^{j-1} \\setminus Q_i^j$,\nAssumption 9: For each $i$ and $j$, $\\alpha_{ij} \\in \\bigcap_{h \\neq i} Q_h^N$ where $N$ is a sufficiently large integer,\nAssumption 10: The elements $\\alpha_1, \\ldots, \\alpha_n$ are constructed as $\\alpha_{ij}\\beta_{il}$ with $\\beta_{il} \\in B_i$.\nAssumption 11: $$v_{R_{it}} (\\alpha_{ij}) = \\frac{e}{e_i} (j-1)$$\nProblem: \nShow that $$p^k \\mid \\mathrm{disc}(\\alpha_1, \\ldots, \\alpha_n)$$ where $k = \\sum_{i=1}^r (e_i - 1)f_i$."
}