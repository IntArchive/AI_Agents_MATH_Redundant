{
    "Link_API": "https://api.stackexchange.com/2.3/questions/4543781",
    "Title": "Why does this strategy to pick the largest envelope work?",
    "Score": 19,
    "Category": "Chứng minh",
    "Tags": "probability, probability-theory, probability-distributions",
    "Link": "https://math.stackexchange.com/questions/4543781/why-does-this-strategy-to-pick-the-largest-envelope-work",
    "Content": "Game: You have two envelopes. Each one contains a real number. Choose one envelope and you get to see the number on it. Now you have two choices: select the same envelope, or swap. At the end, if you have chosen the greater number, You win. Problem: Find a strategy that gives you a probability of winning that is more than $0.5$ Solution: Choose one real number $x$ . If envelope one contains $y>x$ , keep it, else swap. My Question: Why does the strategy work? Can we prove that probability-theoretically?",
    "AcceptedAnswer": "At first, it seems incredible that this can even work. The two numbers can be selected in any way at all, and you have no way of knowing what the other number is. Nonetheless, you can answer in such a way that your choice is more likely than not to be correct. Method: Select any cumulative distribution function (CDF) $F(x)$ that is strictly increasing; that is, pick a function $F(x)$ such that $F(x) > F(y)$ for all $x > y$ . $F(x)$ goes to $0$ as $x$ goes leftward to negative infinity. $F(x)$ goes to $1$ as $x$ goes rightward to positive infinity. To make things simple, a suitable function is $F(x) = \\frac{2^x}{1 + 2^x}$ .  (This is similar to the standard logistic function, but with base $2$ instead of base $e$ .) I'll use this function in what follows. (As an aside, I don't think it's actually significant that $F(x)$ is a CDF; we're not drawing numbers from that distribution in any explicit sense. It's just a convenient shorthand for what we want it to look like.) The OP's function is the step function; that is, $$\nF(x) = \\begin{cases}\n    0 & x < x_0 \\\\\n    1 & x \\geq x_0\n\\end{cases}\n$$ That has the disadvantage that it's not strictly increasing, so there are some cases (in which both numbers are greater than $x_0$ , or both numbers are less than $x_0$ ) where the strategy doesn't help. Averaged over all cases, however, the strategy does help. (But how much? Ahh, that's the question.) Now, if the number you look at is $x$ , you keep your envelope with probability $F(x)$ , and switch it with probability $1-F(x)$ . For instance, if you open an envelope and see the number $3$ , you keep your envelope with probability $F(3) = \\frac{2^3}{1+2^3} = 8/9$ , and switch it with probability $1-F(3) = 1/9$ . Your probability of getting the right answer can now be determined as follows: Suppose the two numbers I selected were $a$ and $b$ , with $b > a$ .  Your answer is correct if either you looked at $a$ and switched (with probability $1–F(a)$ ), or you looked at $b$ and kept the envelope (with probability $F(b)$ ).  Since each of these two scenarios is equally likely—remember, you got to choose the envelope you looked at, with no prior information—your overall probability of guessing correctly is $$\nP(\\text{correct}) = \\frac{1-F(a)+F(b)}{2} = \\frac12 + \\frac{F(b)-F(a)}{2}\n$$ Since $F(x)$ is strictly increasing on the reals, and $b > a$ , we must have $F(b) > F(a)$ , and so your probability of being correct must be strictly greater than $1/2$ . On my work blog, one of my work colleagues mentioned that he felt initial unease about this result, but eventually resolved it by proposing that if you were to draw a \"random\" CDF in some way, then the average difference between their CDF values $E[F(b)-F(a) \\mid a, b]$ is equal to $0$ . That is, on average (in some sense), the bump we get from our CDF is zero. This seems like it contradicts the fact that the bump is always positive—or does it? Part of the problem with our intuition here is that there is no uniform distribution on the space of strictly increasing CDFs, in pretty much the same way that there is no uniform distribution on the integers.  (That is to say, there's no algorithm that picks a random integer such that each value is equally likely.) The way we negotiate this in the case of the integers is to restrict our attention to the interval $[-m, m]$ , analyze the behavior on that domain, and then see how that behavior evolves as we let $m$ go off to infinity. As an example, we might consider the double-ended sequence $a_n = \\frac{1}{|n|+1}$ , defined on the integers. (Note: This is not a distribution; we're going to take the expected value of a randomly selected value from this sequence, given a uniform distribution over larger and larger intervals.) The central portion of this sequence looks like this: It's clear that every value of this sequence is positive.  But, we might ask, what is its average value?  We can't evaluate this directly by just summing the product of each value and its probability, because as we said, there is no uniform distribution on the integers.  We can't even add up the values and divide by the number of values, because both the sum and the count are infinite.  The way we approach this is to consider the sum of the sequence for $n$ between $–m$ and $m$ .  This is related to the harmonic numbers $H_m$ ; the sum of our sequence is given by $2H_{m+1}–1$ .  We don't actually need to know the exact value of $H_m$ ; we only need to know a good upper bound.  In this case, a good upper bound is $1+\\ln m$ , where $\\ln$ denotes the natural log.  This tells us that the sum of this sequence between $–m$ and $m$ is a positive value less than $1+2\\ln(m+1)$ .  Since there are $2m+1$ values in all, the average of these values is bounded by $$\nE_m \\leq \\frac{1+2\\ln(m+1)}{2m+1}\n$$ All we need to do now is see what what $E_m$ does as $m$ goes off to infinity. Of course, we only have an upper bound, and not $E_m$ itself, but there is a limit theorem, popularly called the squeeze theorem , that tells us (broadly speaking) that if we have a function that is always between two other functions, and the two other functions have the same limit, then the middle function must have the same limit. Since our average is always between $0$ and our upper bound, and our upper bound goes to $0$ (and $0$ obviously goes to $0$ ), our average must therefore go to $0$ , even though it's the average of values that themselves are always positive! Something similar can be done with our CDFs. One property that we might expect a uniform distribution over the CDFs to have is indifference to translation. This is getting a little hand-wavy, I concede, but the basic idea is that if all CDFs are, in some sense, equally likely, then sliding a CDF either left or right (without otherwise changing it) shouldn't make that CDF more or less likely to be chosen. If we let it slide by up to m units either left or right, and average uniformly over that range, we get \\begin{align}\nE_m[F(b)-F(a)] & = \\frac{1}{2m} \\int_{t=-m}^m F(b+t)-F(a+t) \\, dt \\\\\n    & = \\frac{1}{2m} \\left[ \\int_{t=-m}^m F(b+t) \\, dt\n                          - \\int_{t=-m}^m F(a+t) \\, dt \\right] \\\\\n    & = \\frac{1}{2m} \\left[ \\int_{u=a}^b F(u+m) \\, du\n                          - \\int_{u=a}^b F(u-m) \\, du \\right] \\\\\n    & = \\frac{1}{2m} \\int_{u=a}^b F(u+m) - F(u-m) \\, du \\\\\n    & \\leq \\frac{b-a}{2m}\n\\end{align} where the last step follows because $F$ is bounded between $0$ and $1$ .  But it's clear that if we let $m$ go to infinity, for any given values of $a$ and $b$ , this fraction will go to $0$ . Since the expectation cannot be negative, we can use the squeeze theorem again to show that the expected gain in our decision algorithm is $0$ , even though any particular gain is always positive, thus resolving the apparent paradox.",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \nThere are two envelopes,\nEach envelope contains a distinct real number,\nThe player selects one envelope uniformly at random,\nThe player observes the real number in the selected envelope,\nThe player can choose to keep the selected envelope or swap with the other,\nThe player wins if the final chosen envelope contains the larger real number,\nThe strategy requires choosing a real number $x$ prior to the game,\nThe strategy prescribes keeping the selected envelope if its number is greater than $x$; otherwise, swapping.\nProblem:\nProve that the described strategy results in a winning probability exceeding $0.5$.\n###",
    "reasoning_create_structured_problem": "Okay, let me try to structure this problem according to the user's format. First, I need to read the original question on Math Stack Exchange and filter out the unrelated information. The title is \"Why does this strategy to pick the largest envelope work?\" The question describes a game with two envelopes, each containing a real number. The player chooses one envelope, sees the number, and then decides to keep it or swap. The goal is to have a probability of winning greater than 0.5. The solution mentioned is choosing a real number x and swapping if the first envelope's number y is less than or equal to x. The user is asking why this strategy works and for a probability-theoretic proof.\n\nNow, I need to list the assumptions line by line. Each assumption should address one property or condition applied to one object. Let's see:\n\n1. There are two envelopes. Each envelope contains a real number. So, the first assumption is that there are two envelopes with real numbers. But the problem states \"each one contains a real number,\" so maybe split that into two assumptions: one for each envelope. However, the user's example had two separate lines for the same object (n is an integer, n is divisible by 7). Wait, in their example, they listed two properties for the same object. So maybe here, the two envelopes each have a real number. But each envelope is an object. So perhaps:\n\n- There are two envelopes.\n- Each envelope contains a real number.\n- The player chooses one envelope and observes its number.\n- The player can choose to keep the chosen envelope or swap.\n- The player wins if the final chosen number is the greater one.\n- The strategy involves selecting a real number x.\n- If the observed number y in the first envelope is greater than x, keep it; otherwise, swap.\n\nWait, but the problem is to find a strategy with a winning probability over 0.5. The solution provided uses this x strategy, and the question is why it works. The problem statement in the user's example was \"Prove that A(n) is divisible by 91,\" with assumptions on n. Here, the problem is more about the strategy's effectiveness.\n\nSo the assumptions would include the game setup and the strategy's conditions. Let me list them:\n\nAssumptions:\n- There are two envelopes.\n- Each envelope contains a real number.\n- The two numbers are distinct (otherwise, swapping wouldn't matter, but the problem implies there's a greater number to choose).\n- The player can choose one envelope initially.\n- The player observes the number in the chosen envelope.\n- The player can decide to keep or swap the envelope.\n- The player wins if the final chosen number is the greater one.\n- The strategy is to choose a threshold real number x.\n- If the observed number y in the first envelope is greater than x, keep it; else, swap.\n\nBut perhaps some of these are part of the problem statement rather than assumptions. The original problem states that the strategy is to choose a real number x, if the first envelope's number is greater than x, keep it, else swap. The user is asking why this works.\n\nWait, the problem as stated in the question is: \"Find a strategy that gives you a probability of winning more than 0.5.\" The solution is the x strategy. The user's question is why it works.\n\nBut in the formatted problem example, the assumptions included specific conditions on n. Here, the problem's assumptions would be the game rules and the strategy's conditions. However, the strategy is part of the solution, not the problem's assumptions. Wait, the example given by the user had the problem statement include the expression A(n) and the assumptions were on n. Here, the problem is about the strategy working. So the problem is to show that the strategy (using x) gives a probability >0.5. So the assumptions would be about the game setup: two envelopes with distinct real numbers, chosen randomly, etc. But the problem as presented in the original question is to explain why the strategy works. So the problem is \"Prove that the strategy of choosing a threshold x and swapping based on whether the observed number exceeds x yields a winning probability greater than 0.5.\"\n\nBut the user's example had the problem restated concisely. Let me try:\n\nOriginal problem mentions the game setup, the strategy, and the question is why the strategy works. The formatted problem should list the assumptions (game rules, strategy conditions) and the problem statement.\n\nAssumptions could be:\n\n- There are two envelopes.\n- Each envelope contains a distinct real number.\n- The player selects one envelope at random.\n- The player observes the number in the selected envelope.\n- The player can choose to keep the envelope or swap.\n- The player wins if the final envelope has the larger number.\n- The strategy involves choosing a real number x before the game.\n- If the observed number is greater than x, the player keeps the envelope; otherwise, swaps.\n\nProblem: Prove that this strategy yields a winning probability greater than 0.5.\n\nBut I need to ensure each assumption is one line, one property applied to one object. Let me parse them:\n\n1. There are two envelopes.\n2. Each envelope contains a distinct real number.\n3. The player selects one envelope uniformly at random.\n4. The player observes the real number in the selected envelope.\n5. The player can choose to keep the selected envelope or swap with the other.\n6. The player wins if the final chosen envelope contains the larger real number.\n7. The strategy requires choosing a real number x prior to the game.\n8. The strategy prescribes keeping the selected envelope if its number is greater than x; otherwise, swapping.\n\nProblem: Prove that the described strategy results in a winning probability exceeding 0.5.\n\nI think that covers all the necessary assumptions. The key points are that the numbers are distinct, the player selects one randomly first, observes it, then applies the strategy based on x, and the winning condition is having the larger number. The strategy's components are also listed as assumptions since they are part of the problem setup provided in the question.",
    "Original_Problem": "Assumption: \nThere are two envelopes,\nEach envelope contains a distinct real number,\nThe player selects one envelope uniformly at random,\nThe player observes the real number in the selected envelope,\nThe player can choose to keep the selected envelope or swap with the other,\nThe player wins if the final chosen envelope contains the larger real number,\nThe strategy requires choosing a real number $x$ prior to the game,\nThe strategy prescribes keeping the selected envelope if its number is greater than $x$; otherwise, swapping.\nProblem:\nProve that the described strategy results in a winning probability exceeding $0.5$.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: There are two envelopes,\nAssumption 2: Each envelope contains a distinct real number,\nAssumption 3: The player selects one envelope uniformly at random,\nAssumption 4: The player observes the real number in the selected envelope,\nAssumption 5: The player can choose to keep the selected envelope or swap with the other,\nAssumption 6: The player wins if the final chosen envelope contains the larger real number,\nAssumption 7: The strategy requires choosing a real number $x$ prior to the game,\nAssumption 8: The strategy prescribes keeping the selected envelope if its number is greater than $x$; otherwise, swapping.\nProblem:\nProve that the described strategy results in a winning probability exceeding $0.5$.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$\nF(x) = \\begin{cases}\n    0 & x < x_0 \\\\\n    1 & x \\geq x_0\n\\end{cases}\n$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: There are two envelopes,\nAssumption 2: Each envelope contains a distinct real number,\nAssumption 3: The player selects one envelope uniformly at random,\nAssumption 4: The player observes the real number in the selected envelope,\nAssumption 5: The player can choose to keep the selected envelope or swap with the other,\nAssumption 6: The player wins if the final chosen envelope contains the larger real number,\nAssumption 7: The strategy requires choosing a real number $x$ prior to the game,\nAssumption 8: The strategy prescribes keeping the selected envelope if its number is greater than $x$; otherwise, swapping.\nAssumption 9: $$\nF(x) = \\begin{cases}\n    0 & x < x_0 \\\\\n    1 & x \\geq x_0\n\\end{cases}\n$$\nProblem:\nProve that the described strategy results in a winning probability exceeding $0.5$."
}