{
    "Link_API": "https://api.stackexchange.com/2.3/questions/2602317",
    "Title": "If $f^2$ and $f^3$ are $C^{\\infty}(\\mathbb R)$ then $f$ is $C^{\\infty}(\\mathbb R)$",
    "Score": 13,
    "Category": "Chứng minh",
    "Tags": "real-analysis, derivatives, taylor-expansion",
    "Link": "https://math.stackexchange.com/questions/2602317/if-f2-and-f3-are-c-infty-mathbb-r-then-f-is-c-infty-mathbb-r",
    "Content": "Since it is an exercise from an oral exam, I have added some indications I had. $f : \\mathbb R \\to \\mathbb R$, such that $f^2$ and $f^3$ are $C^{\\infty}$, show that $f$ is $C^{\\infty}$. The two isolated hypothesis are not sufficient, since there is a problem in zero for the cube root, and since you can take $f$ that takes $1$ and $-1$ without regularity but its square will be constant. How to proceed with the two hypothesis? Here, the indications I have from the candidate who has taken the oral exam: -First, show that $f$ is $C^1$:\nSuppose $f(0) = 0$ (it is exactly the problem, and by translation we consider that it is in $0$). Suppose they exist and use the Taylor expansions of $f^2$ and $f^3$ up to a non-zero order. Find a polynomial link between both coefficients using equivalents. If they do not exist, $f^2 =o(h^4)$ so $f$ is $C^1$ in $0$ (?). -Use the general Taylor expansion (with integral remain) for $f^3$.  Suppose the coefficients are not all zeros, (change the bounds to $0$ and $1$), show that the parameter integral is $C^{\\infty}$, then take the cube root (??).",
    "AcceptedAnswer": "This result was first proved in: Henri Joris, Une $C^\\infty$ application non-immersive qui possède la propriété universelle des immersions , Arch. Math. (Basel), 39 , 269-277, 1982. The proof we provide follows the general framework of the proof which appears in: Robert Myers, An Elementary Proof of Joris's Theorem , Amer. Math. Monthly, 112 , no. 9, 829-831, 2005. We shall use the following notation\n$$\nP_{n,x_0}(x;F)=F(x_0)+F^{(1)}(x_0)(x-x_0)+\\frac{F^{(2)}(x_0)}{2!}(x-x_0)^2\n+\\cdots+\\frac{F^{(n)}(x_0)}{n!}(x-x_0)^n.\n$$\nwhere $F$ is a function $n$ times differentiable in some open interval $(a,b)$ \ncontaining $x_0$. We shall be using the following lemmata: Lemma 1. Let $F: (a,b)\\to\\mathbb R$ be a function possessing all derivatives up to order $n$, for some $x_0\\in(a,b)$. \n$F^{(1)}(x_0),\\ldots,F^{(n)}(x_0)$. Then $$\n\\lim_{x\\to x_0}\\frac{F(x)-P_{n,x_0}(x;F)}{(x-x_0)^n}=0.\n$$ Proof. See Spivak. Lemma 2. Let $\\,F: (a,b)\\to \\mathbb R\\,$ be function which is $k$ times differentiable in $(a,b)$ and $k+1$ times differentiable in $(a,b)\\setminus\\{x_0\\}$, where $x_0\\in(a,b)$. If\n$$\nL=\\lim_{x\\to x_0} \\frac{F(x)-P_{k,x_0}(x;F)}{(x-x_0)^{k+1}} \\in\\mathbb R,\n$$\nthen $f$ possesses derivative of $k+1$ order at $x_0$, and\n$F^{(k+1)}(x_0)=(k+1)! L.$ Proof. Use L' Hôpital's Rule. Lemma 3. Let $F\\in C^{k+n}(a,b),\\,$ $x_0\\in(a,b),\\,$ and\n$$\nG(x)=\\left\\{\\begin{array}{ccl}\n\\dfrac{F(x)-P_{k,x_0}(x;F)}{( x-x_0)^{k+1}} & \\text{if} & x\\ne x_0, \\\\\n(k+1)! F^{(k+1)}(x_0) & \\text{if} & x= x_0, \\\\\n\\end{array}\n\\right.\n$$\nthen $G\\in\\ C^n(a,b)$. In particular, if $\\,F\\in C^\\infty(a,b)$, then $\\,G\\in C^\\infty(a,b)$. Proof. Use induction on the degree of \n$P_{k,x_0}$ and evoke Lemma 2. Proof of Joris's Theorem. Let us first note that, \nif $f(x_0)\\ne 0$, for some  $x_0\\in\\mathbb R$, then $f$ maintain sign in a whole\nopen interval $I$, with $x_0\\in I$, and as $h=f^3$ is $C^\\infty$ in $I$, then $f$ is also $C^\\infty$ in $I$, as the composition of $x^{1/3}$,\nwhich is $C^\\infty$ in $\\,\\mathbb R\\setminus\\{0\\}\\,$ and $f^3$. The hard part is to show that $f$ is $C^\\infty$, where $f$ vanishes. We set \n$$\nZ=\\{x\\in\\mathbb R: f(x)=0\\}\n$$ \nand let $\\,x_0\\in Z$. We shall study separately the cases where\n$x_0$ is an isolated point of $Z$ from the case where $x_0$ is an accumulation point of $Z$. It is important to point out that, in order for $f^{(k+1)}(x_0)$ to be definable, $f$ has to be $k$ times differentiable in an interval containing $x_0$. Case A. $x_0$ is an isolated point of $Z$. First sub-case. $\\,h^{(n)}(x_0)=0,\\,$ for all $n\\in\\mathbb N$. We shall show in this sub-case that all the derivatives of $f$ exists\nat $x=x_0$ and they all vanish.\nDue to Lemma 1 we have that\n$$\n0=\\lim_{x\\to x_0}\\frac{h(x)}{(x-x_0)^n}=\\lim_{x\\to x_0}\\frac{f^3(x)}{(x-x_0)^n}, \\quad \n\\text{for all $n\\in\\mathbb N$,}\n$$\nsince $P_{n,x_0}(x;h)\\equiv 0$. Hence $\\,\\displaystyle\\lim_{x\\to x_0}\\dfrac{f(x)}{(x-x_0)^n}=0$, for all $n\\in\\mathbb N$. \nIn particular\n$$\n\\lim_{x\\to x_0}\\frac{f(x)-f(x_0)}{x-x_0}=\\lim_{x\\to x_0}\\frac{f(x)}{x-x_0}=0,\n$$\nand therefore $f$ is differentiable at $x=x_0$, and $f'(x_0)=0$. We shall show inductively that, for every $n\\in\\mathbb N$,the function $f$ is $n$ times differentiable at $x=x_0$ and $f^{(0)}(x_0)=f^{(1)}(x_0)=\\cdots=f^{(n)}(x_0)=0$.  Assume that this is true for some $\\,k\\in\\mathbb N$. \nThen $P_{k,x_0}(x;f)\\equiv 0$ and thus Lemma 2 provides that $f$ is $k+1$ differentiable at $x=x_0$ and $f^{(k+1)}(x_0)=0$. Second sub-case. There exists an $\\,n\\in\\mathbb N$, such that $\\,h^{(n)}(x_0)\\ne 0$. Let $k$ be the least positive integer, such that $\\,h^{(k)}(x_0)\\ne 0$. Lemma 3 provides that, there exists a function $\\,H\\in C^\\infty(\\mathbb R)$,\nsuch that $\\,h(x)=(x-x_0)^kH(x)$, with $H(x_0)\\ne 0$. In particular, there exists an interval $\\,(a,b)$, with $x_0\\in (a,b)$, where $H$ maintains sign. \nMeanwhile we have that\n$$\ng^3(x)=h^2(x)=(x-x_0)^{2k}H^2(x),\n$$\nand hence,\n$$\ng(x)\\big(H^2(x)\\big)^{-1/3}=\\big((x-x_0)^{3k}\\big)^{1/3},\n\\quad\\text{for all $x\\in (a,b)$}.\n$$\nThe right hand side of the above is $C^\\infty$ in $(a,b)$, which implies that $2k/3$ is an integer, and hence $k=3k_1$, for some positive integer $k_1$. Thus\n$h(x)=(x-x_0)^{3k_1}H(x)$, and consequently \n$$\nf(x)=(x-x_0)^{k_1}H^{1/3}(x),\n$$\nand hence $f$ is $C^\\infty$ in $(a,b)$. Case B. $x_0$ is an accumulation point of $Z$. In such case, there exists a sequence $\\,\\{x_n\\}\\subset Z$, such that $x_n\\to x_0$. We may assume that this sequence in strictly monotone. Without loss of generality we assume that $\\{x_n\\}$ strictly increasing. Then\n$$\n0=h(x_1)=h(x_2)=\\cdots=h(x_n)=\\cdots.\n$$\nDue to Rolle's Theorem, there exist $\\xi_i \\in(x_i,x_{i+1})$, such that\n$$\n0=h'(\\xi_1)=h'(\\xi_2)=\\cdots=h'(\\xi_n)=\\cdots.\n$$\nThus $\\,h'(x_0)=0$, since $h'$ is continuous and $\\xi_n\\to x_0$. Repeating the same procedure for $h'$ instead of $h$, we obtain that $h''(x_0)=0$, and \ninductively that $\\,h^{(n)}(x_0)=0$, for all $n\\in\\mathbb N$. As in the study of the First sub-case , we obtain, by virtue of Lemma 1 , that \n$$\n0=\\lim_{x\\to x_0}\\frac{h(x)}{(x-x_0)^n}=\\lim_{x\\to x_0}\\frac{f^3(x)}{(x-x_0)^n}, \\quad \n\\text{for all $n\\in\\mathbb N$,}\n$$\nand thus\n\\begin{equation*}\n\\lim_{x\\to x_0}\\frac{f(x)-f(x_0)}{x-x_0}=\\lim_{x\\to x_0}\\frac{f(x)}{x-x_0}=0.\n\\end{equation*}\nTherefore, $f$ is differentiable at $x=x_0$, and $f'(x_0)=0$. Next, we shall show inductively that $f$ possesses derivatives of all orders at $x=x_0$, and that they all vanish. Combining all the studied cases so far we have that $f$ is differentiable in the whole of $\\mathbb R$. We shall use induction to prove our claim. Assume that $f$ is $k$ times differentiable in $\\mathbb R$ and also\n$$\nf^{(0)}(x_0)=f^{(1)}(x_0)=\\cdots=f^{(k)}(x_0)=0,\n$$\nin every $x_0$, which is an accumulation point of $Z$. Then $f$ is $k+1$ times differentiable in the whole of $\\mathbb R$, and $f^{(k+1)}(x_0)=0$, for every $x_0$, which is an accumulation point of $Z$. We have that \n$$\n\\lim_{x\\to x_0}\\frac{f(x)}{(x-x_0)^n}=0,\n$$\nfor every $x_0$ which is an accumulation point of $Z$, and by virtue of Lemma 2 ,\n$f$ possesses derivative of order $k+1$ in every such $x_0$. Combining all the studied cases we obtain that $f$ is $k+1$ times differentiable in the whole of $\\mathbb R$. This establishes the induction hypothesis and completes the proof of Joris's Theorem. Note. This proof can be easily generalised for the case when $\\,f^k,f^\\ell\\in C^\\infty(\\mathbb R)$ and $(k,\\ell)=1$.",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \n$f: \\mathbb{R} \\to \\mathbb{R}$,\n$f^2$ is $C^{\\infty}(\\mathbb{R})$,\n$f^3$ is $C^{\\infty}(\\mathbb{R})$.\nProblem: \nShow that $f$ is $C^{\\infty}(\\mathbb{R})$.\n###",
    "reasoning_create_structured_problem": "Okay, let me try to parse this problem. The user wants me to structure the given Math Stack Exchange question into the specified format. The original question is about showing that a function f is smooth (C^∞) if both its square (f²) and cube (f³) are smooth. \n\nFirst, I need to list all assumptions. The problem states that f: R → R, and both f² and f³ are C^∞. The user mentioned that individually, these hypotheses aren't enough because of issues like cube roots at zero or functions taking values 1 and -1 non-smoothly. But together, they should imply f is smooth. \n\nThe example given by the user for the previous problem lists assumptions line by line, each addressing one property or condition. Here, the main assumptions are:\n\n1. f is a function from R to R.\n2. f² is C^∞.\n3. f³ is C^∞.\n\nBut wait, the original problem says \"show that f is C^∞\" under these conditions. The user's example included specific conditions like n being an integer and divisible by 7. In this case, the problem doesn't have additional conditions beyond f² and f³ being smooth. However, in the problem description, there's a mention of considering f(0) = 0 by translation. But that's part of the approach, not the problem's inherent assumptions. The problem's assumptions are just that f² and f³ are smooth. \n\nWait, the user's example included an assumption that n is divisible by 7, but in the original problem, that wasn't stated. Wait, no—the original problem was to prove divisibility by 91 for every integer n. The user's formatted problem added the assumption that n is divisible by 7, but that's actually part of the solution. Wait, maybe in that example, the user made a mistake? Because the original problem says \"for every integer n\", but the formatted problem adds \"n is divisible by 7\". That seems incorrect. But the user provided that as an example, so perhaps they wanted to show how to extract assumptions, even if in the example they added an extra condition. Maybe the example was incorrect, but the user wants me to follow their structure. \n\nIn the current problem, the key assumptions are that f² and f³ are smooth. The problem is to show f is smooth. The user's example might have included assumptions beyond the original problem, but perhaps that was a mistake. But in the given problem here, the only assumptions are f² and f³ are C^∞. The rest of the text in the question is about the approach to solve it, not the problem's assumptions. So the Assumption section should list the given conditions of the problem. \n\nTherefore, the assumptions should be:\n\n- f: R → R,\n- f² is C^∞(R),\n- f³ is C^∞(R).\n\nEach of these is a separate line. The problem is to show f is C^∞(R). The rest of the text in the question (like considering f(0)=0, using Taylor expansions, etc.) are part of the solution approach, not the problem's assumptions. So those shouldn't be included in the assumptions section. \n\nSo the formatted problem should have those three assumptions. Let me check again the example. In the example, the original problem says \"for every integer n\", but the formatted problem adds \"n is divisible by 7\". That seems like an error, but perhaps the user wanted to filter out unrelated info. However, in the current problem, the original problem states that f² and f³ are C^∞, and we need to show f is C^∞. So the assumptions are exactly those. Therefore, the formatted problem should be:\n\nAssumption:\nf: R → R,\nf² is C^∞(R),\nf³ is C^∞(R).\n\nProblem:\nShow that f is C^∞(R).\n\nBut wait, the original problem mentions \"f : R → R\" so that's an assumption. Then f² and f³ being smooth. The problem is to show f is smooth. So that's correct. The other parts of the question, like the hints, are part of the user's thought process, but not part of the problem's assumptions. Therefore, the structured problem should list those three assumptions.",
    "Original_Problem": "Assumption: \n$f: \\mathbb{R} \\to \\mathbb{R}$,\n$f^2$ is $C^{\\infty}(\\mathbb{R})$,\n$f^3$ is $C^{\\infty}(\\mathbb{R})$.\nProblem: \nShow that $f$ is $C^{\\infty}(\\mathbb{R})$.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: $f: \\mathbb{R} \\to \\mathbb{R}$,\nAssumption 2: $f^2$ is $C^{\\infty}(\\mathbb{R})$,\nAssumption 3: $f^3$ is $C^{\\infty}(\\mathbb{R})$.\nProblem: \nShow that $f$ is $C^{\\infty}(\\mathbb{R})$.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$\n\\lim_{x\\to x_0}\\frac{f(x)-f(x_0)}{x-x_0}=\\lim_{x\\to x_0}\\frac{f(x)}{x-x_0}=0,\n$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: $f: \\mathbb{R} \\to \\mathbb{R}$,\nAssumption 2: $f^2$ is $C^{\\infty}(\\mathbb{R})$,\nAssumption 3: $f^3$ is $C^{\\infty}(\\mathbb{R})$.\nAssumption 4: $$\n\\lim_{x\\to x_0}\\frac{f(x)-f(x_0)}{x-x_0}=\\lim_{x\\to x_0}\\frac{f(x)}{x-x_0}=0,\n$$\nProblem: \nShow that $f$ is $C^{\\infty}(\\mathbb{R})$."
}