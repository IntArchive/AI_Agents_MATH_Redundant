{
    "Link_API": "https://api.stackexchange.com/2.3/questions/2367796",
    "Title": "$\\textbf Z[\\sqrt{pq}]$ is not a UFD if $\\left( \\frac{q}p \\right) = -1$ and $p \\equiv 1 \\pmod 4$.",
    "Score": 14,
    "Category": "Chứng minh",
    "Tags": "abstract-algebra, ring-theory, algebraic-number-theory, unique-factorization-domains",
    "Link": "https://math.stackexchange.com/questions/2367796/textbf-z-sqrtpq-is-not-a-ufd-if-left-fracqp-right-1-and-p-e",
    "Content": "Let $p$ and $q$ be primes such that $p \\equiv 1 \\pmod 4$ and $\\left( \\frac q p \\right) = -1$. Show that $\\textbf Z[\\sqrt {pq}]$ is not a UFD. I tried some examples like $p=5$ and $q = 2$. But I have no clue about the general case. Any hint?",
    "AcceptedAnswer": "Is this from a textbook? If so, I would wager credits to navy beans that they want you to use quadratic reciprocity. Suppose $q \\equiv 1 \\pmod 4$ as well. Then we have $$\\left(\\frac{p}{q}\\right) = \\left(\\frac{q}{p}\\right) = -1.$$ We could invoke either $-p$ or $-q$, but since the fundamental unit $\\eta$ of $\\mathcal{O}_{\\mathbb{Q}(\\sqrt{pq})}$ has norm $-1$ (Theorem $11.5.7$ in the), if there exists some number $x \\in \\mathcal{O}_{\\mathbb{Q}(\\sqrt{pq})}$ such that $N(x) = -p$ or $-q$, then $N(\\eta x) = p$ or $q$, contradicting our Legendre symbol calculations. We conclude that $p$ and $q$ are both irreducible. But then $p \\mid (\\sqrt{pq})^2$, $q \\mid (\\sqrt{pq})^2$, yet $p \\nmid \\sqrt{pq}$, $q \\nmid \\sqrt{pq}$. Therefore $\\mathcal{O}_{\\mathbb{Q}(\\sqrt{pq})}$ is not UFD. I hope this is enough of a hint for you to figure out the case $q \\equiv 3 \\pmod 4$.",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \n$p$ is a prime number,\n$p \\equiv 1 \\pmod{4}$,\n$q$ is a prime number,\n$\\left( \\frac{q}{p} \\right) = -1$ (Legendre symbol),\n$\\mathbf{Z}[\\sqrt{pq}]$ is the ring of integers under consideration.\nproblem:\nShow that $\\mathbf{Z}[\\sqrt{pq}]$ is not a UFD.\n###END_OF_FORMAT###",
    "reasoning_create_structured_problem": "Okay, let's tackle this problem. The user wants to show that the ring Z[√(pq)] isn't a UFD under certain conditions on primes p and q. The given conditions are p ≡ 1 mod 4 and the Legendre symbol (q/p) = -1. \n\nFirst, I need to recall what makes a ring a UFD. A UFD requires that every element can be factored uniquely into irreducible elements, up to units and order. So, to show it's not a UFD, we need to find an element with multiple distinct factorizations or show that some element isn't a product of irreducibles, or maybe that there's a lack of unique factorization.\n\nSince the problem mentions quadratic fields, maybe we can relate this to the ring of integers of Q(√(pq)) and its class number. If the class number is greater than 1, the ring isn't a UFD. But how do the given conditions tie into that?\n\nAlternatively, maybe there's a specific element in Z[√(pq)] that factors in two different ways. For example, in Z[√-5], which isn't a UFD, 6 = 2*3 = (1 + √-5)(1 - √-5). So similar approach here.\n\nBut how to connect the conditions on p and q? Let's parse the assumptions:\n\n- p is a prime, p ≡ 1 mod 4.\n- q is a prime, and (q/p) = -1, meaning q is a quadratic non-residue modulo p.\n\nSince p ≡ 1 mod 4, -1 is a quadratic residue modulo p. Wait, because when p ≡ 1 mod 4, the equation x² ≡ -1 mod p has solutions. So if (q/p) = -1, then q is a non-residue, but maybe combining this with other properties.\n\nIn the example given by the user, p=5 (which is 1 mod 4), q=2. The Legendre symbol (2/5) is -1 because 2 is a non-residue modulo 5. Then, Z[√10] should not be a UFD. How does that work?\n\nIn general, for quadratic fields Q(√d), when d is square-free, the ring of integers is Z[√d] if d ≡ 2 or 3 mod 4. Here, pq is the discriminant. Since p and q are primes, pq is square-free. If p ≡1 mod 4, then pq ≡ q mod 4. Depending on q, maybe the ring of integers is still Z[√(pq)]. Wait, maybe not. The ring of integers for Q(√d) is Z[(1+√d)/2] when d ≡1 mod 4. So if pq ≡1 mod 4, then the ring of integers would be different. Wait, but pq must be congruent to 0, 1, 2, or 3 mod 4. Since p ≡1 mod 4, then pq ≡ q mod 4. If q is 2, then pq ≡2 mod 4. If q is an odd prime, then pq ≡1*3=3 mod 4, or 1*1=1 mod 4. Wait, but q is a prime, so if q is 2, then pq=2p, which is 2*1=2 mod 4. If q is odd, then q can be 1 or 3 mod 4. So pq would be 1*1=1 mod 4 or 1*3=3 mod 4. So depending on q, the discriminant d = pq would be 1, 2, or 3 mod 4.\n\nWait, but the ring Z[√(pq)] is the ring of integers only if pq ≡ 2 or 3 mod 4. If pq ≡1 mod 4, then the ring of integers is larger: Z[(1+√(pq))/2]. So in that case, Z[√(pq)] is not the full ring of integers. But maybe the problem is stated regardless of that. Wait, the problem states Z[√(pq)], so even if it's not the full ring of integers, we need to work with that ring.\n\nBut how does the UFD property relate here? Maybe using the fact that in a UFD, certain factorizations must hold. Alternatively, maybe using the norm. The norm in Z[√(pq)] is N(a + b√(pq)) = a² - pq b². If we can find an element with a non-unique factorization, that would show it's not a UFD.\n\nAlternatively, maybe the ideal (2) splits into non-principal ideals, implying the class number is greater than 1, hence not a UFD. But how to connect the conditions given to this?\n\nGiven that p ≡1 mod 4 and (q/p)=-1, perhaps we can look at the prime factorization of certain elements. Let me think about the example given: p=5, q=2. Then Z[√10]. Let's check if 10 ≡ 2 mod 4, so the ring of integers is indeed Z[√10]. Now, is this a UFD? I think it's not. For example, 10 factors as 2*5, and perhaps 2 and 5 split here. Let me compute the norm of 2: N(2) = 2² -10*0²=4. Similarly for 5: N(5)=25. But maybe 2 and 5 are irreducible? Or do they split?\n\nWait, in Z[√10], does 2 split? Let's see: Suppose 2 = (a + b√10)(c + d√10). Taking norms: 4 = (a² -10b²)(c² -10d²). The possible factors are 2*2 or 4*1. If (a² -10b²)=2, then a² -10b²=2. Let's try small integers: a=√(10b² +2). For b=1, a²=12, which is not a square. For b=0, a²=2, not integer. So no solutions. So 2 is irreducible. Similarly, 5: a² -10b²=5. For b=1, a²=15, nope. b=0, a²=5. So 5 is irreducible. Now, what about √10? √10 has norm (√10)^2 -10*(1)^2=10 -10=0. Wait, no. Wait, the norm is a² -10b². For √10, which is 0 +1√10, norm is 0² -10*(1)^2 = -10. So it's a non-unit. But √10 = √(2*5). So perhaps in Z[√10], we have √10 * √10 =10, which is 2*5. But both 2 and 5 are irreducible. So 10 has two factorizations: 2*5 and (√10)^2. But wait, are 2 and 5 associates of √10? Probably not, since their norms are different: N(2)=4, N(5)=25, N(√10)= -10. So they can't be associates. Hence, 10 factors in two different ways, implying the ring is not a UFD.\n\nBut how does this relate to the general case? In the example, p=5, q=2, with p≡1 mod4 and (2/5)=-1. The key was that 2 is a non-residue mod 5, which perhaps allows the construction of such non-unique factorizations.\n\nIn the general case, given p ≡1 mod4 and (q/p)=-1, we need to find an element in Z[√(pq)] that has multiple factorizations. Let's consider the element pq. In Z[√(pq)], pq is (√(pq))^2. So pq factors as √(pq)*√(pq). But in the integers, pq is also the product of primes p and q. If we can show that p and q are irreducible in Z[√(pq)], then this would give two different factorizations.\n\nSo, first, we need to check if p and q are irreducible in Z[√(pq)]. Suppose p is reducible. Then p = (a + b√(pq))(c + d√(pq)). Taking norms: N(p) = p² = (a² - pq b²)(c² - pq d²). The possible factors are p*p or 1*p². If one of the factors is 1, then a + b√(pq) is a unit. The units in Z[√(pq)] are elements with norm ±1. So solving a² - pq b² = ±1. If such solutions exist, then there are units. But in general, for positive pq, the units depend on the fundamental solution of Pell's equation. However, unless pq is a perfect square, which it isn't here, Pell's equation has non-trivial solutions. But even so, the existence of units doesn't directly affect the irreducibility of p.\n\nBut assuming that p factors as product of two non-units. Then we have (a² - pq b²)(c² - pq d²) = p². Let's assume that a² - pq b² = p and c² - pq d² = p. Then adding these equations: (a² + c²) - pq (b² + d²) = 2p. Not sure if that helps. Alternatively, perhaps a² - pq b² = 1, which would make the element a unit. But then p would be associated with c² - pq d². Not sure.\n\nAlternatively, maybe p remains irreducible. Similarly for q. If so, then pq = p*q = (√(pq))², hence two factorizations. To confirm this, we need to ensure that p and q are indeed irreducible in Z[√(pq)].\n\nAlternatively, perhaps we can use the Legendre symbol condition. Since (q/p) = -1, q is not a quadratic residue mod p. Maybe this implies that q remains prime in some ideal factorization, which could relate to the structure of the ring.\n\nAnother approach: Consider the ring Z[√(pq)] and its ideal class group. If we can show that the class number is greater than 1, then it's not a UFD. To do this, we might need to use the conditions on p and q. Given p ≡1 mod4 and (q/p)=-1, perhaps these conditions contribute to the Minkowski bound or other class number calculations.\n\nAlternatively, use the fact that in a UFD, every irreducible is prime. So if we can find an irreducible element that is not prime, then the ring is not a UFD. An element is prime if whenever it divides a product, it divides one of the factors. If we can find an irreducible that does not satisfy this, then we're done.\n\nSuppose we take the element √(pq). If √(pq) is irreducible, then check if it's prime. If √(pq) divides ab, does it divide a or b? Suppose √(pq) divides (a + b√(pq))(c + d√(pq)). Not sure. Alternatively, consider that √(pq) divides pq = p*q. If √(pq) were prime, then it would have to divide p or q. But p and q are primes in Z, but in Z[√(pq)], they might factor. However, if p and q are irreducible, then √(pq) divides p*q but doesn't divide p or q, hence not prime.\n\nBut we need to ensure that √(pq) is irreducible. Suppose √(pq) factors as αβ. Then N(α)N(β) = N(√(pq)) = -pq. So possible norms are ±1, ±pq. If N(α) = ±1, then α is a unit. Similarly for β. So if √(pq) factors, one of the factors must have norm ±1, hence a unit. Therefore, √(pq) is irreducible.\n\nThus, if √(pq) is irreducible but not prime, then the ring is not a UFD. To show it's not prime, as above, it divides p*q but doesn't divide p or q. So need to show that √(pq) doesn't divide p or q in Z[√(pq)].\n\nAssume √(pq) divides p. Then there exists α = a + b√(pq) such that α * √(pq) = p. Compute α * √(pq) = a√(pq) + b pq. This equals p. So:\n\na√(pq) + b pq = p + 0√(pq).\n\nEquate coefficients:\n\na√(pq) = 0√(pq) => a=0,\n\nb pq = p => b = 1/q.\n\nBut b must be integer, and q is a prime, so 1/q is not integer. Hence, no such α exists. Similarly, √(pq) does not divide q. Therefore, √(pq) is not prime, implying Z[√(pq)] is not a UFD.\n\nWait, but this seems too general. The problem includes specific conditions on p and q. Did I use those conditions in this reasoning? Not yet. So maybe there's a mistake here, because the example given by the user (p=5, q=2) fits into this reasoning, but the problem states that under the given conditions (p≡1 mod4 and (q/p)=-1), the ring is not a UFD. However, the above argument doesn't use those conditions. So perhaps the reasoning is incomplete.\n\nAlternatively, maybe under the given conditions, the elements p and q are irreducible, which is necessary for the above argument. If p or q were reducible, then the factorizations might not hold. So we need to ensure that p and q are irreducible in Z[√(pq)]. Let's verify that.\n\nTake p. Suppose p factors as αβ in Z[√(pq)]. Then N(α)N(β) = N(p) = p². So possible norms: 1*p², p*p. If N(α) = p, then α = a + b√(pq) with a² - pq b² = p. Let's see if this equation has solutions.\n\nRearranged: a² - p = pq b². So a² = p(1 + q b²). Since p divides the right-hand side, p divides a². Since p is prime, p divides a. Let a = p k. Then (p k)² - p = pq b² => p² k² - p = pq b² => p(p k² -1) = pq b² => p k² -1 = q b².\n\nSo we have p k² - q b² =1. This is a Pell-type equation. For this equation to have integer solutions, certain conditions must hold. Given that p ≡1 mod4 and (q/p)=-1, maybe this equation has no solutions.\n\nLet's analyze modulo p. The equation p k² - q b² ≡ -q b² ≡1 mod p. So -q b² ≡1 mod p => b² ≡ -1/q mod p. But since (q/p) = -1, q is a non-residue, so -1/q ≡ a residue? Wait, -1 is a residue because p ≡1 mod4. Since p ≡1 mod4, -1 is a quadratic residue. So -1/q ≡ (-1) * q^{-1} mod p. Since q is a non-residue and -1 is a residue, the product is non-residue * residue^{-1}? Wait, q^{-1} modulo p is also a non-residue because the inverse of a non-residue is a non-residue (since the Legendre symbol is multiplicative). So (-1/q) mod p is (-1) * q^{-1} mod p. Since q is a non-residue, q^{-1} is also a non-residue, and (-1) is a residue. So a residue times a non-residue is a non-residue. Hence, -1/q mod p is a non-residue. Therefore, the equation b² ≡ non-residue mod p has no solution. Therefore, no solutions exist. Hence, the equation p k² - q b² =1 has no integer solutions. Therefore, p cannot be written as a product of two non-units, hence p is irreducible. Similarly, q is irreducible.\n\nTherefore, in Z[√(pq)], both p and q are irreducible elements, and we have pq = (√(pq))², giving two distinct factorizations. Therefore, the ring is not a UFD.\n\nThe key step was showing that p and q are irreducible, which relied on the conditions p ≡1 mod4 and (q/p)=-1. Specifically, the equation derived from assuming p factors leads to a contradiction modulo p because (q/p)=-1 implies the necessary quadratic congruence has no solution.\n\nThus, under the given assumptions, Z[√(pq)] is not a UFD because we have elements with multiple distinct factorizations into irreducibles.",
    "Original_Problem": "Assumption: \n$p$ is a prime number,\n$p \\equiv 1 \\pmod{4}$,\n$q$ is a prime number,\n$\\left( \\frac{q}{p} \\right) = -1$ (Legendre symbol),\n$\\mathbf{Z}[\\sqrt{pq}]$ is the ring of integers under consideration.\nproblem:\nShow that $\\mathbf{Z}[\\sqrt{pq}]$ is not a UFD.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: $p$ is a prime number,\nAssumption 2: $p \\equiv 1 \\pmod{4}$,\nAssumption 3: $q$ is a prime number,\nAssumption 4: $\\left( \\frac{q}{p} \\right) = -1$ (Legendre symbol),\nAssumption 5: $\\mathbf{Z}[\\sqrt{pq}]$ is the ring of integers under consideration.\nProblem:\nShow that $\\mathbf{Z}[\\sqrt{pq}]$ is not a UFD.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$\\left(\\frac{p}{q}\\right) = \\left(\\frac{q}{p}\\right) = -1.$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: $p$ is a prime number,\nAssumption 2: $p \\equiv 1 \\pmod{4}$,\nAssumption 3: $q$ is a prime number,\nAssumption 4: $\\left( \\frac{q}{p} \\right) = -1$ (Legendre symbol),\nAssumption 5: $\\mathbf{Z}[\\sqrt{pq}]$ is the ring of integers under consideration.\nAssumption 6: $$\\left(\\frac{p}{q}\\right) = \\left(\\frac{q}{p}\\right) = -1.$$\nProblem:\nShow that $\\mathbf{Z}[\\sqrt{pq}]$ is not a UFD."
}