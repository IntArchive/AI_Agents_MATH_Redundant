{
    "Link_API": "https://api.stackexchange.com/2.3/questions/287957",
    "Title": "When is $(p - 1)! + 1$ a power of $p$?",
    "Score": 22,
    "Category": "Chứng minh",
    "Tags": "number-theory, elementary-number-theory",
    "Link": "https://math.stackexchange.com/questions/287957/when-is-p-1-1-a-power-of-p",
    "Content": "A friend asked me this question: If $p$ is a prime, prove that $(p - 1)! + 1$ is a power of $p$ if and only if $p = 2, 3$ or $5$. Clearly one direction is obvious, namely that $p=2,3,5$ implies $(p - 1)! + 1$ is a power of $p$. The other direction is not clear to me. Since by Wilson's theorem $p$ divides $(p - 1)! + 1$ so we need to show that if there are no other prime factors then $p=2,3,5$. Can someone give me a hint for establishing this? Thanks",
    "AcceptedAnswer": "Let $p^k - 1 = (p-1)!$. Cancel the factor of $(p-1)$, we get\n$$p^{k-1} + \\cdots + 1 = (p-2)!$$\nNow consider mod $p-1$ to get information about $k$. When can the equality ever hold?",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \n$p$ is a prime number,\n$(p - 1)! + 1$ is a power of $p$.\nProblem: \nProve that $(p - 1)! + 1$ is a power of $p$ if and only if $p = 2, 3,$ or $5$.\n###END_OF_FORMAT###",
    "reasoning_create_structured_problem": "Okay, let me try to work through this problem. So the question is: When is (p - 1)! + 1 a power of p? And we need to prove that this happens if and only if p is 2, 3, or 5. \n\nFirst, let's recall Wilson's Theorem, which states that if p is a prime, then (p - 1)! ≡ -1 mod p. That means (p - 1)! + 1 is divisible by p. So the problem is saying that this number, which we know is a multiple of p, is actually a power of p itself. So we need to find primes p where (p - 1)! + 1 = p^k for some integer k ≥ 1.\n\nThe user mentioned that one direction is clear: for p = 2, 3, 5, we can check directly. Let's verify that. For p=2: (1)! +1 = 1 +1 = 2, which is 2^1. For p=3: (2)! +1 = 2 +1 = 3, which is 3^1. For p=5: (4)! +1 = 24 +1 =25, which is 5^2. So those work. \n\nNow the other direction: suppose (p - 1)! +1 is a power of p, then p must be 2,3,5. Let's think about how to approach this. Since (p - 1)! +1 = p^k, we can rearrange to get (p - 1)! = p^k -1. So p^k ≡ 1 mod (p - 1)! +1? Wait, maybe not. Alternatively, since (p - 1)! ≡ -1 mod p, and we want (p - 1)! +1 ≡ 0 mod p, which we already know. But we need more than divisibility; it needs to be exactly equal to some power of p.\n\nPerhaps we can analyze the equation (p - 1)! +1 = p^k. Let's take logarithms? Not sure. Maybe for larger primes, (p - 1)! grows much faster than p^k, so we can bound p. Let's try small primes first. Let's check p=7: (6)! +1 =720 +1=721. Is 721 a power of 7? 7^3=343, 7^4=2401. 721 is between 7^3 and 7^4, so no. Next p=7: 721=7*103, which is not a power. Similarly p=11: 10! +1=3628800 +1=3628801. Is this a power of 11? 11^5=161051, 11^6=1771561, which is way smaller. So 3628801 is way bigger. So not a power.\n\nTherefore, maybe only small primes satisfy this. So perhaps we can check primes up to a certain point and then use inequalities to show that beyond p=5, (p -1)! +1 is larger than p^2 but not a power. Wait, for p=5, (4)! +1=25=5^2. For p=7, we saw it's 721, which is 7^3=343, 7^4=2401. So 721 is between 7^3 and 7^4. So it's not a power. Similarly for p=11, it's way bigger.\n\nBut how do we formalize this? Let's think about the growth rates. The factorial function grows faster than exponential functions. For example, (p -1)! grows super-exponentially, whereas p^k grows exponentially with k. So for a given p, if we can find a k such that p^k = (p -1)! +1, but beyond a certain p, (p -1)! will be way too large for any k. So maybe for primes larger than 5, (p -1)! +1 is larger than p^2 but not a power of p.\n\nAlternatively, perhaps using modular arithmetic. For example, consider modulo higher powers of p. Wait, but (p -1)! is congruent to -1 mod p by Wilson's theorem, but modulo p^2, (p -1)! can be congruent to -1 + kp mod p^2 for some k. There's a result called Wilson primes where (p -1)! ≡ -1 mod p^2, but these are rare (only known ones are 5, 13, 563). But maybe this helps? For example, if (p -1)! +1 is a power of p, then (p -1)! +1 ≡ 0 mod p^2. So p^2 divides (p -1)! +1. But from Wilson's theorem, we know p divides (p -1)! +1. So if p^2 divides it, then (p -1)! ≡ -1 mod p^2. But this is only true for Wilson primes. Since known Wilson primes are 5, 13, 563, but 13 and 563 are larger. Let's check p=5: (4)! +1=25=5^2, which works. For p=13: (12)! +1. Let's see: 12! is 479001600. Adding 1 gives 479001601. Is this a power of 13? 13^6=4826809, 13^7=62748517, 13^8=815730721, which is larger than 479001601. So 479001601 is between 13^7 and 13^8, so not a power. So even though 13 is a Wilson prime, (12)! +1 is not a power of 13. Hence, even if p is a Wilson prime, it might not satisfy the equation. Therefore, perhaps only p=5 is both a Wilson prime and satisfies (p -1)! +1 is a power of p.\n\nTherefore, the key is to check primes up to a certain point where factorial doesn't get too big. Let's try to formalize this.\n\nSuppose p ≥ 7. Let's see what's the minimal k such that p^k > (p -1)! +1. For p=7, p^4=2401, and 6! +1=721 <2401. So 7^4=2401 >721, but 7^3=343 <721. So p=7, (p -1)! +1=721=7*103, which is not a power. Similarly for p=11, 10! +1 is 3628801. Let's see p^5=161051, p^6=1771561, p^7=19487171. So 3628801 is between p^6 and p^7, not a power.\n\nTherefore, we can argue that for p ≥7, (p -1)! +1 is between p^{k} and p^{k+1} for some k, but not equal to any power. To show this, maybe induction or inequalities.\n\nAlternatively, let's compare (p -1)! and p^{k}. For p ≥7, let's check for k=2: p^2. For p=7: 49 vs 720. So (p -1)! =720 > p^2=49. So (p -1)! +1 > p^2. So if we can show that (p -1)! +1 < p^{k} for some k, but the problem is that factorial grows faster than any exponential. Wait, but for fixed p, as k increases, p^{k} grows exponentially. But (p -1)! is fixed once p is fixed. So for each prime p ≥7, (p -1)! +1 is a fixed number, and p^k grows with k. Therefore, there exists a k such that p^k > (p -1)! +1, but the minimal such k may make the number not a power. But we need to show that (p -1)! +1 is not a power of p.\n\nAlternatively, suppose that (p -1)! +1 = p^k. Then, (p -1)! = p^k -1. Let's factor p^k -1. For example, p^k -1 factors into (p -1)(p^{k-1} + p^{k-2} + ... +1). So (p -1)! = (p -1) * [p^{k-1} + ... +1]. Therefore, cancelling (p -1) from both sides (since p ≥2, (p -1) is at least 1), we get (p -2)! = p^{k-1} + p^{k-2} + ... +1.\n\nSo now we have (p -2)! = sum_{i=0}^{k-1} p^i.\n\nThis sum is a geometric series, which equals (p^k -1)/(p -1). So (p -2)! = (p^k -1)/(p -1). Let's rearrange: (p -2)! * (p -1) = p^k -1. But the left side is (p -1)! = p^k -1, which brings us back. Hmm, that seems circular.\n\nAlternatively, let's write the equation as (p -2)! = (p^k -1)/(p -1). For primes p ≥7, let's analyze this.\n\nTake p=7: (7 -2)! =5!=120. The right side would be (7^k -1)/6. So we have 120 = (7^k -1)/6 → 7^k -1=720 →7^k=721. But 7^3=343, 7^4=2401, so no solution. Similarly for p=11: (11 -2)! =9! =362880. Then (11^k -1)/10=362880 →11^k=3628801. Check 11^6=1771561, 11^7=19487171. 3628801 is between them, so not a power. Therefore, no solution.\n\nAlternatively, for general p ≥7, suppose that (p -2)! = (p^k -1)/(p -1). The right-hand side is (p^k -1)/(p -1) = 1 + p + p^2 + ... + p^{k-1}. So we have (p -2)! being the sum of a geometric series. Now, since p ≥7, (p -2)! is quite large. Let's see for p=7: sum is 1 +7 +49 +343=400, but 5!=120 <400. Wait, but in reality, when p=7, the sum would need to be 120, but 1 +7 +49=57 <120, 1 +7 +49 +343=400 >120. So no solution. Similarly, for p=11: sum would need to be 9!=362880. The sum 1 +11 +121 +1331 +... up to k terms. Let's see how many terms needed to reach ~362880. 11^5=161051, sum up to 11^4:1+11+121+1331+14641=16105. Way smaller than 362880. Continuing: 11^5=161051, sum becomes 16105+161051=177156. Still less than 362880. Next term:11^6=1771561, sum=177156+1771561=1948717, which is way larger. So no sum equals 362880. Hence, no solution.\n\nTherefore, the equation (p -2)! = sum_{i=0}^{k-1} p^i has no solution for primes p ≥7. Therefore, the only solutions are p=2,3,5.\n\nAnother approach: For p ≥7, (p -1)! +1 is congruent to 0 modulo p, but we can check modulo higher powers. For example, modulo p^2. Suppose that (p -1)! +1 ≡0 mod p^2. This would mean that (p -1)! ≡-1 mod p^2. Primes for which this holds are called Wilson primes. The known Wilson primes are 5, 13, 563. However, even if p is a Wilson prime, (p -1)! +1 must be a power of p. For p=5, it works as 25=5^2. For p=13: (12)! +1=479001601. Let's see if this is a power of 13. 13^7=62748517, 13^8=815730721. 479001601 is between them, so not a power. Similarly for 563, which is way too large. Therefore, even among Wilson primes, only p=5 satisfies the condition.\n\nThus, combining all these observations, the only primes where (p -1)! +1 is a power of p are 2,3,5.\n\nTo formalize the proof, one could proceed by checking small primes, then for primes p ≥7, show that (p -1)! +1 lies strictly between p^2 and p^3 (for example), and since it's not equal to any higher power, the only solutions are p=2,3,5.\n\nAnother angle: Using inequalities. For p ≥7, (p -1)! > p^3. Let's verify for p=7: 6!=720, 7^3=343. Yes, 720>343. For p=11: 10!=3628800, 11^3=1331. So indeed, (p -1)! grows much faster than p^3. Therefore, (p -1)! +1 > p^3. But we need to see if it's a power of p. Suppose that (p -1)! +1 = p^k. For p ≥7, since (p -1)! +1 > p^3, k must be at least 4. But p^4 for p=7 is 2401, while 6! +1=721 <2401. So 721=7*103, not a power. For p=11, 10! +1=3628801. 11^6=1771561, 11^7=19487171. So 3628801 is between 11^6 and 11^7, not a power.\n\nThus, for p ≥7, (p -1)! +1 is between p^3 and p^4 (for p=7), and between higher powers for larger p, but since factorial grows faster, it's not a pure power. Hence, no solutions for p ≥7.\n\nTherefore, the only primes are 2,3,5.",
    "Original_Problem": "Assumption: \n$p$ is a prime number,\n$(p - 1)! + 1$ is a power of $p$.\nProblem: \nProve that $(p - 1)! + 1$ is a power of $p$ if and only if $p = 2, 3,$ or $5$.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: $p$ is a prime number,\nAssumption 2: $(p - 1)! + 1$ is a power of $p$.\nProblem: \nProve that $(p - 1)! + 1$ is a power of $p$ if and only if $p = 2, 3,$ or $5$.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$p^{k-1} + \\cdots + 1 = (p-2)!$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: $p$ is a prime number,\nAssumption 2: $(p - 1)! + 1$ is a power of $p$.\nAssumption 3: $$p^{k-1} + \\cdots + 1 = (p-2)!$$\nProblem: \nProve that $(p - 1)! + 1$ is a power of $p$ if and only if $p = 2, 3,$ or $5$."
}