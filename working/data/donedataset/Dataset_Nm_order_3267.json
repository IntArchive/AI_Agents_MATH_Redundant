{
    "Link_API": "https://api.stackexchange.com/2.3/questions/3910673",
    "Title": "show this $\\prod_{i=1}^{\\frac{p-1}{2}}a_{i}\\equiv\\prod_{i=1}^{\\frac{p-1}{2}}b_{i}\\pmod {p^3}$",
    "Score": 12,
    "Category": "Chứng minh",
    "Tags": "number-theory",
    "Link": "https://math.stackexchange.com/questions/3910673/show-this-prod-i-1-fracp-12a-i-equiv-prod-i-1-fracp-12b-i",
    "Content": "let $p=8k+1$ prime number, show that there exist two set $A=\\{a_{1},a_{2},\\cdots,a_{\\frac{p-1}{2}}\\},B=\\{b_{1},b_{2},\\cdots,b_{\\frac{p-1}{2}}\\}$ such that $A\\bigcup B=\\{1,2,3,\\cdots,p-1\\},A\\bigcap B=\\varnothing $ ,and $$\\prod_{i=1}^{\\frac{p-1}{2}}a_{i}\\equiv\\prod_{i=1}^{\\frac{p-1}{2}}b_{i}\\pmod {p^3}$$ This problem should be treated with the knowledge of quadratic residue.",
    "AcceptedAnswer": "This problem appeared in Kvant (M2300). I guess it is more classical than that.\nI will quote the construction given in the solution. Let $p-1=4k$ . Let us note that the number of odd quadratic residues is equal to the number of even quadratic residues; same goes for non residues. This is because $x$ and $p-x$ have the same Legendre symbol; $-1$ is a square for $p\\equiv 1 \\pmod{4}$ . There are $2k$ nonzero quadratic residues and $2k$ quadratic residues.\nWe denote by $a_1, \\ldots, a_k$ the odd quadratic residues, $b_1=p-a_1,\\ldots, b_k=p-a_k$ the even quadratic residues, $c_1,\\ldots, c_k$ the odd quadratic nonresidues, and finally $d_1=p-c_1,\\ldots, d_k=p-c_k$ the even quadratic nonresidues. The claim is we can take $\\mathcal{A}=\\{a_1,\\ldots, a_k, d_1,\\ldots, d_k\\}$ and $\\mathcal{B}=\\{b_1,\\ldots, b_k, c_1,\\ldots, c_k\\}$ . Note that this is consistent with the above numerical constructions given in the comments. Let $A=a_1\\ldots a_k$ and similarly we define $B,C,D$ . Let us obtain first a relation between $A$ and $B$ . Note that $2^{2k}AB$ is a product of all even numbers which are quadratic residues, but this time between $1$ and $2p-1$ . These can only be $b_1, b_2,\\ldots, b_k, p+a_1, \\ldots, p+a_k$ in some order . Thus $$2^{2k} AB=\\prod_{i=1}^k (p-a_i)(p+a_i)=\\prod_{i=1}^k (p^2-a_i^2)\\equiv A^2\\left(1-p^2\\sum_{i=1}^k \\frac{1}{a_i^2}\\right) \\pmod{p^3}.$$ Now note that $2\\displaystyle \\sum_{i=1}^k \\frac{1}{a_i^2}\\equiv \\sum_{i=1}^{k} \\frac{1}{a_i^2}+\\sum_{i=1}^{k} \\frac{1}{b_i^2}\\pmod{p}$ . If we invert a quadratic residues it is still a quadratic residue thus $\\displaystyle \\sum_{i=1}^{k} \\frac{1}{a_i^2}+\\sum_{i=1}^{k} \\frac{1}{b_i^2}\\equiv \\sum_{i=1}^k a_i^2+\\sum_{i=1}^k b_i^2\\pmod{p}$ . If we take a primitive root $g$ mod $p$ the quadratic residues are $g_i^{2j}$ for $j=0,\\ldots, 2k-1$ . Thus $$\\sum_{i=1}^k a_i^2+\\sum_{i=1}^k b_i^2\\equiv \\sum_{j=0}^{2k-1} (g^4)^{j}=\\cfrac{g^{8k}-1}{g^4-1}\\equiv 0\\pmod{p} $$ since $p>5$ .\nPutting it all together $2^{2k} AB\\equiv A^2 \\pmod{p^3}$ and thus $B\\equiv 2^{-2k} A\\pmod{p^3}$ .\nA similar argument shows that $C\\equiv 2^{2k} D \\pmod{p^3}$ and we are done.",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \n$p$ is a prime number,\n$p$ is equal to $8k + 1$ for some integer $k$.\nProblem:\nShow that there exist two sets $A = \\{a_1, a_2, \\ldots, a_{(p-1)/2}\\}$ and $B = \\{b_1, b_2, \\ldots, b_{(p-1)/2}\\}$ such that $A \\cup B = \\{1, 2, \\ldots, p - 1\\}$, $A \\cap B = \\emptyset$, and $$\\prod_{i=1}^{(p-1)/2} a_i \\equiv \\prod_{i=1}^{(p-1)/2} b_i \\pmod{p^3}.$$\n###",
    "reasoning_create_structured_problem": "Okay, let's try to parse this problem. So the user wants me to structure the given Math Stack Exchange question into the specified format. Let me start by reading the original problem carefully.\n\nThe title is: \"show this $\\prod_{i=1}^{\\frac{p-1}{2}}a_{i}\\equiv\\prod_{i=1}^{\\frac{p-1}{2}}b_{i}\\pmod {p^3}$\"\n\nThe question body says: let $p=8k+1$ be a prime number. We need to show that there exist two sets $A=\\{a_{1},a_{2},\\cdots,a_{\\frac{p-1}{2}}\\}$ and $B=\\{b_{1},b_{2},\\cdots,b_{\\frac{p-1}{2}}\\}$ such that their union is $\\{1,2,3,\\cdots,p-1\\}$, their intersection is empty, and the product of the elements in $A$ is congruent to the product of the elements in $B$ modulo $p^3$. The problem mentions it should be treated with the knowledge of quadratic residues.\n\nFirst, I need to extract the assumptions. Let's list each condition separately. \n\n1. The prime number $p$ is of the form $8k+1$, so $p \\equiv 1 \\mod 8$. \n2. There exist two sets $A$ and $B$ each of size $\\frac{p-1}{2}$.\n3. The union of $A$ and $B$ is the set $\\{1, 2, ..., p-1\\}$.\n4. The intersection of $A$ and $B$ is empty.\n5. The product of elements in $A$ is congruent to the product in $B$ modulo $p^3$.\n6. The problem involves quadratic residues.\n\nWait, the problem mentions to use quadratic residues, but is that an assumption or part of the problem statement? The user example included assumptions like \"$n$ is divisible by 7\", which is part of the problem's given conditions. So here, the fact that quadratic residues should be used might be a hint but isn't an assumption. The problem statement just says to show the existence of such sets with the congruence, using quadratic residue knowledge.\n\nSo the main assumptions are:\n\n- $p$ is a prime number such that $p = 8k + 1$.\n- $A$ and $B$ are sets partitioning $\\{1, 2, \\ldots, p-1\\}$ into two equal parts (each of size $(p-1)/2$).\n- The products of their elements are congruent modulo $p^3$.\n\nI need to make sure each assumption is a single condition applied to one object. Let's break them down:\n\n1. $p$ is a prime number.\n2. $p = 8k + 1$ for some integer $k$.\n3. $A$ and $B$ are subsets of $\\{1, 2, \\ldots, p-1\\}$.\n4. The union of $A$ and $B$ is $\\{1, 2, \\ldots, p-1\\}$.\n5. The intersection of $A$ and $B$ is empty.\n6. The size of $A$ is $(p - 1)/2$.\n7. The size of $B$ is $(p - 1)/2$.\n8. The product of elements in $A$ is congruent to the product of elements in $B$ modulo $p^3$.\n\nWait, but some of these can be combined. For example, since $A$ and $B$ are a partition of $\\{1, ..., p-1\\}$, their sizes must add up to $p-1$, so if each has size $(p-1)/2$, that's equivalent. But the problem states that both $A$ and $B$ have size $(p-1)/2$, so maybe each of those is a separate assumption.\n\nBut in the example given, the user listed \"$n$ is an integer\" and \"$n$ is divisible by 7\" as separate assumptions. So here, similarly, each condition should be on a separate line. So:\n\nAssumptions:\n- $p$ is a prime number.\n- $p = 8k + 1$ for some integer $k$.\n- $A$ and $B$ are subsets of $\\{1, 2, \\ldots, p - 1\\}$.\n- $A \\cup B = \\{1, 2, \\ldots, p - 1\\}$.\n- $A \\cap B = \\emptyset$.\n- The size of $A$ is $(p - 1)/2$.\n- The size of $B$ is $(p - 1)/2$.\n\nBut wait, the problem states \"there exist two sets A and B such that...\" so the existence is part of the problem, not the assumption. The assumptions are the given conditions. So in the example, the original problem had to be restructured, so the user's formatted problem included \"$n$ is an integer\" and \"$n$ is divisible by 7\" as assumptions, even though the original problem said \"for every integer n\". Wait, in the example, the original problem was \"for every integer n\", but the formatted problem had \"n is an integer, n is divisible by 7\". Wait, that seems incorrect. Wait, let me check the example again.\n\nOriginal problem in the example: \"Prove that for every integer n, the number A(n) = ... is divisible by 91.\"\n\nFormatted problem:\nAssumption: n is an integer, n is divisible by 7. Problem: Prove that A(n) is divisible by 91.\n\nWait, but the original problem says \"for every integer n\", but the formatted problem adds that n is divisible by 7 as an assumption. That seems like the user might have made a mistake. Because the original problem says \"for every integer n\", but the formatted problem's assumption restricts n to be divisible by 7. That might be an error in the example. But perhaps the user intended to modify the original problem? Wait, maybe the example is not from the same original problem. Maybe the user provided an example where the original problem had some conditions, and the formatted problem extracted the assumptions. But in the example, the original problem's assumption was that n is any integer, but the formatted problem added that n is divisible by 7. That seems contradictory. Maybe the example is hypothetical. Regardless, I need to follow the instruction: \"filter the unrelated information and structure that problem as the following format.\"\n\nIn the current problem, the original question states: let p = 8k + 1 prime number, show that there exist two sets A and B with union {1,...,p-1}, intersection empty, and products congruent modulo p^3. So the assumptions are:\n\n- p is a prime number.\n- p is of the form 8k + 1 (i.e., p ≡ 1 mod 8).\n- A and B are subsets of {1, ..., p-1}.\n- A ∪ B = {1, ..., p-1}.\n- A ∩ B = ∅.\n- |A| = |B| = (p - 1)/2.\n\nBut since the problem says \"there exist two sets...\", those existence conditions are part of the conclusion. Wait, no, the problem is to show that such sets exist under the given conditions. Therefore, the given conditions (assumptions) are:\n\n- p is a prime number.\n- p = 8k + 1 for some integer k.\n\nThe rest (the existence of A and B with those properties) is what needs to be proven. So the user's example had the original problem as \"for every integer n\", but the formatted problem's assumption was that n is an integer and divisible by 7, which might be incorrect. But perhaps in that example, the original problem had n being divisible by 7, but the user restructured it.\n\nWait, looking again at the example:\n\nOriginal problem: \"Prove that for every integer n, the number A(n) = 5^n(5^n +1) -6^n(3^n +2^n) is divisible by 91.\"\n\nFormatted problem:\nAssumption: n is an integer, n is divisible by 7. Problem: Prove that A(n) is divisible by 91.\n\nThis seems incorrect because the original problem's assumption is that n is any integer, but the formatted problem added an assumption that n is divisible by 7, which was not in the original. This suggests that maybe the user made a mistake in the example, or perhaps the original problem had additional constraints. Alternatively, maybe the user intended to create a modified problem for the example. Therefore, perhaps in the current problem, I should only include the given conditions as assumptions, and the rest is part of the problem.\n\nTherefore, the original problem here says: let p =8k+1 prime number, show that there exist two sets A and B with the given properties. So the assumptions are:\n\n- p is a prime number.\n- p =8k+1 for some integer k.\n\nThe problem is to show the existence of the sets A and B with the specified properties. So in the formatted problem, the assumptions are p is prime and p=8k+1, and the problem is to show the existence of A and B with the given properties (union, intersection, product congruence).\n\nBut the example also included assumptions about the problem's variables, even if they were part of the \"for all\" statement. So maybe in this case, the formatted problem's assumptions should include:\n\n- p is a prime number.\n- p ≡1 mod 8 (i.e., p=8k+1).\n\nAnd the problem is to show the existence of the two sets with the product congruence modulo p^3.\n\nTherefore, the formatted problem would be:\n\nAssumption:\np is a prime number,\np is congruent to 1 modulo 8.\nProblem:\nShow that there exist two sets $A=\\{a_{1},a_{2},\\cdots,a_{\\frac{p-1}{2}}\\}$ and $B=\\{b_{1},b_{2},\\cdots,b_{\\frac{p-1}{2}}\\}$ such that $A \\cup B = \\{1,2,3,\\cdots,p-1\\}$, $A \\cap B = \\emptyset$, and $$\\prod_{i=1}^{\\frac{p-1}{2}}a_{i}\\equiv\\prod_{i=1}^{\\frac{p-1}{2}}b_{i}\\pmod {p^3}.$$\n\nBut the user's example included the problem statement with some variables in the assumptions. Wait, in the example, the original problem was for every integer n, but the formatted problem added that n is divisible by 7, which restricts it. So perhaps the user wants to list all conditions on the variables, even if they are part of the problem statement. So here, since the problem says \"let p=8k+1 prime number\", the assumptions are p is prime and p=8k+1. The rest (about the sets A and B) is what needs to be proven. Therefore, the problem part should state the existence of such sets with the given properties.\n\nTherefore, the correct formatted problem is:\n\nAssumption:\np is a prime number,\np is of the form $8k + 1$ for some integer $k$.\nProblem:\nShow that there exist two sets $A$ and $B$ partitioning $\\{1, 2, \\ldots, p-1\\}$ into two equal parts such that $$\\prod_{a \\in A} a \\equiv \\prod_{b \\in B} b \\pmod{p^3}.$$\n\nBut to match the exact wording, let's check the original problem's phrasing: \"show that there exist two set A=..., B=... such that A ∪ B = {1,...,p-1}, A ∩ B = ∅, and the product congruence holds.\"\n\nTherefore, in the problem statement, we need to include all those conditions. So the problem part should list all the requirements for A and B.\n\nSo the final formatted problem should be:\n\nAssumption:\np is a prime number,\np is equal to $8k + 1$ for some integer $k$.\nProblem:\nShow that there exist two sets $A = \\{a_1, a_2, \\ldots, a_{(p-1)/2}\\}$ and $B = \\{b_1, b_2, \\ldots, b_{(p-1)/2}\\}$ such that $A \\cup B = \\{1, 2, \\ldots, p - 1\\}$, $A \\cap B = \\emptyset$, and $$\\prod_{i=1}^{(p-1)/2} a_i \\equiv \\prod_{i=1}^{(p-1)/2} b_i \\pmod{p^3}.$$\n\nYes, that seems accurate. Each assumption is a separate line, addressing one property of one object. The problem is to show the existence of such sets with the given properties.",
    "Original_Problem": "Assumption: \n$p$ is a prime number,\n$p$ is equal to $8k + 1$ for some integer $k$.\nProblem:\nShow that there exist two sets $A = \\{a_1, a_2, \\ldots, a_{(p-1)/2}\\}$ and $B = \\{b_1, b_2, \\ldots, b_{(p-1)/2}\\}$ such that $A \\cup B = \\{1, 2, \\ldots, p - 1\\}$, $A \\cap B = \\emptyset$, and $$\\prod_{i=1}^{(p-1)/2} a_i \\equiv \\prod_{i=1}^{(p-1)/2} b_i \\pmod{p^3}.$$",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: $p$ is a prime number,\nAssumption 2: $p$ is equal to $8k + 1$ for some integer $k$.\nProblem:\nShow that there exist two sets $A = \\{a_1, a_2, \\ldots, a_{(p-1)/2}\\}$ and $B = \\{b_1, b_2, \\ldots, b_{(p-1)/2}\\}$ such that $A \\cup B = \\{1, 2, \\ldots, p - 1\\}$, $A \\cap B = \\emptyset$, and $$\\prod_{i=1}^{(p-1)/2} a_i \\equiv \\prod_{i=1}^{(p-1)/2} b_i \\pmod{p^3}.$$",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$\\sum_{i=1}^k a_i^2+\\sum_{i=1}^k b_i^2\\equiv \\sum_{j=0}^{2k-1} (g^4)^{j}=\\cfrac{g^{8k}-1}{g^4-1}\\equiv 0\\pmod{p} $$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: $p$ is a prime number,\nAssumption 2: $p$ is equal to $8k + 1$ for some integer $k$.\nAssumption 3: $$\\sum_{i=1}^k a_i^2+\\sum_{i=1}^k b_i^2\\equiv \\sum_{j=0}^{2k-1} (g^4)^{j}=\\cfrac{g^{8k}-1}{g^4-1}\\equiv 0\\pmod{p} $$\nProblem:\nShow that there exist two sets $A = \\{a_1, a_2, \\ldots, a_{(p-1)/2}\\}$ and $B = \\{b_1, b_2, \\ldots, b_{(p-1)/2}\\}$ such that $A \\cup B = \\{1, 2, \\ldots, p - 1\\}$, $A \\cap B = \\emptyset$, and $$\\prod_{i=1}^{(p-1)/2} a_i \\equiv \\prod_{i=1}^{(p-1)/2} b_i \\pmod{p^3}.$$"
}