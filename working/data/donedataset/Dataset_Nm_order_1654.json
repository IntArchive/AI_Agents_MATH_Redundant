{
    "Link_API": "https://api.stackexchange.com/2.3/questions/46733",
    "Title": "Is there a way to prove $\\int {x^n e^x dx} = e^x \\sum_{k = 0}^n {( - 1)^k \\frac{{n!}}{{(n-k)!}}x^{n-k} } + C$ combinatorially?",
    "Score": 19,
    "Category": "Chứng minh",
    "Tags": "calculus, combinatorics, integration",
    "Link": "https://math.stackexchange.com/questions/46733/is-there-a-way-to-prove-int-xn-ex-dx-ex-sum-k-0n-1k-frac",
    "Content": "In How to integrate $\\int x^n e^x dx$? , it is shown that $$\\int {x^n e^x dx}  = e^x \\sum_{k = 0}^n ( - 1)^k \\frac{n!}{(n-k)!}x^{n-k}   + C.$$ Since $\\frac{n!}{(n-k)!}$ is $P(n,k)$, the number of $k$-permutations of $n$ objects , the right-hand side of this formula smells like the inclusion-exclusion principle to me.  In fact, the right-hand side is almost the formula for the number of derangements on $n$ elements, which is one of the classic examples of the use of the inclusion-exclusion principle. This would seem to imply that there is some way to interpret $\\int x^n e^x dx$ combinatorially such that the right-hand side formula falls out immediately.  However, I haven't been able to see it.  (I don't even know much about combinatorial interpretations of indefinite integration - or even if there are known ways to do so in special cases like this one.) Does anyone know or see a way to prove \n$$\\int {x^n e^x dx}  = e^x \\sum_{k = 0}^n ( - 1)^k \\frac{n!}{(n-k)!}x^{n-k}   + C$$\ncombinatorially? Added: To clarify, I am looking for a proof that shows that the left- and right-hand sides of the formula count the same thing.  That, to me, is a combinatorial proof .",
    "AcceptedAnswer": "Here is a solution I quite like which uses inclusion exclusion on a integral over an $n$ -dimensional simplex. First, it is much nicer to consider the definite integral $\\int_0^x y^n e^{y} dy$ which will only be off by a constant.  (Which we don't care about anyway) Consider $$\\int_{0}^{x}\\int_{0}^{t_{1}}\\cdots\\int_{0}^{t_{n}}e^{-t_{n+1}}dt_{n+1}dt_{n}\\cdots dt_{1}.$$ This is $e^{-t_{n+1}}$ integrated over the $n$ -dimesional simplex. (Only one coordinate is integrated) By Cauchy's formula for repeated integration , this is the same as $$\\frac{1}{n!}\\int_{0}^{x}(x-y)^{n}e^{-y}dy=\\frac{1}{n!}e^{-x}\\int_{0}^{x}y{}^{n}e^{y}dy.$$ Now, we need only show that $$\\int_{0}^{x}\\int_{0}^{t_{1}}\\cdots\\int_{0}^{t_{n}}e^{x-t_{n+1}}dt_{n+1}dt_{n}\\cdots dt_{1}=e^{x}\\sum_{k=0}^{n}\\frac{(-1)^{n-k}}{k!}x^{k}+C.$$ (A constant will arise since the integrand is not $0$ at $0$ ) But this follows from splitting up the simplex and using inclusion exclusion.  Here is why:  Integrating $e^{x-t_1}$ over the cube gives $x^ke^x$ .  Since the cube can be divided into $k!$ simplicies we get $\\frac{x^k}{k!}e^x$ .  Now we need to subtract off a correction factor based on the $n-1$ -dimensional simplicies, and so on. Hope that helps,",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \nThe problem involves an indefinite integral of the function $x^n e^x$,\nThe solution is expressed using permutations (k-permutations of n objects),\nThe right-hand side of the equation resembles the structure of the inclusion-exclusion principle,\nA combinatorial proof is sought, where both sides count the same set.\nProblem: \nProve combinatorially that  \n$$\\int {x^n e^x \\, dx}  = e^x \\sum_{k = 0}^n ( - 1)^k \\frac{n!}{(n-k)!}x^{n-k}   + C.$$\n###",
    "reasoning_create_structured_problem": "Okay, let me try to work through this problem. The user wants a combinatorial proof of the integral formula for ∫xⁿeˣ dx. The right-hand side involves a sum with permutations and alternating signs, which reminds them of inclusion-exclusion, like derangements. So they suspect there's a combinatorial interpretation where both sides count the same thing.\n\nFirst, I need to recall what a combinatorial proof usually entails. It's about showing two expressions count the same set in different ways. But here, it's an integral and a sum involving permutations. Integrals aren't combinatorial objects, so maybe the approach is to interpret the integral combinatorially? Or perhaps relate the integral's antiderivative to a generating function?\n\nThe formula given is ∫xⁿeˣ dx = eˣ ∑ₖ₌₀ⁿ (-1)^k P(n,k) x^{n−k} + C. Since P(n,k) is the number of k-permutations, which is n!/(n−k)!. The sum resembles inclusion-exclusion, where each term alternates signs and involves permutations. \n\nIn derangements, we use inclusion-exclusion to count permutations without fixed points: ∑ₖ₌₀^n (-1)^k /k! n! which is similar but not the same. Here, the sum has P(n,k) x^{n−k}. Maybe we can think of generating functions. The integral of xⁿeˣ might be related to generating functions of permutations with some restrictions.\n\nAlternatively, integration by parts is the standard method here. The user wants a combinatorial proof instead of algebraic. Let's think: if integration by parts has a combinatorial interpretation, maybe each term in the sum corresponds to some combinatorial object. For example, each application of integration by parts reduces the exponent of x by 1, which could correspond to arranging or permuting elements step by step. The (-1)^k factor might account for some exclusion, similar to inclusion-exclusion.\n\nWait, the integral ∫xⁿeˣ dx can be approached via the tabular method of integration by parts, which iteratively differentiates xⁿ and integrates eˣ. Each step gives a term (-1)^k P(n,k) x^{n−k} eˣ. So maybe each term in the sum corresponds to a step in this process, and combinatorially, each step represents choosing k elements to \"process\" (differentiate) and permuting them, hence P(n,k), while the remaining x^{n−k} are unprocessed. The alternating sign comes from the integration by parts sign changes.\n\nBut how does that become a combinatorial proof? Maybe considering the integral as a generating function for some combinatorial objects, and the sum as an inclusion-exclusion count. For instance, eˣ is the generating function for sets (since eˣ = ∑ x^k /k!), and xⁿ is the generating function for sequences or something. The product xⁿeˣ could represent combining a sequence of n elements with a set. Then integrating might correspond to some operation on these structures.\n\nAlternatively, in species theory, integration can correspond to pointing or adding a new element. But I'm not sure. Another angle: the right-hand side is eˣ multiplied by a polynomial. Since eˣ is the exponential generating function for the species of sets, maybe the polynomial part is counting some structure related to permutations with signs, which when multiplied by sets gives the generating function for the integral.\n\nWait, the sum ∑ₖ₌₀^n (-1)^k P(n,k) x^{n−k} is similar to n! ∑ (-1)^k x^{n−k}/( (n−k)! ) ), which is n! ∑ (-1)^k x^{m}/m! where m = n−k. That looks like n! times the generating function for derangements, except derangements have ∑ (-1)^k /k! . Hmm. But here, it's ∑ (-1)^k x^{m}/m! multiplied by n!.\n\nIf we consider the generating function for derangements is e^{-x}/(1−x), but I'm not sure. Alternatively, maybe the polynomial is related to the inclusion-exclusion principle applied to some labeled structures.\n\nAlternatively, thinking about the integral as the sum over all possible \"tags\" or \"markings\" in a combinatorial structure. For example, each term in the integral's expansion could correspond to a different way of arranging or marking elements, with inclusion-exclusion accounting for overcounts.\n\nBut honestly, I'm not fully seeing the direct combinatorial interpretation. The key is that the user wants a proof where both sides count the same thing. Maybe the integral counts some weighted structures, and the sum on the right counts them via inclusion-exclusion. For example, the left side could be generating functions for some objects, and the right side is breaking them down via inclusion-exclusion.\n\nAlternatively, think of the integral as the number of ways to perform a certain task, and the right-hand side is calculating that number by considering permutations with certain exclusions. The presence of eˣ suggests that it's related to exponential generating functions, which often count labeled structures. The xⁿ term could be a sequence of n labeled elements, and eˣ is a set. The integral might then correspond to some kind of product structure, but I'm not sure how integration translates combinatorially.\n\nWait, in calculus, integration can be seen as the inverse of differentiation. But combinatorially, differentiation of generating functions corresponds to pointing—selecting a distinguished element. So maybe integration corresponds to the inverse operation, which is \"un-pointing\"? But integrating xⁿeˣ dx isn't straightforward in that interpretation.\n\nAlternatively, consider that the integral is the antiderivative, so it's a function whose derivative is xⁿeˣ. If differentiation has a combinatorial meaning, maybe the antiderivative does too. For example, the derivative of eˣ times the polynomial would involve product rule terms, which could be modeled combinatorially as combining two structures: one that's a set (eˣ) and one that's a permutation-related structure (the polynomial). Each term in the derivative would then correspond to either differentiating the eˣ part (which gives eˣ again) or differentiating the polynomial part (which reduces the power of x and introduces a factor from the permutation).\n\nBut how does that lead to the integral formula? Maybe through recursive application. Each time you integrate by parts, you're handling one element of the permutation, hence the decreasing permutation count. The signs come from moving the derivative from one part to the other, which in combinatorial terms could represent inclusion-exclusion steps.\n\nAlternatively, the integral ∫xⁿeˣ dx can be represented as a sum over all permutations with some conditions, and the inclusion-exclusion principle is used to subtract overcounts, leading to the alternating sum. For example, each term (-1)^k P(n,k) x^{n−k} might correspond to excluding k elements in some way, but I'm not exactly seeing the connection.\n\nAnother thought: The integral ∫xⁿeˣ dx is equal to eˣ times the sum. So maybe the sum is a generating function that, when multiplied by eˣ, accounts for all the terms in the integral. If eˣ is generating sets, then multiplying by the sum (which involves permutations) could be combining sets with permutations, but with inclusion-exclusion adjustments.\n\nAlternatively, using generating functions, the integral could be related to the generating function for some combinatorial class, and the right-hand side is manipulating that generating function via inclusion-exclusion. For example, if xⁿ represents labeled elements and eˣ represents subsets, integrating could correspond to a construction where you build objects by combining these, and the inclusion-exclusion corrects for overlaps.\n\nI'm not entirely sure, but maybe the combinatorial proof involves interpreting each application of integration by parts as a combinatorial operation, where each term in the sum corresponds to a step where you fix certain elements and permute others, with the sign accounting for inclusion or exclusion. The key is that the number of permutations P(n,k) appears, which counts ordered arrangements, and the alternating signs might be subtracting overcounted configurations.\n\nIn the end, the problem is to show that the integral and the given sum with permutations and signs count the same combinatorial object, possibly through generating functions and inclusion-exclusion. The user wants a proof that makes this correspondence explicit, rather than an algebraic derivation via integration by parts.",
    "Original_Problem": "Assumption: \nThe problem involves an indefinite integral of the function $x^n e^x$,\nThe solution is expressed using permutations (k-permutations of n objects),\nThe right-hand side of the equation resembles the structure of the inclusion-exclusion principle,\nA combinatorial proof is sought, where both sides count the same set.\nProblem: \nProve combinatorially that  \n$$\\int {x^n e^x \\, dx}  = e^x \\sum_{k = 0}^n ( - 1)^k \\frac{n!}{(n-k)!}x^{n-k}   + C.$$",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: The problem involves an indefinite integral of the function $x^n e^x$,\nAssumption 2: The solution is expressed using permutations (k-permutations of n objects),\nAssumption 3: The right-hand side of the equation resembles the structure of the inclusion-exclusion principle,\nAssumption 4: A combinatorial proof is sought, where both sides count the same set.\nProblem: \nProve combinatorially that  \n$$\\int {x^n e^x \\, dx}  = e^x \\sum_{k = 0}^n ( - 1)^k \\frac{n!}{(n-k)!}x^{n-k}   + C.$$",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$\\int_{0}^{x}\\int_{0}^{t_{1}}\\cdots\\int_{0}^{t_{n}}e^{x-t_{n+1}}dt_{n+1}dt_{n}\\cdots dt_{1}=e^{x}\\sum_{k=0}^{n}\\frac{(-1)^{n-k}}{k!}x^{k}+C.$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: The problem involves an indefinite integral of the function $x^n e^x$,\nAssumption 2: The solution is expressed using permutations (k-permutations of n objects),\nAssumption 3: The right-hand side of the equation resembles the structure of the inclusion-exclusion principle,\nAssumption 4: A combinatorial proof is sought, where both sides count the same set.\nAssumption 5: $$\\int_{0}^{x}\\int_{0}^{t_{1}}\\cdots\\int_{0}^{t_{n}}e^{x-t_{n+1}}dt_{n+1}dt_{n}\\cdots dt_{1}=e^{x}\\sum_{k=0}^{n}\\frac{(-1)^{n-k}}{k!}x^{k}+C.$$\nProblem: \nProve combinatorially that  \n$$\\int {x^n e^x \\, dx}  = e^x \\sum_{k = 0}^n ( - 1)^k \\frac{n!}{(n-k)!}x^{n-k}   + C.$$"
}