{
    "Link_API": "https://api.stackexchange.com/2.3/questions/867992",
    "Title": "Function whose gradient is of constant norm",
    "Score": 16,
    "Category": "Chứng minh",
    "Tags": "real-analysis, ordinary-differential-equations, differential-geometry, riemannian-geometry, gradient-flows",
    "Link": "https://math.stackexchange.com/questions/867992/function-whose-gradient-is-of-constant-norm",
    "Content": "Let $f:\\mathbb R^n\\rightarrow \\mathbb R$ be a smooth function such that $\\|\\nabla f(x)\\|=1$ for all $x\\in \\mathbb R^n$ and $f(0)=0$. I would like to prove that $f$ is linear. I first looked at the solution of the O.D.E. $$\\dfrac{d\\gamma}{dt}(t)=\\nabla f(\\gamma(t))$$\nI noticed that there exists only one solution $\\gamma_x$ passing through $x\\in \\mathbb R^n$ at $t=0$, and such a solution is defined over $\\mathbb R$. I also proved that $$\\gamma_x(t)=x+t\\nabla f(x)$$ and $$f(\\gamma_x(t))=f(x)+t.$$ Furthermore, the following hint is given : Show that if $f(x)=f(y)$ then $\\langle \\nabla f(x),x-y\\rangle=\\langle \\nabla f(y),x-y\\rangle=0$. I did it, but now, I don't understand why it follows that $f$ is linear. Edit : I write here the proof of the hint; Let $c:[0,1]\\rightarrow \\mathbb R^n$ be the (usual) parametrization of the segment $[x+t\\nabla f(x),y]$. Since $f(x)=f(y)$, we get $$\\begin{align*}|t|=|f(\\gamma_x(t))-f(x)| & =|f(x+t\\nabla f(x))-f(y)|\\\\ & =|\\int_0^1 \\langle \\nabla f(c(s)),c'(s)\\rangle ds| \\\\ & \\leq \\int_0^1 \\|c'(s)\\|ds \\\\ & =\\|y-x-t\\nabla f(x)\\|\\end{align*}$$\nFrom this inequality, which is true for any $t\\in \\mathbb R$ and using the fact that $\\nabla f(x)$ is a unitary vector, it follows that :\n$$t^2\\leq \\|x-y\\|^2 + t^2 +2t\\langle x-y,\\nabla f(x) \\rangle$$\nDividing by $t$ and taking limits to $\\pm \\infty$ gives the hint.",
    "AcceptedAnswer": "From your tags, I suppose I can use some geometric argument here. Because of the condition $\\|\\nabla f\\| = 1$, the level set $$M = M_c = \\{x\\in \\mathbb R^n: f(x) = c\\}$$ is a smooth hypersurface for all $c\\in \\mathbb R$ and for all $x\\in M$, $$T_xM = \\{ y + x \\in \\mathbb R^n : \\langle y, \\nabla f (x) \\rangle = 0\\}.$$ Let $x\\in M$ and $y \\in M$ be closed to $x$. The condition $$\\langle \\nabla f(x), x-y \\rangle = 0$$ says that $x-y$ lie in the tangent space of $T_x M$ for all $y\\in M$. Then $y\\in T_xM$ for all $y$ closed to $x$ (Some arguments are needed here). With some more argument, one can show that $M = T_xM$ for all $x\\in M$. This mean that For all $c$, $M_c = V + cw$, where $w\\in \\mathbb R^n$ is a vector with norm one and $V = \\{ x: \\langle x, w\\rangle = 0\\}$, $f(u+ tw) = g(t)$, where $u\\in V$ and $g:\\mathbb R\\to \\mathbb R$ and $g'(t)=1$ for all $t$. The second claim show that $f$ is linear.",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \n$f: \\mathbb{R}^n \\rightarrow \\mathbb{R}$ is smooth,\n$\\|\\nabla f(x)\\| = 1$ for all $x \\in \\mathbb{R}^n$,\n$f(0) = 0$.\nProblem: \nProve that $f$ is linear.\n###",
    "reasoning_create_structured_problem": "Okay, let's try to tackle this problem. So, the goal is to prove that a smooth function f from R^n to R, which has a gradient of constant norm 1 everywhere and satisfies f(0)=0, must be linear. Hmm. Alright, let's parse the given information and the steps already taken.\n\nFirst, the assumptions are clear: f is smooth, the norm of its gradient is always 1, and f(0) is zero. The problem is to show f is linear. The user has already worked through some parts, like solving the ODE for the integral curves of the gradient vector field. They found that the solution γ_x(t) is x + t∇f(x), and that along these curves, f increases linearly with t, specifically f(γ_x(t)) = f(x) + t. That makes sense because the derivative of f along the curve is the dot product of the gradient and the velocity, which is ||∇f||² = 1, so it's increasing at rate 1.\n\nThen there's the hint about showing that if f(x) = f(y), then the inner products of the gradient at x and y with (x - y) are zero. They proved that using some integral along a segment between points, leading to inequalities that force those inner products to be zero. Now, how does that lead to f being linear?\n\nLet me think. If f is linear, then its gradient is a constant vector, and since the norm is 1, that vector would have norm 1. But how to show that the gradient is constant? Because if the gradient isn't constant, then even if its norm is 1, the function could be non-linear. For example, on R^2, if ∇f changes direction but maintains norm 1, the function might be something like f(x,y) = x + sin(y), but wait, no, that gradient would have components (1, cos(y)), whose norm isn't 1. So maybe such functions can't exist unless the gradient is constant.\n\nSo perhaps the key is to show that the gradient doesn't change direction. If the gradient is always the same vector, then f is linear. But how to show that?\n\nThe hint says that if f(x) = f(y), then the gradients at x and y are orthogonal to x - y. Wait, but if f(x) = f(y), then moving from x to y doesn't change the function value. But the gradient points in the direction of maximum increase. If the gradient at x is orthogonal to the direction from x to y, that would mean that moving in that direction doesn't affect the function value, which makes sense if f is constant along that direction. But if f(x)=f(y), and the gradient at x is orthogonal to x - y, then maybe the level sets of f are such that any two points with the same value have gradients orthogonal to the line connecting them. That seems restrictive.\n\nSuppose we take two points x and y where f(x)=f(y). Then according to the hint, both gradients at x and y are orthogonal to x - y. So ∇f(x) ⊥ (x - y) and ∇f(y) ⊥ (x - y). But unless ∇f(x) and ∇f(y) are the same vector, how can they both be orthogonal to the same vector (x - y)? Wait, unless (x - y) is a direction that's orthogonal to both gradients. But if x and y are arbitrary points on the same level set, then their connecting line must be orthogonal to both gradients. That seems like the gradients at different points on the same level set must all lie in the same orthogonal complement of the direction connecting any two points on the level set. This seems like the level sets are affine subspaces, and the gradient is constant.\n\nWait, if the level sets are affine subspaces (like hyperplanes), then the function f would be linear. For example, if f(x) = a·x + b, then the level sets are hyperplanes orthogonal to a. Here, since f(0)=0, b would be zero, so f(x)=a·x with ||a||=1.\n\nAlternatively, suppose the level sets are hyperplanes. Then the gradient would be the same everywhere, normal to the hyperplanes. Since the gradient has norm 1, the function would be linear. So maybe the key is to show that the level sets are hyperplanes, which would imply that the gradient is constant.\n\nBut how to get from the given condition to the level sets being hyperplanes?\n\nGiven the hint, if two points x and y are on the same level set (f(x)=f(y)), then the gradients at x and y are both orthogonal to x - y. That means that the entire line segment connecting x and y is orthogonal to both ∇f(x) and ∇f(y). If this is true for any two points on the same level set, then the level set must be such that all its points are connected by line segments orthogonal to the gradient. That sounds like the level set is a hyperplane with normal vector ∇f(x) for all x in the level set. Wait, but if ∇f(x) is the same for all x in the level set, then the gradient is constant on the level set, which would imply that the level set is a hyperplane orthogonal to that gradient.\n\nWait, but if the gradient is constant on the level set, then moving along the level set doesn't change the gradient. Then, integrating the gradient, which is constant, would give a linear function. Let me try to formalize this.\n\nSuppose that for any x and y in the same level set, ∇f(x) and ∇f(y) are both orthogonal to x - y. If we fix a level set L = {x | f(x) = c}, then for any x, y in L, ∇f(x) and ∇f(y) are orthogonal to x - y. Now, suppose we pick a point x in L. Then any other point y in L must satisfy that y is in the affine subspace orthogonal to ∇f(x) passing through x. Similarly, y must also lie in the affine subspace orthogonal to ∇f(y) passing through y. But unless ∇f is the same everywhere on L, this would require that y is in the intersection of two different affine subspaces, which might only be possible if ∇f(x) = ∇f(y) for all x, y in L.\n\nAlternatively, if all gradients on the level set L are the same, then L is an affine subspace orthogonal to that gradient. Then, moving along that affine subspace doesn't change f, which is consistent with the gradient being the same everywhere. Therefore, each level set is an affine subspace with normal vector equal to the gradient at any point in the level set. But if the gradient is constant across the entire space, then all level sets are parallel affine subspaces, hence f is linear.\n\nWait, but how do we know that the gradient is the same across different level sets? Suppose that for each level set L_c = {x | f(x) = c}, the gradient ∇f(x) is constant on L_c, but could vary with c. However, since the norm of the gradient is always 1, the only way the gradient can vary is in direction. But if the gradient's direction changes, then the level sets would have different normals, leading to a non-linear function.\n\nBut given the condition from the hint, if f(x)=f(y), then ∇f(x) and ∇f(y) are both orthogonal to x - y. Suppose we take two different level sets, L_c and L_{c'}, and consider points x in L_c and y in L_{c'}. But the condition only applies when f(x)=f(y), i.e., when they are in the same level set. So maybe within each level set, the gradient is constant. Then, how does the gradient change between different level sets?\n\nBut the problem is to show f is linear, so gradients must be constant everywhere. So, maybe the gradients can't change direction. Let's think about the integral curves γ_x(t) = x + t∇f(x). These are straight lines in the direction of ∇f(x). Also, along these lines, f increases at rate 1. So, if we start at x and move along ∇f(x), f increases by t. Now, if ∇f(x) is the same for all x, then all these lines are parallel, and f is linear. But if ∇f changes direction, then these lines would curve, but in this case, the integral curves are straight lines. Wait, the integral curves are straight lines because γ_x(t) is x + t∇f(x). So even if ∇f(x) varies with x, the integral curve is a straight line in the direction of ∇f(x). But for this to be the case, the vector field ∇f must be such that the integral curves are straight lines. That is, the direction of the gradient at each point x determines the straight line path. But for the integral curves to be straight lines, the gradient must be constant along those lines.\n\nWait, along the integral curve γ_x(t) = x + t∇f(x), the gradient ∇f(γ_x(t)) must be equal to ∇f(x) for all t, otherwise the integral curve wouldn't be a straight line. Because if the gradient at γ_x(t) were different, then the derivative of γ_x(t) would have to change direction, but in this case, the derivative is ∇f(γ_x(t)), which would need to be constant for the curve to remain a straight line. Therefore, ∇f must be constant along each integral curve. But since the integral curves are straight lines in the direction of ∇f(x), this suggests that the gradient is constant along those lines. However, how does this propagate to the entire space?\n\nSuppose we take two different integral curves starting from different points. If their gradients are not the same, then the integral curves would be straight lines in different directions. But perhaps the condition from the hint forces these gradients to be aligned. For instance, if two integral curves intersect, then at the intersection point, the gradient would have to be in both directions, which is only possible if they are the same. Alternatively, the condition that f(γ_x(t)) = f(x) + t suggests that moving along the integral curve increases f by t. So, if you move along the integral curve of ∇f starting at x, you increase f at a constant rate. If two integral curves from different points ever meet, that would require some consistency in the gradient directions.\n\nBut maybe another approach is needed. Let's think about the hint. If f(x)=f(y), then the gradients at x and y are orthogonal to x - y. Suppose we fix a point x and consider all points y such that f(y)=f(x). Then, for all such y, ∇f(x) is orthogonal to x - y. This means that the level set of f through x is contained in the hyperplane orthogonal to ∇f(x) passing through x. Similarly, the level set through y must also be contained in the hyperplane orthogonal to ∇f(y) through y. But if x and y are in the same level set, then f(x)=f(y), so both hyperplanes are orthogonal to ∇f(x) and ∇f(y), respectively, and contain both x and y. Wait, but if x and y are in both hyperplanes, then the line connecting x and y must lie in the intersection of these two hyperplanes. The intersection of two hyperplanes is a subspace of dimension n-2. But if this is true for all pairs of points in the level set, then the level set must be contained within that intersection, which would have to be the entire level set. This seems restrictive.\n\nAlternatively, if the level set through x is contained in the hyperplane orthogonal to ∇f(x), then the level set is exactly that hyperplane. Because if you have a smooth function with gradient of norm 1, the level sets are hyperplanes. Wait, in general, a function with constant gradient norm would have level sets that are equidistant hypersurfaces. For example, in R^n, if the gradient is always of norm 1, then the function is like a distance function from a hypersurface, but not necessarily linear. However, if the integral curves are straight lines, then maybe the function is linear. For example, the distance function from a hyperplane is linear, and its gradient is constant. But other distance functions (e.g., distance from a point) have gradients of norm 1 but are not linear.\n\nBut in our case, the integral curves are straight lines, which is a property of a linear function. Because if f is linear, then ∇f is constant, so the integral curves are straight lines in the direction of the gradient. Conversely, if all integral curves are straight lines, does that imply the gradient is constant?\n\nYes, I think so. Suppose the gradient vector field is such that every integral curve is a straight line. Then, the directional derivative in the direction of the gradient is constant (since moving in that direction increases f at rate 1). For the integral curves to be straight lines, the gradient must not change direction along the integral curve. But if the gradient doesn't change along its own direction, then it's constant along those lines. However, to have the gradient constant everywhere, we need that the gradient is the same in all directions. \n\nWait, let's see. Suppose that at some point x, the gradient is v, and at another point y = x + tv, the gradient is also v. Then, along the entire line in the direction v from x, the gradient remains v. If this is true for all starting points x, then the entire vector field is constant. Because if you take any two points x and y, and consider the integral curves through them, if those curves are straight lines in possibly different directions, but the condition that the gradients at x and y are orthogonal to x - y when f(x)=f(y) would force those directions to be the same.\n\nAlternatively, using the hint result, if we take two points x and y where f(x)=f(y), then their gradients are both orthogonal to x - y. Suppose we pick y = x + h, where h is a vector such that f(x + h) = f(x). Then, ∇f(x) and ∇f(x + h) are both orthogonal to h. If this is true for all h such that f(x + h) = f(x), then the set of all such h is the tangent space to the level set at x, which is orthogonal to ∇f(x). But if ∇f(x + h) is also orthogonal to h, that would mean ∇f(x + h) is parallel to ∇f(x). Because both are orthogonal to h, but the level set at x + h must also have its gradient orthogonal to h, implying that ∇f(x + h) is parallel to ∇f(x). Since both have norm 1, ∇f(x + h) must be equal to ∇f(x) or -∇f(x). But since moving in the direction of ∇f(x) increases f, and moving in the opposite direction decreases it, and our function is smooth, the gradient can't suddenly reverse direction unless f has a maximum or minimum, which it can't because the gradient always has norm 1. Therefore, ∇f must be constant on each level set.\n\nWait, but if ∇f is constant on each level set, then the level sets are hyperplanes, and the gradients of different level sets must be parallel. Because if you have two different level sets with gradients in different directions, the function would not be linear. But since all gradients have norm 1, if they are all parallel, they must be the same vector. Hence, ∇f is constant everywhere.\n\nPutting this all together: the condition from the hint forces that on each level set, the gradient is constant (and orthogonal to the level set). Since the function is smooth and the gradients on different level sets must align (otherwise there would be discontinuities), the gradient must be the same everywhere. Therefore, f is linear with gradient a constant vector of norm 1, and since f(0)=0, f(x) = a·x where ||a||=1.\n\nSo the key steps are:\n\n1. Show that if f(x)=f(y), then gradients at x and y are orthogonal to x-y, hence parallel (since both orthogonal to the same vector and of norm 1).\n\n2. Conclude that the gradient is constant on each level set.\n\n3. Use the integral curves (straight lines) to show that the gradient must be constant across all level sets.\n\n4. Therefore, f is linear.\n\nThe user had already proven the hint, so from there, the next step is to show that the gradient is constant. The hint implies that the gradients at any two points with the same function value are both orthogonal to the line connecting them. If you take two points x and y where f(x)=f(y), then both ∇f(x) and ∇f(y) are orthogonal to x - y. Suppose we pick y = x + h, where h is orthogonal to ∇f(x). Then, since f(x + h) = f(x), ∇f(x + h) is also orthogonal to h. But since h is orthogonal to ∇f(x), and ∇f(x + h) is also orthogonal to h, ∇f(x + h) must be parallel to ∇f(x). Because in n-dimensional space, the orthogonal complement of h is a hyperplane, but both gradients are in that hyperplane. However, since they both have norm 1 and are in the same hyperplane, they must be the same vector. Hence, ∇f is constant on the level set.\n\nThen, considering the integral curves, since moving along ∇f(x) increases f at rate 1, and if the gradient is the same everywhere, then f is linear. If the gradient were to change direction at some point, then the integral curve through that point would have to change direction, but the integral curves are straight lines as per the ODE solution. Therefore, the gradient cannot change direction and must be constant everywhere. Hence, f is linear.",
    "Original_Problem": "Assumption: \n$f: \\mathbb{R}^n \\rightarrow \\mathbb{R}$ is smooth,\n$\\|\\nabla f(x)\\| = 1$ for all $x \\in \\mathbb{R}^n$,\n$f(0) = 0$.\nProblem: \nProve that $f$ is linear.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: $f: \\mathbb{R}^n \\rightarrow \\mathbb{R}$ is smooth,\nAssumption 2: $\\|\\nabla f(x)\\| = 1$ for all $x \\in \\mathbb{R}^n$,\nAssumption 3: $f(0) = 0$.\nProblem: \nProve that $f$ is linear.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$T_xM = \\{ y + x \\in \\mathbb R^n : \\langle y, \\nabla f (x) \\rangle = 0\\}.$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: $f: \\mathbb{R}^n \\rightarrow \\mathbb{R}$ is smooth,\nAssumption 2: $\\|\\nabla f(x)\\| = 1$ for all $x \\in \\mathbb{R}^n$,\nAssumption 3: $f(0) = 0$.\nAssumption 4: $$T_xM = \\{ y + x \\in \\mathbb R^n : \\langle y, \\nabla f (x) \\rangle = 0\\}.$$\nProblem: \nProve that $f$ is linear."
}