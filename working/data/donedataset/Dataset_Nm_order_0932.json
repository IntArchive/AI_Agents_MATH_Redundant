{
    "Link_API": "https://api.stackexchange.com/2.3/questions/1079356",
    "Title": "Closed immersions are stable under base change",
    "Score": 25,
    "Category": "Chứng minh",
    "Tags": "algebraic-geometry",
    "Link": "https://math.stackexchange.com/questions/1079356/closed-immersions-are-stable-under-base-change",
    "Content": "My question can be summarized as: I want to prove that closed immersions are stable under base change. This is exercise II.3.11.a in Hartshorne's Algebraic Geometry. I researched this for about half a day. I consulted a number of books and online notes, but I found the proofs to be vague. Vakil's notes (9.2.1) hint that this is an immediate consequence of the canonical isomorphism $ M/IM\\cong M\\otimes_{A}A/I $, and so does Liu's book (1.23). The proof can't be this simple. I need to show that this can be reduced to the affine case, and to do so, I need to show that a closed immersion into an affine scheme is affine. I haven't been able to do so yet. Edit: I found a proof for this later but I still don't know how to use it to prove the question above. As for the Stacks project, I had to traverse a tree propositions, until I eventually found a proof that uses concepts like quasi-coherent sheaves, something not introduced in Hartshorne's book at this point. I also consulted Gortz & Wedhorn. The book cites section 4.11 as a proof for this. However the section is a general introduction to the categorical fibred product. It's unrelated. In fact the official errata mentions this error and cites proposition 4.20 instead. It is unclear to me how the proposition shows the result. I suspect the book uses a different - but equivalent - definition. At this point, I'm frustrated. I'm self-studying and don't have anybody to ask. Could somebody please be kind enough to show me a self-contained proof?",
    "AcceptedAnswer": "This is not an optimal solution, but if you didn't know that closed immersions can be checked affine locally (like I didn't), then this would be something you can do: check each condition for a closed immersion separately. Let $X = \\operatorname{Spec} R$, $X' = \\operatorname{Spec} A$, and $Y = \\operatorname{Spec} B$ be affine. Then, we know that in the diagram\n$$\\require{AMScd}\n\\begin{CD}\nB \\otimes_R A @<<< A\\\\\n@AAA @AAA \\\\\nB @<<< R\n\\end{CD}$$\n$R \\to B$ being surjective implies $A \\to B \\otimes_R A$ is surjective by the right exactness of the tensor product. Now what we want to do is to use the same idea to show the surjectivity of the map $f^{\\prime\\#}$ on structure sheaves, and to do so you can check surjectivity on stalks. Thus, by using small enough open neighborhoods you can assume $X,X',Y$ are affine and using the notation above, you want to show $A_P \\to (B \\otimes_R A)_P$ is surjective for each $P \\in \\operatorname{Spec} A$, where you consider $B \\otimes_R A$ as an $A$-module. Now the thing was that I decided to localize the diagram above at the prime $P$: you're right that I was wrong to put my prime $P$ in $\\operatorname{Spec} R$ instead of $\\operatorname{Spec} A$. Instead, you can get the same conclusion by noticing $(B \\otimes_R A)_P = B \\otimes_R A \\otimes_A A_P = B \\otimes_R A_P$, so we want to show $A_P \\to B \\otimes_R A_P$ is surjective. But $R \\to B$ is surjective since it is locally surjective by assumption that $Y \\to X$ is a closed immersion, so right exactness works again. Now, the question is how you get the topological part of being a closed immersion. The proof above combined with Exercise 2.18(c) shows we have a homeomorphism with a closed subset of $X'$ when assuming $X,X',Y$ are affine. You can then play the whole gluing game like in the construction of the fiber product to deduce that for arbitrary $X,X',Y$ you have this topological property. In hindsight, this is not a good way to go! EDIT: I was requested to flesh out the topological part of the proof. Recall the setup: want to show that in the diagram\n$$\\begin{CD}\nY \\times_X X' @>f'>> X'\\\\\n@VVV @VV{g}V \\\\\nY @>f>> X\n\\end{CD}$$\nthat if $f$ is a closed immersion, then $f'$ is a closed immersion. The proof above shows that $f^{\\prime\\#}$ is indeed surjective at each stalk, and so we must show $f'$ induces a homeomorphism between $Y \\times_X X'$ and a closed subset of $X'$. I think the hard part is proving we can reduce to the case when $X,X',Y$ are affine, so I will be doing this below. We follow EGAI, Cor. 4.2.4 and Prop. 4.3.1. Note that the new edition has another proof. We first note that closed immersions are local on target. The property on stalks is trivially local on target; the property \"a morphism $f\\colon Y \\to X$ induces a homeomorphism between $Y$ and a closed subset of $X$\" is local on target as well. For, suppose $\\{X_\\lambda\\}$ is a cover of $X$ and $Y_\\lambda := f^{-1}(X_\\lambda)$, such that $Y_\\lambda \\to X_\\lambda$ induces a homeomorphism between $Y_\\lambda$ and $f(Y_\\lambda)$ a closed subset of $X_\\lambda$. By hypothesis, if $y \\in Y$, every neighborhood of $y$ is mapped to a neighborhood of $f(y)$, and $f$ is injective. So, it remains to show that $f(Y)$ is actually closed in $X$. But it suffices to show $f(Y) \\cap X_\\lambda$ is closed in $X_\\lambda$ for every $\\lambda$; but this is trivial since $f(Y) \\cap X_\\lambda = f(Y_\\lambda)$ is closed in $X_\\lambda$. Now back to the claim at hand. We first reduce to the case where $X$ is affine. First let $\\{X_\\lambda\\}$ be an affine cover of $X$, and let $Y_\\lambda := f^{-1}(X_\\lambda)$ and $X'_\\lambda := g^{-1}(X_\\lambda)$. The restriction $f\\rvert_{Y_\\lambda}\\colon Y_\\lambda \\to X_\\lambda$ is closed immersion, hence if the proposition holds for $X$ affine, then $Y_\\lambda \\times_{X_\\lambda} X'_\\lambda \\to X'_\\lambda$ is a closed immersion. Now by Thm. 3.3, Step 7, the $Y_\\lambda \\times_{X_\\lambda} X'_\\lambda$ are canonically isomorphic to $Y \\times_X X'_\\lambda$; the morphism $Y_\\lambda \\times_{X_\\lambda} X'_\\lambda \\to X'_\\lambda$ is the same as the restriction of $f'$ to $Y \\times_X X'_\\lambda$ ; since the $X'_\\lambda$ form a cover of $X'$, we have that $f'$ is a closed immersion assuming the proposition holds for $X$ affine by the fact that closed immersions are local on target. Now we further reduce to the case where $X'$ is affine as well; note that $X$ affine implies $Y$ is affine since it is a closed subscheme of $X$ by Exercise 3.11(b). But if $\\{X'_\\mu\\}$ is an affine open cover of $X'$, then $Y \\times_X X'_\\mu \\to X'_\\mu$ is a closed immersion by the affine case we wanted to reduce to, hence $Y \\times_X X' \\to X'$ is a closed immersion since closed immersions are local on target.",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \nClosed immersions are morphisms of schemes that are homeomorphisms onto closed subsets with surjective structure sheaf morphisms,\nFiber products in the category of schemes can be constructed by gluing affine pieces,\nThe canonical isomorphism $M/IM \\cong M \\otimes_A A/I$ holds for an $A$-module $M$ and ideal $I$,\nProperties of morphisms local on the target can be checked affine-locally.\nProblem: \nProve that closed immersions are stable under base change.\n###",
    "reasoning_create_structured_problem": "Okay, let me try to work through this problem step by step. The user wants to prove that closed immersions are stable under base change, which is Exercise II.3.11(a) in Hartshorne's Algebraic Geometry. They mentioned that some references like Vakil and Liu suggest it's a consequence of the isomorphism M/IM ≅ M⊗_A A/I, but they feel the proof can't be that simple. They also mentioned difficulties in reducing to the affine case and showing a closed immersion into an affine scheme is affine.\n\nFirst, I need to recall what a closed immersion is in the context of schemes. In Hartshorne, a closed immersion is a morphism of schemes f: Y → X such that f induces a homeomorphism of Y onto a closed subset of X, and the sheaf morphism O_X → f_*O_Y is surjective. So, to show that closed immersions are stable under base change, we need to consider a base change diagram: if we have a closed immersion Z → X and any morphism X' → X, then the pullback Z ×_X X' → X' should also be a closed immersion.\n\nThe user is stuck on reducing to the affine case. Let me think about how to approach that. Maybe start by taking an affine cover of X and then pulling back to X'. But since closed immersions are affine-local on the target, perhaps we can work affine-locally on X and X'. Wait, but X' might not be affine. Hmm.\n\nAlternatively, since the problem is about stability under base change, which is a categorical construction, perhaps we can use the fact that closed immersions are characterized by certain properties that are preserved under pullback. For instance, surjectivity of the sheaf morphism should be preserved under pullback? But I need to be careful with how the structure sheaves behave under fiber products.\n\nThe hint from Vakil and Liu about M/IM ≅ M⊗_A A/I suggests that this tensor product is key. If we have a closed immersion Spec(A/I) → Spec(A), then base changing along a morphism Spec(B) → Spec(A) would give Spec(A/I ⊗_A B) = Spec(B/IB), which is another closed immersion. So in the affine case, this works because the tensor product A/I ⊗_A B is B/IB, hence the map Spec(B/IB) → Spec(B) is a closed immersion.\n\nBut the user is saying that this is considered immediate, but the proof isn't that simple because you have to reduce to the affine case. So maybe the crux is to show that if you have a closed immersion f: Y → X, then for any morphism g: X' → X, the pullback Y ×_X X' → X' is a closed immersion. To do this, we can cover X with affine opens, take their preimages under g in X', and then show locally on X' the pullback is a closed immersion. But how exactly?\n\nLet me recall that in the category of schemes, fiber products are constructed by gluing affine pieces. So suppose X is covered by affine opens U_i = Spec(A_i), and Y is covered by V_i = Spec(A_i/I_i) since f is a closed immersion. Then X' can be covered by opens g^{-1}(U_i), which might not be affine, but we can cover them with affines. Let's take an affine open cover of X', say {U'_j} where each U'_j maps into some U_i under g. Then the pullback Y ×_X X' would be covered by the pullbacks of V_i ×_{U_i} U'_j. Since U'_j is affine, say U'_j = Spec(B_j), and V_i = Spec(A_i/I_i), then the fiber product V_i ×_{U_i} U'_j is Spec( (A_i/I_i) ⊗_{A_i} B_j ) = Spec( B_j / I_i B_j ), which is a closed immersion into U'_j. Since this holds locally, and the condition of being a closed immersion is local on the target, we can glue these local closed immersions to get a global closed immersion.\n\nSo the key steps are:\n1. Cover X with affine opens U_i.\n2. Cover X' with affine opens U'_j that map into some U_i.\n3. The pullback over each U'_j is affine and given by the tensor product, which results in a closed immersion.\n4. Glue these local results to conclude the global case.\n\nBut the user was confused about how to show that a closed immersion into an affine scheme is affine. Wait, isn't any closed immersion affine? Because if X is affine, say Spec(A), then a closed immersion Y → X is Spec(A/I) → Spec(A), which is affine. So maybe the user was overcomplicating that part.\n\nAnother point is that the structure sheaf condition needs to be checked. The sheaf morphism O_{X'} → (f')_* O_{Y'} (where f' is the pullback morphism) should be surjective. Locally, this corresponds to the ring map B → B/IB being surjective, which it is. So the surjectivity is preserved under the base change.\n\nThe user also mentioned Stacks Project using quasi-coherent sheaves. But Hartshorne might not have introduced that yet. However, in Hartshorne's Chapter II, quasi-coherent sheaves are introduced in Section 5, which is after Section 3 where this exercise is. So maybe the user hasn't reached there yet, hence the confusion.\n\nPutting this all together, the proof involves reducing to the affine case by covering the schemes appropriately, using the fact that closed immersions correspond to surjective ring maps modulo ideals, and that tensor products with A/I give the correct quotient rings for the base change. Then gluing the affine pieces together ensures the global result.\n\nSo the main assumptions here are the definitions of closed immersions in Hartshorne, the properties of fiber products in the category of schemes, and the ability to reduce to affine covers where the algebraic isomorphism M/IM ≅ M⊗A A/I applies. Each step addresses one part: covering the schemes, using affine local constructions, and the sheaf surjectivity.",
    "Original_Problem": "Assumption: \nClosed immersions are morphisms of schemes that are homeomorphisms onto closed subsets with surjective structure sheaf morphisms,\nFiber products in the category of schemes can be constructed by gluing affine pieces,\nThe canonical isomorphism $M/IM \\cong M \\otimes_A A/I$ holds for an $A$-module $M$ and ideal $I$,\nProperties of morphisms local on the target can be checked affine-locally.\nProblem: \nProve that closed immersions are stable under base change.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: Closed immersions are morphisms of schemes that are homeomorphisms onto closed subsets with surjective structure sheaf morphisms,\nAssumption 2: Fiber products in the category of schemes can be constructed by gluing affine pieces,\nAssumption 3: The canonical isomorphism $M/IM \\cong M \\otimes_A A/I$ holds for an $A$-module $M$ and ideal $I$,\nAssumption 4: Properties of morphisms local on the target can be checked affine-locally.\nProblem: \nProve that closed immersions are stable under base change.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$\\begin{CD}\nY \\times_X X' @>f'>> X'\\\\\n@VVV @VV{g}V \\\\\nY @>f>> X\n\\end{CD}$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: Closed immersions are morphisms of schemes that are homeomorphisms onto closed subsets with surjective structure sheaf morphisms,\nAssumption 2: Fiber products in the category of schemes can be constructed by gluing affine pieces,\nAssumption 3: The canonical isomorphism $M/IM \\cong M \\otimes_A A/I$ holds for an $A$-module $M$ and ideal $I$,\nAssumption 4: Properties of morphisms local on the target can be checked affine-locally.\nAssumption 5: $$\\begin{CD}\nY \\times_X X' @>f'>> X'\\\\\n@VVV @VV{g}V \\\\\nY @>f>> X\n\\end{CD}$$\nProblem: \nProve that closed immersions are stable under base change."
}