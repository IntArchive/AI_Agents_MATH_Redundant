{
    "Link_API": "https://api.stackexchange.com/2.3/questions/3781690",
    "Title": "$n$ is prime iff $\\binom{n^2}{n} \\equiv n \\pmod{n^4}$?",
    "Score": 26,
    "Category": "Chứng minh",
    "Tags": "elementary-number-theory, prime-numbers, binomial-coefficients, examples-counterexamples, primality-test",
    "Link": "https://math.stackexchange.com/questions/3781690/n-is-prime-iff-binomn2n-equiv-n-pmodn4",
    "Content": "Can you prove or disprove the following claim: Let $n$ be a natural number greater than two , then $$n \\text{ is prime iff } \\binom{n^2}{n} \\equiv n \\pmod{n^4}$$ You can run this test here . I have verified this claim for all $n$ up to $100000$ .",
    "AcceptedAnswer": "Unfortunately, it appears that the claim is false . My counterexample is $n=16843^2$ . Note that $16843$ is a Wolstenholme prime. Henceforth set $p=16843$ (so that our counterexample is $n=p^2$ ). Here is the \"proof\" of my counterexample, which seems to be too large to compute directly (crashed the Sage program and Wolfram didn't understand it directly, so more work was needed). Note that it suffices to show $$\\binom{p^4}{p^2}\\equiv p^2\\pmod{p^8}.$$ By CAMO 2020/2 , since $p=16843>3$ , then we have $$\\binom{p^4}{p^2}\\equiv \\binom{p^3}p\\pmod{p^9}$$ which is of course strong enough to tell us that $$\\binom{p^4}{p^2}\\equiv \\binom{p^3}p\\pmod{p^8}.$$ Now, Wolfram Alpha computes $$\\binom{p^3}{p}-p^2\\equiv 0\\pmod{p^8},$$ which implies $$\\binom{p^4}{p^2}\\equiv p^2\\pmod{p^8},$$ which proves that the counterexample $n=p^2$ works. Note : With enough work, I think that it's possible to show without using computer aid that $n=p^2$ is a counterexample iff $p$ is a Wolstenholme prime. EDIT : I have figured out a proof that all $n=p^2$ for $p$ a Wolstenholme prime are counterexamples. Follow the solution posted by TheUltimate123 here , and modify the falling factorial congruence lemma to hold modulo $p^{k+3}$ . The proof works the exact same except for two changes: First, we prove the lemma only for $i=0$ , as the $n$ in the problem is equal to 1 (as in $\\binom{p^3}{p\\cdot 1}$ ). Also, we use the fact that $p$ is a Wolstenholme prime to note $$\\sum_{j=1}^{p-1} \\frac1j\\equiv 0\\pmod{p^3},$$ so that the lemma may hold modulo $p^{k+3}$ . This gives us the following lemma: for Wolstenholme primes $p$ , $$\\binom{p^k}{p}\\equiv p^{k-1}\\pmod{p^{2k+2}}.$$ Now, to finish, note $$\\binom{p^4}{p^2}\\equiv\\binom{p^3}p\\pmod{p^{2\\cdot 4+1}}$$ and $$\\binom{p^3}{p}\\equiv p^2\\pmod{p^{2\\cdot 3+2}}$$ which combined implies that for all Wolstenholme primes $p$ , $$\\binom{p^4}{p^2}\\equiv p^2\\pmod{p^8}.$$ Interesting Aside (delete if off-topic) : CAMO 2020/2 tells us that all primes $p>3$ satisfy $$\\binom{p^2}p\\equiv p\\pmod{p^5},$$ so perhaps a better question to ask would be: Is it true that for all natural numbers $n>3$ , $$\\binom{n^2}n\\equiv n\\pmod{n^5}\\iff n\\in\\mathbb P?$$ Note that in this case $n=16843^2$ is not a counterexample (Wolfram Alpha confirms that the congruence does not even hold modulo $16843^9$ )...",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \n$n$ is a natural number,\n$n$ is greater than 2.\nProblem:\nProve or disprove that $n$ is prime if and only if $$\\binom{n^2}{n} \\equiv n \\pmod{n^4}.$$\n###",
    "reasoning_create_structured_problem": "Okay, let me try to parse this problem. The user wants me to act as a bilingual math professor and structure the given Math Stack Exchange question into the specified format. Let me start by reading the original problem carefully.\n\nThe title of the question is: \"$n$ is prime iff $\\binom{n^2}{n} \\equiv n \\pmod{n^4}$?\" The body of the question repeats this claim and mentions that it's verified for n up to 100000. The user wants to know if this can be proven or disproven.\n\nSo the task is to format this into the Assumption and Problem sections as per the example. The example lists each assumption line by line, each addressing one property or condition applied to one object. In the example, they had two assumptions: n is an integer and n is divisible by 7. But wait, in the example, the original problem states \"for every integer n\", but the formatted problem added an extra assumption that n is divisible by 7. That seems like an error in the example, but maybe the user intended that? Hmm, perhaps the example was a mistake, but the key is to follow the instructions given.\n\nWait, looking back at the original example:\n\nOriginal problem: Prove that for every integer $n$, the number A(n) is divisible by 91.\n\nFormatted problem's assumptions: n is an integer, n is divisible by 7. But the original problem didn't mention n being divisible by 7. That seems incorrect. Maybe the user made a mistake in the example. But perhaps the example is just illustrative, and I should focus on the actual problem given.\n\nWait, maybe in the example, the user intended to structure the problem by extracting all the assumptions from the problem. If the original problem says \"for every integer n\", then the assumption would be \"n is an integer\". But in the formatted problem, they added an extra assumption \"n is divisible by 7\". That seems contradictory. Maybe there was a misunderstanding in the example. But perhaps the user wants me to list all the conditions given in the problem. Let me check again.\n\nWait, in the original example, the problem was to prove that A(n) is divisible by 91 for every integer n. However, the formatted problem's assumptions include \"n is divisible by 7\". That seems like an error. But maybe the user intended to show how to list assumptions, even if they are not all given? Maybe the example is flawed, but I need to follow the current problem's instructions.\n\nBack to the current problem: The claim is that for a natural number n greater than two, n is prime if and only if the binomial coefficient binomial(n² choose n) is congruent to n modulo n⁴. The user has verified this up to n=100000.\n\nSo, to structure this into the Assumption and Problem sections. The assumptions here are:\n\n1. n is a natural number.\n2. n is greater than two.\n3. The problem is about the equivalence (iff) between n being prime and the congruence condition.\n\nBut according to the example, each assumption should address only one property or condition applied to one object. So for the current problem, the original problem states \"Let n be a natural number greater than two\". Therefore, the assumptions would be:\n\n- n is a natural number.\n- n > 2.\n\nThen, the problem is to prove or disprove that n is prime iff the binomial coefficient congruence holds modulo n⁴.\n\nSo putting this together:\n\nAssumption:\nn is a natural number,\nn is greater than 2.\n\nProblem:\nProve or disprove that n is prime if and only if $\\binom{n^2}{n} \\equiv n \\pmod{n^4}$.\n\nWait, but the original problem says \"Let n be a natural number greater than two , then n is prime iff [congruence]\". So the problem is an equivalence (iff) statement under the assumptions that n is a natural number > 2. Therefore, the assumptions are as above. The problem is the biconditional statement. So the formatted problem should list the two assumptions and then the problem statement.\n\nYes, that seems right. Let me check the example again. In the example, the original problem states \"for every integer n\", which is formatted as \"n is an integer\". Then, there's an extra assumption \"n is divisible by 7\", which is not in the original problem. That seems like a mistake, but perhaps the example was for a different problem. Anyway, I need to focus on the current problem.\n\nSo, the user's instructions are to list all assumptions line by line, each being a single property or condition applied to one object. So in the current problem, the assumptions are:\n\n1. n is a natural number.\n2. n is greater than 2.\n\nThe problem is the equivalence between primality of n and the congruence. Therefore, the formatted problem should look like:\n\nAssumption:\nn is a natural number,\nn is greater than 2.\n\nProblem:\nProve or disprove that n is prime if and only if $\\binom{n^2}{n} \\equiv n \\pmod{n^4}$.\n\nThat's it. I don't see any other assumptions in the original problem. The example had an extra assumption which may have been incorrect, but following the user's instructions and the given problem, this should be correct.",
    "Original_Problem": "Assumption: \n$n$ is a natural number,\n$n$ is greater than 2.\nProblem:\nProve or disprove that $n$ is prime if and only if $$\\binom{n^2}{n} \\equiv n \\pmod{n^4}.$$",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: $n$ is a natural number,\nAssumption 2: $n$ is greater than 2.\nProblem:\nProve or disprove that $n$ is prime if and only if $$\\binom{n^2}{n} \\equiv n \\pmod{n^4}.$$",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$\\binom{p^4}{p^2}\\equiv p^2\\pmod{p^8}.$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: $n$ is a natural number,\nAssumption 2: $n$ is greater than 2.\nAssumption 3: $$\\binom{p^4}{p^2}\\equiv p^2\\pmod{p^8}.$$\nProblem:\nProve or disprove that $n$ is prime if and only if $$\\binom{n^2}{n} \\equiv n \\pmod{n^4}.$$"
}