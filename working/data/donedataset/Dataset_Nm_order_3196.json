{
    "Link_API": "https://api.stackexchange.com/2.3/questions/3681799",
    "Title": "2 out of 3 property for faithfully flat ring maps",
    "Score": 12,
    "Category": "Chứng minh",
    "Tags": "algebraic-geometry, commutative-algebra",
    "Link": "https://math.stackexchange.com/questions/3681799/2-out-of-3-property-for-faithfully-flat-ring-maps",
    "Content": "Proposition 1: Let $f : A\\to B$ and $g : B\\to C$ be ring maps such that $g$ is faithfully flat. Then the composition $gf$ is flat (resp. faithfully flat) if and only if $f$ is flat (resp. faithfully flat). Proof: Certainly flatness (resp. faithful flatness) of $f$ implies flatness (resp. faithful flatness) of $gf.$ Conversely, suppose that $gf$ is flat, and let $M'\\to M\\to M''$ be an exact sequence of $A$ -modules. Then flatness of $gf$ implies that $M'\\otimes_A C\\to M\\otimes_A C\\to M''\\otimes_A C$ is exact as well, whence by faithful flatness of $g$ we have that $M'\\otimes_A B\\to M\\otimes_A B\\to M''\\otimes_A B$ is exact. If $gf$ is faithfully flat, and $M'\\to M\\to M''$ is a sequence of $A$ -modules such that the composition $M'\\to M''$ is $0,$ then faithful flatness of $gf$ implies that $M'\\to M\\to M''$ is exact if and only if $M'\\otimes_A C\\to M\\otimes_A C\\to M''\\otimes_A C$ is. Faithful flatness of $g$ implies that this is exact if and only if $M'\\otimes_A B\\to M\\otimes_A B\\to M''\\otimes_A B$ is. $\\square$ This result has been surprisingly hard to track down in the literature, despite the simplicity of the proof. (The proof and statement of proposition 1 in the flat case can be found here ; I do not know of anywhere that the version of proposition 1 for faithful flatness exists, although I'm sure I just haven't searched carefully enough.) Note that this proposition is not true only assuming flatness of $g,$ as evidenced by the composition $k[t^2, t^3]\\to k[t]\\to k(t).$ I was originally interested in the situation where we assume that the composition is flat, and use that to deduce that $f$ is flat. However, I was wondering whether the following stronger proposition is true. Proposition 2: Let $f : A\\to B$ and $g : B\\to C$ be ring maps such that the composition $gf : A\\to C$ is faithfully flat. Then $f$ is faithfully flat. Disclosure: I asked this question in the hopes that this 2 out of 3 property for faithfully flat morphisms will more easily searchable for anyone trying to find a result of this type in the future.",
    "AcceptedAnswer": "Edit: Proposition 2 is in fact false! The original answer is below in spoiler tags, but SashaP has pointed out a counterexample: if $f : k[x]\\to k[x]\\times k$ is the map induced by the identity on $k[x]$ and $x\\mapsto 0$ from $k[x]\\to k,$ and $g : k[x]\\times k\\to k[x]$ is the projection onto the first factor, then $gf = \\operatorname{id}_{k[x]},$ but $f$ is not faithfully flat. Notice that $B = k[x]\\times k\\cong k[x]\\oplus k,$ and $k$ is not flat over $k[x].$ In particular, we have an exact sequence of $k[x]$ -modules $$\n0\\to k[x]\\xrightarrow{\\cdot x} k[x]\\xrightarrow{\\pi} k[x]/(x)\\to 0\n$$ and upon tensoring with $B,$ we get $$\nk[x]\\oplus k\\xrightarrow{\\cdot x\\oplus 0}k[x]\\oplus k\\xrightarrow{\\pi\\oplus\\operatorname{id}_k}k[x]/(x)\\oplus k\\to 0,\n$$ which is no longer exact on the left. The error in the proof is that it is not true that $A\\to B$ is faithfully flat if and only if for every $A$ -module $N,$ the canonical map $N\\to N\\otimes_A B$ is injective. We must also suppose that the map $A\\to B$ is flat in order to get the equivalence. Indeed, $k[x]\\to k[x]\\times k$ (or more generally, $A\\to B\\times B'$ where $B$ is faithfully flat over $A$ and $B'$ is not flat over $A$ ) will provide a counterexample to the original claim. Indeed, Proposition 2 is true. Proof: Recall that $A\\to B$ is faithfully flat if and only if the canonical map $N\\to N\\otimes_A B$ is injective for every $A$ -module $N.$ To that end, let $N$ be an $A$ -module. We need to prove that $N\\to N\\otimes_A B$ is injective, but we know by faithful flatness of $gf$ that the composition $N\\to N\\otimes_A B\\to N\\otimes_A C$ is injective. Thus, it follows that $N\\to N\\otimes_A B$ must be injective. $\\square$ Certainly, it need not be true that $B\\to C$ be faithfully flat even if both $A\\to B$ and $A\\to C$ are (consider the composition $k\\to k[X]\\to k(X),$ for $k$ a field). So the best we can hope for is Proposition 2.",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \nThe composition $gf: A \\to C$ is a faithfully flat ring map.\n\nProblem: \nProve that $f: A \\to B$ is faithfully flat.\n###END_OF_FORMAT###",
    "reasoning_create_structured_problem": "Okay, let me try to parse this problem. The user is talking about Proposition 2, which they want to validate. The setup is two ring maps, f: A → B and g: B → C, such that the composition gf: A → C is faithfully flat. The claim is that under these conditions, f must be faithfully flat. \n\nFirst, I need to list the assumptions. The problem states that gf is faithfully flat. So, one assumption is that the composition of f and g is faithfully flat. Then, the problem is to prove that f is faithfully flat. But do we have any other conditions on g or f? The original Proposition 1 required g to be faithfully flat, but in Proposition 2, the user is not assuming anything about g except that the composition is faithfully flat. Wait, the user says \"Let f: A→B and g: B→C be ring maps such that the composition gf: A→C is faithfully flat.\" So, the only assumption is that gf is faithfully flat. There are no other conditions on f or g individually. Therefore, the assumption is just that the composition gf is faithfully flat. \n\nBut wait, the problem is to prove that f is faithfully flat under this condition. So, the assumptions should include that gf is a faithfully flat ring map. The problem is to show f is faithfully flat. Are there any other implicit assumptions here? For example, are we assuming that all rings are commutative with unity? That's standard in algebraic geometry, but maybe it's worth noting. But the original problem as stated doesn't specify, so maybe we shouldn't add assumptions not given. The original problem says \"ring maps\", so unless specified otherwise, rings can be any rings. But maybe the answer relies on commutative rings. However, since the user references Proposition 1, which in the link given (the flat case) is in the context of commutative rings. So perhaps the user is working in commutative algebra. But since the problem as stated doesn't specify, perhaps the assumptions should just be the ones explicitly given.\n\nSo, the main assumption is that the composition gf is faithfully flat. The problem is to show that f is faithfully flat. The user is asking whether Proposition 2 is true, which is this implication. \n\nNow, in the example provided earlier, the assumptions were listed per line, each addressing one property or condition. So here, the assumption would be that the composition gf is faithfully flat. But since faithful flatness includes flatness and the condition that the induced map on spectra is surjective, or equivalently, that a module being zero after tensoring with C implies it was zero. But in the problem statement, the composition is given as faithfully flat. So, the assumption is that the composed ring map gf is faithfully flat. Therefore, the assumption is: gf: A → C is a faithfully flat ring map.\n\nHence, the formatted problem should have:\n\nAssumption: \ngf: A → C is a faithfully flat ring map.\n\nProblem: \nProve that f is faithfully flat.\n\nWait, but in the original example, sometimes assumptions are split into multiple lines if there are multiple conditions. But here, the only assumption given is that the composition is faithfully flat. So, perhaps that's the only assumption needed. Therefore, the formatted problem should have that single assumption.\n\nBut let me check the original Proposition 1. In Proposition 1, they required that g is faithfully flat. Then, gf is flat iff f is flat. Here, in Proposition 2, the user is asking whether if gf is faithfully flat, then f is faithfully flat, without any condition on g. So, the key difference is that in Prop 1, g is assumed to be faithfully flat, while in Prop 2, only gf is assumed to be faithfully flat. Therefore, the assumption here is just that gf is faithfully flat. So, the problem is to prove that f is faithfully flat under that assumption.\n\nHence, the structured problem should list the assumption that the composition is faithfully flat, and the problem is to prove f is faithfully flat. The user is asking whether Proposition 2 is true, which is exactly that statement. So, the formatted problem is as such.",
    "Original_Problem": "Assumption: \nThe composition $gf: A \\to C$ is a faithfully flat ring map.\n\nProblem: \nProve that $f: A \\to B$ is faithfully flat.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: The composition $gf: A \\to C$ is a faithfully flat ring map.\nProblem: \nProve that $f: A \\to B$ is faithfully flat.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$\n0\\to k[x]\\xrightarrow{\\cdot x} k[x]\\xrightarrow{\\pi} k[x]/(x)\\to 0\n$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: The composition $gf: A \\to C$ is a faithfully flat ring map.\nAssumption 2: $$\n0\\to k[x]\\xrightarrow{\\cdot x} k[x]\\xrightarrow{\\pi} k[x]/(x)\\to 0\n$$\nProblem: \nProve that $f: A \\to B$ is faithfully flat."
}