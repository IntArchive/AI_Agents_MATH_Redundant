{
    "Link_API": "https://api.stackexchange.com/2.3/questions/34796",
    "Title": "Injective function and ultrafilters",
    "Score": 12,
    "Category": "Chứng minh",
    "Tags": "logic, set-theory, filters",
    "Link": "https://math.stackexchange.com/questions/34796/injective-function-and-ultrafilters",
    "Content": "An exercise left by my teacher let me think that the following statement is true: Let $\\mathcal{U}$ be an ultrafilter on $\\mathbb{N}$. Then every injective function $g:\\mathbb{N}\\rightarrow\\mathbb{N}$ is $\\mathcal{U}$-equivalent to an increasing function. Is it true? If yes, how can I prove it? EDIT: ok, it's false. I wanted to prove that (1) implies (2) 1)Every $f:\\mathbb{N}\\rightarrow\\mathbb{N}$ is $\\mathcal{U}$-eq. to a constant or an injective function. 2)Every $f:\\mathbb{N}\\rightarrow\\mathbb{N}$ is $\\mathcal{U}$-eq. to a weakly increasing function. I wanted to prove this by proving that every injective function is equivalent to an increasing one. If this is false how I can prove that (1) implies (2)? I have to prove that every injective function is equivalent to a weakly increasing one.",
    "AcceptedAnswer": "This answer has two parts . The first part deals with (strictly) increasing functions.  This seemed to be (and turned out to be) what the OP's question was about.  The second and slightly more subtle part deals with non-decreasing functions. The problem refers to $\\mathbb{U}$-equivalence of two functions from $\\mathbb{N}$ to $\\mathbb{N}$.  Unfortunately, this notion is not defined in the problem.  I will assume that it is the ordinary notion that is used, for example, in defining the ultrapower.  Specifically, let $I$ and $A$ be sets, with $I$ non-empty, and let $\\mathbb{U}$ be an ultrafilter on $I$. Let $f$ and $g$ be functions from $I$ to $A$.  We will say that $f$ and $g$ are $\\mathbb{U}$-equivalent if the set of $i$ such that $f(i)=g(i)$ belongs to $\\mathbb{U}$ (more informally, $f$ and $g$ agree \"almost everywhere modulo $\\mathbb{U}$\"). Let $\\mathbb{N}$ denote the positive integers, and let $S$ be the set of positive integers of the form $4k+2$.  Let $\\mathbb{U}$ be any ultrafilter that has $S$ as an element. There are many such ultrafilters, countably many principal ones, and even more non-principal ones.  We will show that there is a bijective function $f$ from $\\mathbb{N}$ to $\\mathbb{N}$ which is \nnot $\\mathbb{U}$-equivalent to any increasing function. If $n$ is an odd positive integer, let $f(n)=2n$.  If $n$ is congruent to $2$ modulo $4$, let $f(n)=n/2$.  Finally, if $n$ is a positive integer divisible by $4$, let $f(n)=n$. It is clear that $f$ is a bijection, all it does is interchange, for example, $1$ and $2$, $3$ and $6$, and so on.    We will show that there cannot be an increasing function $g$ such that $f$ is $\\mathbb{U}$-equivalent to $g$. For suppose that $g$ is $\\mathbb{U}$-equivalent to $f$.  Then there is a number $s$ of the form $4k+2$ such that $g(s)=f(s)=s/2<s$.  This is impossible: any (strictly) increasing function $g$ from $\\mathbb{N}$ to $\\mathbb{N}$\nhas the property that $g(n) \\ge n$ for all $n$.  This is obvious: if $g(a)<a$, there is not enough room below $g(a)$ for the $g(i)$ with $i<a$. Addendum There has been some back and forth about the meaning of increasing function , with joriki in particular interpreting the term as meaning what, in calculus courses, we often call non-decreasing (and what some people call weakly increasing ). After a while, the OP clarified that he meant strictly increasing .  But this leaves a possibly interesting question: If $\\mathbb{U}$ is a non-principal ultrafilter on $\\mathbb{N}$, is it necessarily true that every injective function from $\\mathbb{N}$ to \n$\\mathbb{N}$ is $\\mathbb{U}$-equivalent to a non-decreasing function? I will show that the answer is no.  The counterexample is a little more complicated than the primitive counterexamples that I produced in response to the OP. Definition: A non-principal ultrafilter $\\mathbb{U}$ on $\\mathbb{N}$ is a $q$-point if for every partition of $\\mathbb{N}$ as a union of finite sets $A_n$, there is an element $X$ of  $\\mathbb{U}$ such that $X$ meets each $A_n$ in at most one point. Alternately, such an ultrafilter is called rare .  And they are rare! It is not hard to show in ZFC that there are (a lot of) ultrafilters that are not $q$-points.  It is consistent with ZFC that there are no $q$-points. From now on, suppose that the non-principal ultrafilter  $\\mathbb{U}$ is not a $q$-point .  We show that in that \"normal\" case there is a function $f$ which is not $\\mathbb{U}$-equivalent to a non-decreasing function. Since $\\mathbb{U}$ is not a $q$-point, there is a partition of \n$\\mathbb{N}$ into finite sets $A_n$ such that there is no $X$ in the ultrafilter that meets each $A_n$ in at most one point.  One can think of this partition as a witness that the ultrafilter is not rare. Let $A$ be a \"typical\" $A_n$ (I am doing this to avoid a multiplicity of subscripts).  List the elements of $A$ in increasing order , as $a_0, a_1, \\dots,a_k$.  Define the function $f$ on $A$ by $f(a_i)=a_{k-i}$. Thus $f$ reverses order on $A$. Do this for all the $A_n$. We now have an injective function $f$ from $\\mathbb{N}$ to $\\mathbb{N}$.  We will show that $f$ cannot be $\\mathbb{U}$-equivalent to a non-decreasing function. Suppose to the contrary that $g$ is such a function, and the element $X$ of the ultrafilter is the set on which $f$ and $g$ agree.  For any $A_n$, we show that $X \\cap A_n$ has at most one element.  This is obvious: if $s$ and $t$ are in $A_n$, and $s<t$, then $f(s)>f(t)$.",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \n$\\mathcal{U}$ is an ultrafilter on $\\mathbb{N}$,\nEvery function $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ is $\\mathcal{U}$-equivalent to a constant function or an injective function.\nProblem: \nProve that every function $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ is $\\mathcal{U}$-equivalent to a weakly increasing function.\n###",
    "reasoning_create_structured_problem": "Okay, let me try to work through this problem. The user initially thought that every injective function g: N → N is U-equivalent to an increasing function, given U is an ultrafilter on N. They realized that's false, and now they want to prove that (1) implies (2), where (1) is that every function f is U-equivalent to a constant or injective function, and (2) is that every f is U-equivalent to a weakly increasing function. Their approach was to try to show injective functions are equivalent to increasing ones, but that's not necessarily true. So the problem now is to figure out how to prove (1) implies (2) given that the initial approach is flawed.\n\nFirst, I need to parse the exact problem. The user's main goal is to show that if every function from N to N is U-equivalent to either a constant or an injective function, then every such function is U-equivalent to a weakly increasing function. The user tried to bridge this by converting injective functions to increasing ones but found a counterexample. Therefore, there must be another way to approach the implication.\n\nLet me recall some concepts. An ultrafilter U on N is a maximal filter, which means for any subset A of N, either A or its complement is in U. A function f is U-equivalent to g if they agree on a set in U, i.e., {n | f(n) = g(n)} ∈ U. A weakly increasing function is one where f(n+1) ≥ f(n) for all n.\n\nGiven that (1) says every function is equivalent to a constant or injective, we need to show that each of these cases can lead to being equivalent to a weakly increasing function. For constants, it's easy because a constant function is trivially weakly increasing. The problem is with injective functions. The user thought injective functions can be made increasing, but that's not necessarily true under U-equivalence. So maybe there's another property of ultrafilters or the functions that can be leveraged.\n\nWait, perhaps even though not all injective functions are equivalent to increasing ones, under the assumption (1), maybe the injective functions can be adjusted in a way that uses the ultrafilter's properties. For example, since U is an ultrafilter, maybe we can use the fact that it's a ultrafilter to \"reorder\" the function on a large set (in U) to make it increasing. Alternatively, maybe construct a weakly increasing function that agrees with the injective function on a set in U.\n\nBut how? Let me think. Suppose f is injective. We need to construct a weakly increasing function g such that f(n) = g(n) on a set in U. Since f is injective, its values are all distinct. However, the order of these values might not be increasing. But perhaps we can permute the values on some cofinite set (if U is principal) but if U is non-principal, then every set in U is infinite.\n\nWait, but the key is that in an ultrafilter, any two sets in U have infinite intersection if U is non-principal. Hmm. Alternatively, maybe we can use the fact that in an ultrafilter, any function is either constant or injective modulo U. Wait, but (1) already gives us that any function is equivalent to a constant or injective. So, given that, to get to (2), we need to make both constants and injective functions equivalent to weakly increasing ones. Constants are already okay. For injective functions, even if they aren't increasing, maybe we can use some rearrangement.\n\nWait, but how? Let's take an injective function f. Let's try to rearrange its values to make it increasing. Since f is injective, its image is an infinite subset of N. We can list the image in increasing order: say a1 < a2 < a3 < ... Then define g(n) = a_n. Then g is increasing. But the problem is that f and g might not agree on any set in U. Unless we can show that f(n) = a_n for n in some U-set.\n\nBut how? Unless the original function f was \"close\" to being increasing in the ultrafilter sense. Alternatively, maybe the ultrafilter U can be used to \"thin out\" the function f to an increasing subsequence. Since U is an ultrafilter, any subset or its complement is in U. Maybe by taking the set where f is increasing, if that set is in U, then we are done. If not, its complement is in U, but then maybe f is decreasing on a U-set, but since f is injective, it can't be decreasing infinitely.\n\nWait, but even if f is injective, it can be neither increasing nor decreasing on any infinite set. For example, f could oscillate. But perhaps using the ultrafilter, we can select a subsequence where f is increasing.\n\nWait, here's an idea. For an injective function f: N → N, the image is an infinite set, so we can enumerate the image in increasing order: a1 < a2 < a3 < ... Then, define a function g: N → N by g(n) = a_n. Then g is increasing. Now, consider the set S = {n | f(n) = g(n)}. If S is in U, then f is equivalent to g modulo U, and we're done. But S might not be in U. However, perhaps we can show that there exists some permutation π of N such that f(π(n)) = g(n) for n in a U-set. But since U is an ultrafilter, and permutations might not preserve U-sets unless they are finite permutations. Wait, but changing the function via a permutation might not help unless the permutation is U-preserving.\n\nAlternatively, think of it this way: since f is injective, for each m, there is a unique n such that f(n) = a_m. Let π(m) = n. Then π is a permutation of N, and f(π(m)) = a_m. Now, if the permutation π is such that π^{-1}(U) is the ultrafilter generated by π^{-1}(A) for A ∈ U. But unless π is identity on a U-set, this might not hold. Hmm, maybe this approach isn't directly helpful.\n\nWait, but the user wants to prove that (1) implies (2). Given that every function is equivalent to a constant or injective, we need to show that every function is equivalent to a weakly increasing one. For constants, as I said, trivial. For injective functions, we need to show that they are equivalent to weakly increasing. The user thought that by making injective functions increasing, but that's not true. So maybe even injective functions can be modified to be weakly increasing on a U-set.\n\nAlternatively, maybe every injective function is U-equivalent to its \"sorted\" version. For example, take the injective function f, list its values in increasing order as a1, a2, ..., and define g(n) = a_n. Then, the question is whether f and g agree on a U-set. But unless the original function f was already increasing on a U-set, which it might not be. However, perhaps the set where f(n) ≤ f(n+1) is in U? Not necessarily. But maybe the ultrafilter's properties can help here.\n\nAlternatively, consider that for any injective function f, the set where f is increasing (i.e., f(n) < f(n+1)) might not be in U, but perhaps we can use the ultrafilter to \"correct\" f. For instance, since U is an ultrafilter, maybe we can construct a function that is increasing on a U-set. Let me think. Let's try to inductively build a subset A ∈ U where f is increasing on A. Start with n1 ∈ N. Then pick n2 > n1 such that f(n2) > f(n1). Since f is injective, there exists some n with f(n) > f(n1), but can we ensure that this happens on a U-set? Maybe using the fact that the ultrafilter is closed under supersets and intersections.\n\nWait, here's another approach. Since we have that every function is equivalent to a constant or injective, then in particular, the identity function is equivalent to a constant or injective. But the identity function is injective, so it's equivalent to an injective function, which would be itself. But the problem is to show that the identity function is equivalent to a weakly increasing function, which it already is. Wait, but this seems trivial. Maybe the key is that given any function, we can first reduce it to constant or injective, and then handle each case.\n\nBut for the injective case, even if the function isn't increasing, we need to make it equivalent to a weakly increasing one. How? Maybe we can use the fact that in the ultrafilter, the order doesn't matter as much because you can \"reindex\" the natural numbers. For example, if you have an injective function f, then its image is an infinite subset of N, which can be ordered increasingly. Let’s call this ordered image {a1, a2, a3, ...}. Then, define a new function g(n) = an. Now, g is increasing. Then, the set of n where f(n) = g(n) might not be in U, but perhaps the function f is a permutation of g. If we can show that there exists a permutation π such that f(π(n)) = g(n) on a U-set. But permutations might not preserve the ultrafilter unless the ultrafilter is fixed by the permutation.\n\nWait, but if U is a non-principal ultrafilter, then any permutation of N that moves only finitely many elements will preserve U, but permutations that move infinitely many elements might not. So, this might not work.\n\nAlternatively, maybe we can use the fact that the image of f is cofinite or something? No, not necessarily. The image is just infinite.\n\nWait, perhaps instead of trying to rearrange f, we can adjust f to make it increasing on a U-large set. Let me try this. For an injective f, define a function h(n) = min{f(m) | m ≥ n}. Since f is injective, the minimum here is achieved at some m ≥ n. Then h is non-decreasing. But does h agree with f on a U-set? Maybe not. For example, if f(n) is decreasing, then h(n) = f(n) only at n where f(n) is the minimum of f from n onwards, which might be a thin set.\n\nAlternatively, perhaps we can use the fact that in an ultrafilter, either the set where f(n) < f(n+1) or its complement is in U. Suppose the set where f(n) < f(n+1) is in U. Then f is increasing on a U-set, hence equivalent to an increasing function. If the complement is in U, then the set where f(n) ≥ f(n+1) is in U. But since f is injective, f(n) > f(n+1) on that set. So in that case, f is decreasing on a U-set. But an injective function cannot be strictly decreasing infinitely, because the natural numbers are well-ordered. Wait, actually, no. For example, f(n) = -n is decreasing, but in natural numbers, you can't have negative numbers. So any decreasing function from N to N must eventually repeat or violate injectivity. Wait, but in natural numbers, a strictly decreasing function must be finite. Hence, there are no infinite strictly decreasing sequences in N. Therefore, if f is injective and on a U-set it's decreasing, then that set must be finite. But U is a non-principal ultrafilter, which contains no finite sets. Therefore, the set where f(n) > f(n+1) cannot be in U. Therefore, the set where f(n) < f(n+1) must be in U. Therefore, every injective function is increasing on a U-set. Hence, f is U-equivalent to an increasing function. Wait, that might be the key.\n\nWait, let me check that again. Suppose f is injective. Consider the set A = {n ∈ N | f(n) < f(n+1)}. If A is not in U, then its complement, B = {n ∈ N | f(n) > f(n+1)}, is in U. But since f is injective, B consists of all n where f(n) > f(n+1). However, if B is in U, which is a non-principal ultrafilter, then B is infinite. But in the natural numbers, can you have an infinite decreasing sequence? No, because you can't have an infinite sequence of natural numbers where each term is strictly less than the previous. That would contradict the well-ordering principle. Therefore, B must be finite. But since U is non-principal, it cannot contain finite sets. Therefore, B cannot be in U. Therefore, A must be in U. Therefore, f is increasing on a set A ∈ U. Hence, we can define a function g that is equal to f on A and perhaps extend it to an increasing function on all of N. Wait, but how?\n\nWait, if A is in U, then we can say that f is increasing on A. But A might not be co-finite. However, even if A is just an infinite set in U, we can define g(n) = f(n) for n ∈ A, and for n not in A, define g(n) in some increasing way. But how to ensure that g is weakly increasing everywhere? Maybe by using the fact that on A, f is increasing, and then filling in the gaps appropriately. However, the problem is that we need g to be weakly increasing on the entire N, but we only know that f is increasing on A. Perhaps we can take the values of f on A and list them in order, then pad the other positions with values that maintain the weakly increasing property.\n\nAlternatively, since A is in U, and U is an ultrafilter, maybe we can ignore the values of f outside of A, because for U-equivalence, we only need agreement on a set in U. Therefore, if we can construct a function g that is increasing on all N and agrees with f on A, then f and g would be U-equivalent. But how to construct such a g? Well, take the values of f on A, which are increasing: a1 < a2 < a3 < ..., and then for the positions not in A, insert values in a way that maintains the weakly increasing order. However, the problem is that the indices not in A are not in U, so they don't matter for equivalence. Wait, but g needs to be defined for all n, but equivalent to f on a set in U. So, if we define g(n) = f(n) for n ∈ A, and for n ∉ A, define g(n) arbitrarily as long as g is weakly increasing. Wait, but how can we ensure that g is weakly increasing everywhere? For example, suppose A is {n1, n2, n3, ...} where n1 < n2 < n3 < ..., and f(n1) < f(n2) < f(n3) < ... Then, define g(n_k) = f(n_k), and for n between n_k and n_{k+1}, set g(n) to be >= g(n_k) and <= g(n_{k+1}). But since f is injective and increasing on A, maybe we can interpolate. However, this requires that the values between n_k and n_{k+1} in N can be assigned values between f(n_k) and f(n_{k+1}), but since f is injective, there might be gaps. Wait, but if we make g weakly increasing, we can just set g(n) = f(n_k) for all n between n_k and n_{k+1}. Then g would be constant on those intervals, hence weakly increasing. However, this might conflict with injectivity, but g doesn't need to be injective, just weakly increasing. So, yes, this construction would work. Then g is weakly increasing, and agrees with f on A ∈ U. Therefore, f is U-equivalent to g. Therefore, every injective function is U-equivalent to a weakly increasing function. Therefore, combining with the constant case, (1) implies (2).\n\nSo, the key insight is that for an injective function, the set where it is increasing must be in the ultrafilter, because otherwise, the decreasing set would be infinite, which is impossible. Therefore, every injective function is increasing on a U-set, and hence can be extended to a weakly increasing function overall. Therefore, (1) implies (2).",
    "Original_Problem": "Assumption: \n$\\mathcal{U}$ is an ultrafilter on $\\mathbb{N}$,\nEvery function $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ is $\\mathcal{U}$-equivalent to a constant function or an injective function.\nProblem: \nProve that every function $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ is $\\mathcal{U}$-equivalent to a weakly increasing function.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: $\\mathcal{U}$ is an ultrafilter on $\\mathbb{N}$,\nAssumption 2: Every function $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ is $\\mathcal{U}$-equivalent to a constant function or an injective function.\nProblem: \nProve that every function $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ is $\\mathcal{U}$-equivalent to a weakly increasing function.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$f(i)=g(i)$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: $\\mathcal{U}$ is an ultrafilter on $\\mathbb{N}$,\nAssumption 2: Every function $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ is $\\mathcal{U}$-equivalent to a constant function or an injective function.\nAssumption 3: $f(i)=g(i)$\nProblem: \nProve that every function $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ is $\\mathcal{U}$-equivalent to a weakly increasing function."
}