{
    "Link_API": "https://api.stackexchange.com/2.3/questions/946311",
    "Title": "A convex function is differentiable at all but countably many points",
    "Score": 38,
    "Category": "Chứng minh",
    "Tags": "real-analysis, derivatives, convex-analysis",
    "Link": "https://math.stackexchange.com/questions/946311/a-convex-function-is-differentiable-at-all-but-countably-many-points",
    "Content": "Let $f:\\Bbb R\\to\\Bbb R$ be a convex function. Then $f$ is differentiable at all but countably many points. It is clear that a convex function can be non-differentiable at countably many points, for example $f(x)=\\int\\lfloor x\\rfloor\\,dx$. I just made this theorem up, but my heuristic for why it should be true is that the only possible non-differentiable singularities I can imagine in a convex function are corners, and these involve a jump discontinuity in the derivative, so since the derivative is increasing (where it is defined), you get an inequality like $f'(y)-f'(x)\\ge \\sum_{t\\in(x,y)}\\omega_t(f')$, where $\\omega_t(f')$ is the oscillation at $t$ (limit from right minus limit from left) and the sum is over all real numbers between $x$ and $y$. Since the sum is convergent (assuming that $x\\le y$ are points such that $f$ is differentiable at $x$ and $y$ so that this makes sense), there can only be countably many values in the sum which are non-zero, and at all other points the oscillation is zero and so the derivative exists. Thus there are only countably many non-differentiable points in the interval $(x,y)$, so as long as there is a suitable sequence $(x_n)\\to-\\infty$, $(y_n)\\to\\infty$ of differentiable points, the total number of non-differentiable points is a countable union of countable sets, which is countable. Furthermore, I would conjecture that the set of non-differentiable points has empty interior-of-closure, i.e. you can't make a function that is non-differentiable at the rational numbers, but as the above discussion shows there are still a lot of holes in the proof (and I'm making a lot of unjustified assumptions regarding the derivative already being somewhat well-defined). Does anyone know how to approach such a statement?",
    "AcceptedAnswer": "The set of points of nondifferentiability can be dense . But you correctly conjectured that it is at most countable. First, convexity implies that for $s<u\\le v<t$ we have \n $$ \\frac{f(u)-f(s)}{u-s}\\leq\\frac{f(t)-f(v)}{t-v} \\tag{1}$$ Sketch of the proof of (1) . First, use the 3-point convexity definition to show this for $u=v$. When $u<v$, proceed as\n $$ \\frac{f(u)-f(s)}{u-s}\\leq\\frac{f(t)-f(u)}{t-u}\\leq\\frac{f(t)-f(v)}{t-v}\\qquad \\Box$$ From (1) it follows that $f$ has one-sided derivatives ${f}_-'$ and $f_+'$ at every point, and they satisfy \n$$\n{f}_-'(x)\\le f_+'(x)\\le {f}_-'(y)\\le f_+'(y), \\quad x<y \\tag{2}\n$$ For every point where ${f}_-'(x)< f_+'(x)$, pick a rational number $q$ such that  ${f}_-'(x)< q< f_+'(x)$. Inequality (2) implies all these rationals are distinct. Therefore, the set of points of nondifferentiability is at most countable.",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \n$f$ is a function from $\\mathbb{R}$ to $\\mathbb{R}$,\n$f$ is convex.\nProblem:\nProve that $f$ is differentiable at all but countably many points.\n###",
    "reasoning_create_structured_problem": "Okay, let me try to parse this problem. The user wants to prove that a convex function f: R → R is differentiable at all but countably many points. The original question mentions that they came up with this theorem and provided some reasoning, but there are gaps. My task is to structure this problem into the Assumption and Problem sections as per the given format.\n\nFirst, I need to extract all the assumptions. The main object here is a convex function f defined from R to R. Convex functions have certain properties, like being continuous and having increasing derivatives where they exist. The user also mentions examples like f(x) being the integral of the floor function, which introduces countably many points of non-differentiability (at integers). \n\nSo the key assumptions would be:\n\n1. The function f is convex.\n2. The domain of f is the real numbers (since f: R → R).\n3. The problem is about differentiability of f, so we need to state that the question is about points where f is differentiable versus non-differentiable.\n\nWait, the problem statement itself is that f is differentiable everywhere except countably many points. The user is trying to prove this. So the assumptions would be the properties of f that are given. In the example provided earlier, the assumption was that n is an integer and divisible by 7. Here, the assumptions are that f is convex and defined on R. The problem is to prove differentiability except at countably many points.\n\nLooking back at the example, the original problem had some extra info, like the user's thoughts and possible approaches, but the formatted problem only lists the necessary assumptions. So for this case, the assumptions should be:\n\n- f is a convex function.\n- The domain of f is R.\n\nBut wait, in the example, assumptions included both the object (n is an integer) and a condition (n divisible by 7). Here, the problem is more general. The main assumption is that f is convex, and since the problem is about differentiability on R, the domain is R. So the assumptions are:\n\nAssumption:\nf is a convex function,\nf is defined on the real numbers.\n\nProblem:\nProve that f is differentiable at all but countably many points.\n\nBut wait, in the original problem, the user mentions that convex functions can have non-differentiable points, but only countably many. The user's example uses the integral of floor(x), which has jumps at integers (countable). The user's heuristic is about the derivative's increasing nature leading to countable discontinuities. However, the actual theorem states that convex functions are differentiable everywhere except possibly at a countable set. So the problem is to prove that statement.\n\nTherefore, the structured problem should list the assumptions (f is convex, domain R), and the problem is to prove differentiability except at countably many points.\n\nI need to ensure that the assumptions are only about the given conditions. The problem is the actual statement to prove. The user's example included the function's definition, but here the problem is about a general convex function.\n\nSo the formatted problem should be:\n\nAssumption:\nf: R → R is a convex function.\n\nProblem:\nProve that f is differentiable at all but countably many points.\n\nWait, the original problem in the example had two assumptions: n is an integer and n divisible by 7. But in this case, the assumptions are about the function f. The user didn't specify any additional constraints on f other than it being convex and defined on R. So the only assumption is that f is a convex function from R to R. Hence, the assumptions section would list two points: f is convex and f is defined on R. But maybe these can be combined into one line as \"f: R → R is a convex function.\"\n\nLooking at the example, each assumption is a single line addressing one property. For instance, \"n is an integer\" and \"n is divisible by 7.\" Here, the domain and the convexity are two separate properties of the function. But actually, stating that \"f: R → R is a convex function\" combines both the domain and the convexity. However, maybe the user's example split the properties. Wait, in the example, the original problem had A(n) defined with certain terms, and the formatted assumptions were \"n is an integer\" and \"n is divisible by 7.\" So perhaps in this case, the assumptions should be:\n\nAssumption:\nf is a function from R to R,\nf is convex.\n\nProblem:\nProve that f is differentiable at all but countably many points.\n\nBut in the example, the assumptions are split into separate lines even if they refer to the same object. Here, the function's domain and its convexity are two separate conditions. So yes, splitting them into two lines.\n\nTherefore, the final answer would be:\n\n###BEGIN_OF_FORMAT###\nAssumption: \n$f$ is a function from $\\mathbb{R}$ to $\\mathbb{R}$,\n$f$ is convex.\nProblem:\nProve that $f$ is differentiable at all but countably many points.\n###",
    "Original_Problem": "Assumption: \n$f$ is a function from $\\mathbb{R}$ to $\\mathbb{R}$,\n$f$ is convex.\nProblem:\nProve that $f$ is differentiable at all but countably many points.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: $f$ is a function from $\\mathbb{R}$ to $\\mathbb{R}$,\nAssumption 2: $f$ is convex.\nProblem:\nProve that $f$ is differentiable at all but countably many points.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$ \\frac{f(u)-f(s)}{u-s}\\leq\\frac{f(t)-f(u)}{t-u}\\leq\\frac{f(t)-f(v)}{t-v}\\qquad \\Box$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: $f$ is a function from $\\mathbb{R}$ to $\\mathbb{R}$,\nAssumption 2: $f$ is convex.\nAssumption 3: $$ \\frac{f(u)-f(s)}{u-s}\\leq\\frac{f(t)-f(u)}{t-u}\\leq\\frac{f(t)-f(v)}{t-v}\\qquad \\Box$$\nProblem:\nProve that $f$ is differentiable at all but countably many points."
}