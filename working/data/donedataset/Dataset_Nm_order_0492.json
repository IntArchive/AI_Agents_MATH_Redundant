{
    "Link_API": "https://api.stackexchange.com/2.3/questions/40404",
    "Title": "Proof of recursive formula for &quot;fusible numbers&quot;",
    "Score": 35,
    "Category": "Chứng minh",
    "Tags": "elementary-number-theory, recreational-mathematics",
    "Link": "https://math.stackexchange.com/questions/40404/proof-of-recursive-formula-for-fusible-numbers",
    "Content": "The set of fusible numbers is a fantastic set of rational numbers defined by a simple rule. The story is well told here but I'll repeat the definitions. It's the formula on slide 17 that I'm trying to understand. Define $\\displaystyle a \\oplus b = \\frac{a+b+1}{2}$. A number is fusible if it is $0$ or if it can be written as $a \\oplus b$ where $a, b$ are fusible and $|a-b|<1$. Let $F$ be the set of fusible numbers. More formally, $F$ is the intersection of all sets of real numbers that are closed under $\\oplus$ applied to arguments at a distance at most 1. The set $F$ is a well-ordered set of non-negative rational numbers. The proof that it's well-ordered isn't included in the PDF file I linked to, but it's not hard to show this. (It wouldn't be true if we hadn't insisted on the condition $|a-b|<1$, by the way.) Amazingly, the order type of $F$ is $\\varepsilon_0$. It's also true that $F$ is closed under ordinary addition; this isn't hard to prove either but I don't know if it plays a part in what follows. Because $F$ is well-ordered, we may define $f(x)$ to be the least fusible number greater than $x$, for any real $x$. Further, set $m(x) = f(x)-x$. We obviously have $m(x) = -x$ for $x<0$, while for $x \\geq 0$, it is posited that\n$$m(x) = \\frac{1}{2}m(x-m(x-1))$$ \nThe question is: why is this last formula true? I'm able to show one of the necessary inequalities, namely that $\\displaystyle m(x) \\leq \\frac{1}{2}m(x-m(x-1))$: Given $x$, observe that \n$$(x-1+t) \\oplus (x-t+u) = x + u/2$$ \nTake $t = m(x-1)$, which guarantees that ($x-1+t$) is indeed fusible. Now set $u = m(x-t)$ which makes ($x-t+u$) fusible as well, and the distance between those two fusible numbers can't be greater than $1$. It follows that ($x+u/2$) is fusible, and so $m(x)$ is at most $u/2$ for that particular $u$, which is indeed $m(x-m(x-1))$. The question, then, is: How can we prove that no other choice of $t$ yields an even smaller value for $m(x)$? It's not hard to show that there's no loss of generality in focusing on $x-1+t$ and $x-t+m(x-t)$, but greedily minimizing $t$ by setting $t=m(x-1)$ is not in any obvious way guaranteed to yield the minimum value for $m(x)$, as far as I can see. What am I missing?",
    "AcceptedAnswer": "That formula is wrong -- see here (linked to from here ). That note also contains other interesting thoughts about the fusible numbers, including a new conjecture that would also imply that the order type of $F$ is $\\epsilon_0$. Here's some Java code I wrote to explore these numbers. You can place a red line somewhere by shift-clicking there, and then by clicking or dragging (without Shift) you can move a pair of green lines such that $a\\oplus b = c$, where $a$ and $b$ are the numbers corresponding to the green lines and $c$ is the number corresponding to the red line. I used this to find for instance that 101/64 can be generated in three different ways: $101/64=3/4\\oplus45/32=15/16\\oplus39/32=31/32\\oplus19/16$. import java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.event.MouseMotionAdapter;\nimport java.awt.event.MouseMotionListener;\n\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\n\npublic class FusibleNumbers {\n    static class BinaryNumber {\n        long mantissa;\n        int exponent;\n\n        public BinaryNumber (long mantissa,int exponent) {\n            this.mantissa = mantissa;\n            this.exponent = exponent;\n\n            normalize ();\n        }\n\n        public void normalize () {\n            if (mantissa == 0)\n                exponent = 0;\n            else\n                while ((mantissa & 1) == 0) {\n                    mantissa >>= 1;\n                    exponent--;\n                }\n        }\n\n        public double toDouble () {\n            return mantissa / (double) (1L << exponent);\n        }\n\n        public String toString () {\n            return mantissa + \"/2^\" + exponent;\n        }\n    }\n\n    static BinaryNumber getMargin (BinaryNumber x) {\n        if (x.mantissa < 0)\n            return new BinaryNumber (-x.mantissa,x.exponent);\n        BinaryNumber m = getMargin (new BinaryNumber (x.mantissa - (1L << x.exponent),x.exponent));\n        int newExponent = Math.max (x.exponent,m.exponent);\n        m = getMargin (new BinaryNumber ((x.mantissa << (newExponent - x.exponent)) - (m.mantissa << (newExponent - m.exponent)),newExponent));\n        m.exponent++;\n        m.normalize ();\n        if (m.exponent > 50)\n            throw new Error (\"exponent overflow\");\n        return m;\n    }\n\n    static int xmin;\n    static int xother;\n\n    public static void main (String [] args) {\n        JFrame frame = new JFrame ();\n\n        final JPanel panel = new JPanel () {\n            public void paintComponent (Graphics g) {\n                super.paintComponent (g);\n                int exponent = 9;\n                int scale = 1 << exponent;\n                Dimension size = getSize ();\n                for (int i = 0;i < size.width;i++) {\n                    BinaryNumber b = new BinaryNumber (i,exponent);\n                    BinaryNumber m = getMargin (b);\n                    double d = b.toDouble () + m.toDouble ();\n                    int x = (int) (d * scale + .5);\n                    g.drawLine (x,0,x,size.height);\n                }\n                drawLine (g,size,xmin,Color.RED);\n                drawLine (g,size,xother,Color.GREEN);\n                drawLine (g,size,2*xmin - scale - xother,Color.GREEN);\n            }\n\n            private void drawLine (Graphics g,Dimension size,int x,Color color) {\n                g.setColor (color);\n                g.drawLine (x,0,x,size.height);\n            }\n        };\n\n        panel.addMouseListener (new MouseAdapter () {\n            boolean ctrl;\n\n            MouseMotionListener motionListener = new MouseMotionAdapter () {\n                public void mouseDragged (MouseEvent me) {\n                    update (me);\n                }\n            };\n\n            public void mouseReleased (MouseEvent me) {\n                update (me);\n                panel.removeMouseMotionListener (motionListener);\n            }\n\n            public void mousePressed (MouseEvent me) {\n                ctrl = (me.getModifiers () & MouseEvent.SHIFT_MASK) != 0;\n                panel.addMouseMotionListener (motionListener);\n                update (me);\n            }\n\n            void update (MouseEvent me) {\n                if (ctrl)\n                    xmin = me.getX ();\n                else\n                    xother = me.getX ();\n                panel.repaint ();\n            }\n        });\n\n        frame.getContentPane ().add (panel);\n        frame.setBounds (0,0,1200,200);\n        frame.setVisible (true);\n    }\n}",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \nA number is fusible if it is $0$ or can be written as $a \\oplus b$ where $a$ and $b$ are fusible numbers and $|a - b| < 1$ (with $a \\oplus b = \\frac{a + b + 1}{2}$),\nThe set $F$ of fusible numbers is well-ordered,\nFor any real number $x$, $f(x)$ is the least fusible number greater than $x$,\n$m(x)$ is defined as $f(x) - x$,\nFor $x < 0$, $m(x) = -x$.\nproblem:\nProve that for $x \\geq 0$, $$m(x) = \\frac{1}{2}m(x - m(x - 1)).$$\n###",
    "reasoning_create_structured_problem": "Okay, let me try to understand this problem step by step. So, the user is asking about proving a recursive formula for the function m(x), which is defined as the difference between the least fusible number greater than x and x itself. The recursive formula given is m(x) = 1/2 * m(x - m(x - 1)). \n\nFirst, I need to recall the definitions. Fusible numbers are constructed using the operation a ⊕ b = (a + b + 1)/2, with the condition that |a - b| < 1. The set F is well-ordered, so every x has a least fusible number greater than it, which is f(x), and m(x) = f(x) - x.\n\nThe user mentioned they were able to prove one inequality, m(x) ≤ 1/2 m(x - m(x - 1)), by constructing specific fusible numbers. They took t = m(x - 1) and u = m(x - t), then formed (x - 1 + t) ⊕ (x - t + u) = x + u/2. Since this is fusible, f(x) ≤ x + u/2, so m(x) ≤ u/2 = 1/2 m(x - t) = 1/2 m(x - m(x - 1)).\n\nBut they are stuck on proving the reverse inequality, that m(x) cannot be smaller than this value. They question why choosing t = m(x - 1) is optimal and whether there's a different choice of t that could give a smaller m(x).\n\nSo, the key assumptions here are related to the definitions of fusible numbers and the properties of the function m(x). Let's try to list the assumptions one by one, each addressing a single property or condition applied to one object.\n\n1. The set F of fusible numbers is defined as numbers that are either 0 or can be written as a ⊕ b where a and b are fusible numbers and |a - b| < 1. Here, a ⊕ b = (a + b + 1)/2.\n2. The set F is well-ordered, meaning every non-empty subset has a least element.\n3. For any real number x, f(x) is the least fusible number greater than x.\n4. m(x) is defined as f(x) - x.\n5. For x < 0, m(x) = -x because the least fusible number greater than x is 0.\n6. For x ≥ 0, the recursive formula m(x) = 1/2 m(x - m(x - 1)) is posited.\n7. The user has proven that m(x) ≤ 1/2 m(x - m(x - 1)) by constructing fusible numbers using t = m(x - 1) and u = m(x - t).\n8. The remaining task is to show the reverse inequality, m(x) ≥ 1/2 m(x - m(x - 1)), to establish equality.\n\nWait, but the problem statement in the original question is asking why the formula m(x) = 1/2 m(x - m(x - 1)) is true. The user has shown one direction but needs to prove the other. Therefore, the problem is to prove that m(x) = 1/2 m(x - m(x - 1)) for x ≥ 0.\n\nNow, structuring the problem according to the required format. The assumptions should be listed line by line, each addressing one property. Let me extract these from the question:\n\nAssumptions:\n- The set F of fusible numbers is closed under the operation a ⊕ b = (a + b + 1)/2 when |a - b| < 1.\n- F is well-ordered, so every real x has a least fusible number f(x) greater than x.\n- m(x) is defined as f(x) - x.\n- For x < 0, m(x) = -x.\n- For x ≥ 0, the recursive formula m(x) = 1/2 m(x - m(x - 1)) is proposed.\n\nProblem: Prove that for x ≥ 0, m(x) = 1/2 m(x - m(x - 1)).\n\nWait, but in the example provided earlier, the original problem had some assumptions listed. For instance, in the example, the assumption was that n is an integer and divisible by 7, but in the original problem, the user had \"for every integer n\", but the formatted problem included an assumption that n is divisible by 7. Wait, that might have been an error in the example. Wait, let me check. The original problem in the example was to prove that A(n) is divisible by 91 for every integer n. The formatted problem's assumption was n is an integer, n is divisible by 7. Wait, but 91 is 7*13, so maybe the original problem had a condition that n is divisible by both 7 and 13? Or perhaps the example was a mistake. Wait, maybe the user made a mistake in their example. Because if the original problem is to prove for every integer n, then the assumption shouldn't add divisibility by 7 unless it was part of the problem. Hmm. Anyway, in this current problem, the assumptions need to be extracted correctly.\n\nLooking back at the problem statement, the user says that m(x) = -x for x < 0, while for x ≥ 0, it is posited that m(x) = 1/2 m(x - m(x - 1)). The question is: why is this last formula true?\n\nSo the problem is to prove that m(x) = 1/2 m(x - m(x - 1)) for x ≥ 0. The user has shown m(x) ≤ 1/2 m(...), and needs to show the opposite inequality.\n\nTherefore, the assumptions are:\n\n- F is the set of fusible numbers defined as 0 or a ⊕ b with a, b ∈ F and |a - b| < 1.\n- F is well-ordered.\n- f(x) is the least fusible number greater than x.\n- m(x) = f(x) - x.\n- For x < 0, m(x) = -x.\n- For x ≥ 0, the formula m(x) = (1/2) m(x - m(x - 1)) is to be proven.\n\nBut wait, the original problem states that \"the question is: why is this last formula true?\" So the problem is to prove the formula. The user has already proven one inequality but needs to show the other.\n\nTherefore, the structured problem should list all the necessary assumptions leading up to the formula, and then state the problem as proving that formula.\n\nSo, let's list each assumption line by line:\n\nAssumption:\n- A number is fusible if it is 0 or can be written as a ⊕ b where a and b are fusible and |a - b| < 1. (Here, a ⊕ b = (a + b + 1)/2)\n- The set F of fusible numbers is well-ordered.\n- For any real x, f(x) is the least fusible number greater than x.\n- m(x) is defined as f(x) - x.\n- For x < 0, m(x) = -x.\n\nProblem: Prove that for x ≥ 0, m(x) = (1/2) m(x - m(x - 1)).\n\nI think that's accurate. Each assumption is a single property, applied to one object. The problem is to prove the recursive formula for m(x) when x ≥ 0.",
    "Original_Problem": "Assumption: \nA number is fusible if it is $0$ or can be written as $a \\oplus b$ where $a$ and $b$ are fusible numbers and $|a - b| < 1$ (with $a \\oplus b = \\frac{a + b + 1}{2}$),\nThe set $F$ of fusible numbers is well-ordered,\nFor any real number $x$, $f(x)$ is the least fusible number greater than $x$,\n$m(x)$ is defined as $f(x) - x$,\nFor $x < 0$, $m(x) = -x$.\nproblem:\nProve that for $x \\geq 0$, $$m(x) = \\frac{1}{2}m(x - m(x - 1)).$$",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: A number is fusible if it is $0$ or can be written as $a \\oplus b$ where $a$ and $b$ are fusible numbers and $|a - b| < 1$ (with $a \\oplus b = \\frac{a + b + 1}{2}$),\nAssumption 2: The set $F$ of fusible numbers is well-ordered,\nAssumption 3: For any real number $x$, $f(x)$ is the least fusible number greater than $x$,\nAssumption 4: $m(x)$ is defined as $f(x) - x$,\nAssumption 5: For $x < 0$, $m(x) = -x$.\nProblem:\nProve that for $x \\geq 0$, $$m(x) = \\frac{1}{2}m(x - m(x - 1)).$$",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$a\\oplus b = c$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: A number is fusible if it is $0$ or can be written as $a \\oplus b$ where $a$ and $b$ are fusible numbers and $|a - b| < 1$ (with $a \\oplus b = \\frac{a + b + 1}{2}$),\nAssumption 2: The set $F$ of fusible numbers is well-ordered,\nAssumption 3: For any real number $x$, $f(x)$ is the least fusible number greater than $x$,\nAssumption 4: $m(x)$ is defined as $f(x) - x$,\nAssumption 5: For $x < 0$, $m(x) = -x$.\nAssumption 6: $a\\oplus b = c$\nProblem:\nProve that for $x \\geq 0$, $$m(x) = \\frac{1}{2}m(x - m(x - 1)).$$"
}