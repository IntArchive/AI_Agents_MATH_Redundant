{
    "Link_API": "https://api.stackexchange.com/2.3/questions/83380",
    "Title": "I have a problem understanding the proof of Rencontres numbers (Derangements)",
    "Score": 36,
    "Category": "Chá»©ng minh",
    "Tags": "sequences-and-series, combinatorics, recurrence-relations, derangements",
    "Link": "https://math.stackexchange.com/questions/83380/i-have-a-problem-understanding-the-proof-of-rencontres-numbers-derangements",
    "Content": "I understand the whole concept of Rencontres numbers but I can't understand how to prove this equation $$D_{n,0}=\\left[\\frac{n!}{e}\\right]$$ where $[\\cdot]$ denotes the rounding function (i.e., $[x]$ is the integer nearest to $x$ ). This equation that I wrote comes from solving the following recursion, but I don't understand how exactly the author calculated this recursion. $$\\begin {align*} \nD_{n+2,0} & =(n+1)(D_{n+1,0}+D_{n,0}) \\\\\nD_{0,0} & = 1 \\\\\nD_{1,0} & = 0 \n\\end {align*}\n$$",
    "AcceptedAnswer": "(This argument is adapted from page 195 of Concrete Mathematics , Second Edition) We start with the more conventional representation for the Rencontres number (subfactorial): $$D_{n,0}=!n=n!\\sum_{k=0}^n \\frac{(-1)^k}{k!}$$ We also know that $$\\frac{n!}{e}=n!\\sum_{k=0}^\\infty \\frac{(-1)^k}{k!}$$ The difference is $$\\begin{align*}\\frac{n!}{e}-!n&=n!\\sum_{k=n+1}^\\infty \\frac{(-1)^k}{k!}\\\\&=\\frac{(-1)^{n+1}}{n+1}\\left(1-\\frac1{n+2}+\\frac1{(n+2)(n+3)}-\\cdots\\right)\\end{align*}$$ and since $$\\frac1{n+2} \\leq \\left|\\frac{n!}{e}-!n\\right| \\leq \\frac1{n+1}$$ along with knowing that $!n$ is an integer, rounding $n!/e$ to the nearest integer gives the subfactorial. We have $\\small \\begin{align}(n+2)!\\sum_{k=0}^{n+2} \\frac{(-1)^k}{k!}&=(n+1)\\left[(n+1)!\\sum_{k=0}^{n+1} \\frac{(-1)^k}{k!}+n!\\sum_{k=0}^n \\frac{(-1)^k}{k!}\\right]\\\\(n+2)(n+1)\\sum_{k=0}^{n+2} \\frac{(-1)^k}{k!}&=(n+1)\\left[(n+1)\\sum_{k=0}^{n+1} \\frac{(-1)^k}{k!}+\\sum_{k=0}^n \\frac{(-1)^k}{k!}\\right]\\\\(n+2)\\sum_{k=0}^{n+2} \\frac{(-1)^k}{k!}&=(n+1)\\sum_{k=0}^{n+1} \\frac{(-1)^k}{k!}+\\sum_{k=0}^n \\frac{(-1)^k}{k!}\\\\(n+2)\\left(\\frac{(-1)^{n+2}}{(n+2)!}+\\frac{(-1)^{n+1}}{(n+1)!}+\\sum_{k=0}^n \\frac{(-1)^k}{k!}\\right)&=\\frac{(-1)^{n+1}}{n!}+(n+1)\\sum_{k=0}^n \\frac{(-1)^k}{k!}+\\sum_{k=0}^n \\frac{(-1)^k}{k!}\\\\(n+2)\\left(\\frac{(-1)^n}{(n+2)!}+\\frac{(-1)^{n+1}}{(n+1)!}\\right)+(n+2)\\sum_{k=0}^n \\frac{(-1)^k}{k!}&=\\frac{(-1)^{n+1}}{n!}+(n+1)\\sum_{k=0}^n \\frac{(-1)^k}{k!}+\\sum_{k=0}^n \\frac{(-1)^k}{k!}\\\\(n+2)\\left(\\frac{(-1)^n}{(n+2)!}+\\frac{(-1)^{n+1}}{(n+1)!}\\right)&=\\frac{(-1)^{n+1}}{n!}\\\\(-1)^n+(-1)^{n+1}(n+2)&=(-1)^{n+1}(n+1)\\\\1-(n+2)&=-(n+1)\\end{align}$ and the last bit is easily established, thus proving the recursion relation for the Rencontres numbers.",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \nThe recurrence relation for derangements is $D_{n+2,0} = (n+1)(D_{n+1,0} + D_{n,0})$,\nThe initial condition $D_{0,0} = 1$ holds,\nThe initial condition $D_{1,0} = 0$ holds.\nProblem:\nProve that $$D_{n,0} = \\left[\\frac{n!}{e}\\right]$$ where $[x]$ denotes the nearest integer to $x$.\n###",
    "reasoning_create_structured_problem": "Okay, let's try to tackle this problem. The user wants me to act as a knowledgeable bilingual math professor and structure the given Math Stack Exchange question into the specified format. The example provided shows how assumptions and the problem are separated. Let me first read through the original question carefully.\n\nThe title is about understanding the proof of Rencontres numbers (Derangements). The user is confused about proving the equation D_{n,0} = [n!/e], where [.] is the rounding function. They mention that this equation comes from solving a specific recursion relation, which they provided. The user doesn't understand how the author calculated this recursion.\n\nNow, following the example, I need to extract the assumptions and the problem. The example lists each assumption line by line, each addressing one property or condition applied to one object. \n\nLooking at the problem here, the key elements are the definition of D_{n,0} as the number of derangements (fixed points), the recursion formula given, and the initial conditions. The equation to prove is D_{n,0} = [n!/e].\n\nAssumptions would include the initial conditions and the recursion relation. Each should be a separate line. The problem statement is to prove the equation using these assumptions.\n\nWait, the original problem mentions the recursion:\nD_{n+2,0} = (n+1)(D_{n+1,0} + D_{n,0})\nWith D_{0,0}=1 and D_{1,0}=0.\n\nSo the assumptions here are the recurrence relation and the initial conditions. Each of these should be listed as separate assumptions. The problem is to show that D_{n,0} equals [n!/e] using these.\n\nTherefore, structuring:\n\nAssumption:\nThe recurrence relation is D_{n+2,0} = (n+1)(D_{n+1,0} + D_{n,0}),\nD_{0,0} = 1,\nD_{1,0} = 0.\n\nProblem:\nProve that D_{n,0} = [n!/e], where [x] is the nearest integer to x.\n\nWait, but in the example, they included the divisibility condition as an assumption. Here, the initial conditions and recurrence are given as part of the problem setup. So these are the assumptions. Each initial condition and the recursion formula are separate assumptions.\n\nYes, each initial condition (D_{0,0}=1 and D_{1,0}=0) is a separate assumption. The recurrence relation for D_{n+2,0} is another assumption. So three assumptions total.\n\nSo putting it all together:\n\nAssumption:\nThe recurrence relation for derangements is D_{n+2,0} = (n+1)(D_{n+1,0} + D_{n,0}),\nThe initial condition D_{0,0} = 1 holds,\nThe initial condition D_{1,0} = 0 holds.\n\nProblem:\nProve that D_{n,0} equals the nearest integer to n!/e, i.e., D_{n,0} = [n!/e].\n\nI think that's the correct structure. Each assumption is on its own line, and the problem is to prove the equation given those assumptions.",
    "Original_Problem": "Assumption: \nThe recurrence relation for derangements is $D_{n+2,0} = (n+1)(D_{n+1,0} + D_{n,0})$,\nThe initial condition $D_{0,0} = 1$ holds,\nThe initial condition $D_{1,0} = 0$ holds.\nProblem:\nProve that $$D_{n,0} = \\left[\\frac{n!}{e}\\right]$$ where $[x]$ denotes the nearest integer to $x$.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: The recurrence relation for derangements is $D_{n+2,0} = (n+1)(D_{n+1,0} + D_{n,0})$,\nAssumption 2: The initial condition $D_{0,0} = 1$ holds,\nAssumption 3: The initial condition $D_{1,0} = 0$ holds.\nProblem:\nProve that $$D_{n,0} = \\left[\\frac{n!}{e}\\right]$$ where $[x]$ denotes the nearest integer to $x$.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$D_{n,0}=!n=n!\\sum_{k=0}^n \\frac{(-1)^k}{k!}$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: The recurrence relation for derangements is $D_{n+2,0} = (n+1)(D_{n+1,0} + D_{n,0})$,\nAssumption 2: The initial condition $D_{0,0} = 1$ holds,\nAssumption 3: The initial condition $D_{1,0} = 0$ holds.\nAssumption 4: $$D_{n,0}=!n=n!\\sum_{k=0}^n \\frac{(-1)^k}{k!}$$\nProblem:\nProve that $$D_{n,0} = \\left[\\frac{n!}{e}\\right]$$ where $[x]$ denotes the nearest integer to $x$."
}