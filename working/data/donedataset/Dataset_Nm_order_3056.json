{
    "Link_API": "https://api.stackexchange.com/2.3/questions/133799",
    "Title": "Continued fractions",
    "Score": 12,
    "Category": "Chứng minh",
    "Tags": "number-theory, continued-fractions",
    "Link": "https://math.stackexchange.com/questions/133799/continued-fractions",
    "Content": "I'd really love with concluding that for given integers $a_0,a_1,...a_N$ with $a_i>0$ for $i>0$ , representing the continued fraction $[a_0; a_1,....,a_N]$ , with the following recursion: $p_{-1}=1, q_{-1}=0, p_o=a_0, q_o=1, p_s=a_sp_{s-1}+p_{s-2}, q_{s}=a_sq_{s-1}+q_{s-2}$ we can get that $[a_0; a_1,....,a_N]=\\frac{p_s}{q_s}$ . I tried to do that with induction, the basic step for $s=0$ is trivial, assuming that it is correct for $n$ , how do I prove it for $n+1$ ? I tried to use the data that was given, but I'm not sure how. Thank you very much",
    "AcceptedAnswer": "I think the easiest approach to this question is to associate to each finite continued fraction symbol $[a_0; a_1,....,a_N]$ not just a rational number, but a $2\\times 2$ matrix with natural number entries, namely the matrix product\n$$\n  M(a_0,a_1,....,a_N)=\n\\pmatrix{a_0&1\\\\1&0} \\cdot \\pmatrix{a_1&1\\\\1&0} \\cdots \\pmatrix{a_N&1\\\\1&0} \n$$\nThe first column of this matrix (its value when applied to $\\tbinom10$) gives numerator and denominator of the value of the continued fraction $\\alpha=[a_0; a_1,....,a_N]$, as follows from the definition of continued fractions by an immediate induction on $N$. But the matrix gives more information about the position of $\\alpha$ in the Stern-Brocot tree, or more precisely that of its descendant $\\alpha'=[a_0; a_1,....,a_N,1]$ \"continuing in the same direction\" (which serves as starting point for continued fractions that start with $[a_0; a_1,....,a_N,\\ldots]~$). The sum of the columns of $M(a_0,a_1,....,a_N)$ (its value on $\\tbinom11$) gives the numerator and denominator of $\\alpha'$, while the second column (its value on $\\tbinom01$) gives the closest ancestor of $\\alpha'$ at the opposite side  with respect to $\\alpha$, which is also (if $N>0$) the previous convergent $\\beta=[a_0; a_1,....,a_{N-1}]~$. Personally I think these matrices are the most useful objects to work with; lots of stuff is easy in terms of them, for instance the fact that their determinant is $(-1)^{N+1}$ is immediate from the definition. Also descending to a next convergent needs just one previous matrix, and involves a simple right multiplication. From this one can easily deduce a recurrence formula of order $2$ for the convergents in reduced form. Indeed if these convergents are $\\frac{p_i}{q_i}$ in reduced form as in the question, then by the above description\n$$\n  M(a_0,a_1,....,a_{s-1})=\\pmatrix{p_{s-1}&p_{s-2}\\\\q_{s-1}&q_{s-2}}\n$$\nfor $s\\geq2$, and\n$$\n  M(a_0,a_1,....,a_{s-1},a_s)=\\pmatrix{p_s&p_{s-1}\\\\q_s&q_{s-1}}\n  = M(a_0,a_1,....,a_{s-1})\\cdot \\pmatrix{a_s&1\\\\1&0}\n$$\nfrom which one easily deduces $p_s=p_{s-1}a_s+p_{s-2}$ and $q_s=q_{s-1}a_s+q_{s-2}$.",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption: \n$a_0, a_1, \\ldots, a_N$ are integers with $a_i > 0$ for $i > 0$,\nThe continued fraction $[a_0; a_1, \\ldots, a_N]$ is represented by the recursion,\n$p_{-1} = 1$, $q_{-1} = 0$,\n$p_0 = a_0$, $q_0 = 1$,\nFor $s \\geq 1$, $p_s = a_s p_{s-1} + p_{s-2}$,\nFor $s \\geq 1$, $q_s = a_s q_{s-1} + q_{s-2}$.\nProblem: \nProve that $$[a_0; a_1, \\ldots, a_N] = \\frac{p_s}{q_s}$$ using induction.\n###",
    "reasoning_create_structured_problem": "Okay, let's try to tackle this problem. The user wants to prove that the continued fraction [a0; a1, ..., aN] is equal to ps/qs using the given recursion formulas. They mentioned trying induction, with the base case s=0 being trivial, but they're stuck on the inductive step for n+1. \n\nFirst, I need to recall how continued fractions work. A continued fraction [a0; a1, a2, ..., aN] can be represented recursively. Each term in the sequence a0, a1, ..., aN is a coefficient in the expansion. The recursion relations given are for ps and qs, which are the numerators and denominators of the convergents (the partial fractions) of the continued fraction.\n\nThe base case is s=0. At s=0, p0 = a0 and q0 = 1, so p0/q0 = a0/1 = a0, which matches [a0], the zeroth convergent. That makes sense.\n\nNow, for the inductive step. Assume that for some n ≥ 0, the nth convergent [a0; a1, ..., an] is equal to pn/qn. Then we need to show that the (n+1)th convergent [a0; a1, ..., an, an+1] is equal to p_{n+1}/q_{n+1} where p_{n+1} = a_{n+1}pn + p_{n-1} and similarly for q_{n+1}.\n\nWait, but how does adding a new term an+1 to the continued fraction relate to the recursion formula? Let me think about the structure of continued fractions. The convergent at step n+1 is obtained by replacing an with an + 1/an+1 in the nth convergent. Wait, no. Let me recall that the convergents can be built step by step by extending the continued fraction. So, the (n+1)th convergent is [a0; a1, ..., an, an+1], which can be written as a0 + 1/(a1 + 1/(a2 + ... + 1/(an + 1/an+1)...)).\n\nAlternatively, there's a formula that relates the convergents recursively. Let's denote the convergent at step s as C_s = [a0; a1, ..., as]. The recursion relations for ps and qs are standard in continued fraction theory. The key is to show that C_{s} = p_s / q_s.\n\nAssuming by induction that C_n = p_n / q_n, then C_{n+1} would be [a0; a1, ..., a_{n+1}]. How does this relate to C_n? Well, if you take the continued fraction up to a_{n+1}, it's the same as taking the continued fraction up to a_n and then replacing a_n with a_n + 1/a_{n+1}. But actually, that's not exactly accurate. Wait, perhaps another approach: the convergent C_{n+1} can be expressed in terms of C_n and C_{n-1} using the recursion formula.\n\nAlternatively, recall that the convergents satisfy the relation C_{s} = (a_s * p_{s-1} + p_{s-2}) / (a_s * q_{s-1} + q_{s-2}), which is exactly the recursion given for ps and qs. Therefore, if we can express C_{n+1} in terms of C_n and C_{n-1}, we can use the recursion to show that it equals p_{n+1}/q_{n+1}.\n\nBut maybe a better way is to use induction directly. Suppose that for all k ≤ n, C_k = p_k / q_k. Then, for k = n+1, we need to compute C_{n+1} which is [a0; a1, ..., a_{n+1}]. Let's write this as a continued fraction:\n\nC_{n+1} = a0 + 1/(a1 + 1/(a2 + ... + 1/(a_{n} + 1/a_{n+1})...))\n\nBut another way to look at it is that this is the same as taking the continued fraction [a0; a1, ..., a_n, a_{n+1}], which can be constructed by considering the previous convergents. The standard recursion relations for continued fractions indeed define p_s and q_s in terms of the previous two terms. \n\nTo make this precise, let's consider that the continued fraction [a0; a1, ..., a_{n+1}] can be built by appending a_{n+1} to the sequence. By the properties of continued fractions, the new convergent C_{n+1} is equal to (a_{n+1} * p_n + p_{n-1}) / (a_{n+1} * q_n + q_{n-1}), which matches the given recursion for p_{n+1} and q_{n+1}. Hence, by induction, the formula holds.\n\nWait, but how does appending a_{n+1} lead to that formula? Let's think about the last term. Suppose we have the continued fraction up to a_n, which is p_n / q_n. Then, if we add a_{n+1} at the end, the new continued fraction would be [a0; a1, ..., a_n, a_{n+1}]. This is equivalent to [a0; a1, ..., a_{n-1}, a_n + 1/a_{n+1}]. But perhaps that's complicating things.\n\nAlternatively, using the recursive definition: each convergent C_{s} can be expressed as (a_s * C_{s-1} + 1) / C_{s-2} or something similar. Wait, no. Let me recall the standard recurrence relations for continued fractions. The numerators and denominators satisfy p_s = a_s p_{s-1} + p_{s-2} and q_s = a_s q_{s-1} + q_{s-2}. So if we assume by induction that C_{s-1} = p_{s-1}/q_{s-1} and C_{s-2} = p_{s-2}/q_{s-2}, then the next convergent C_s should indeed be p_s/q_s.\n\nBut how does this relate to the continued fraction expansion? Maybe we need to express C_s in terms of the previous convergents and show it matches p_s/q_s.\n\nAlternatively, think of the continued fraction as a sequence of operations. For each a_k, you update p and q. The key is that the recurrence builds the convergents step by step, and induction can validate that each step correctly represents the continued fraction up to that point.\n\nSo, in summary, the inductive step would assume that for all k ≤ n, C_k = p_k/q_k, then for k = n+1, we need to compute C_{n+1} as [a0; a1, ..., a_{n+1}], which by the continued fraction properties, must satisfy the recursion p_{n+1} = a_{n+1} p_n + p_{n-1} and similarly for q_{n+1}, hence C_{n+1} = p_{n+1}/q_{n+1}. Therefore, by induction, the formula holds for all s.\n\nThe user might be missing the connection between the recursive definition of the continued fraction and the recurrence relations for p_s and q_s. The key is to express the new convergent in terms of the previous ones using the recurrence, which directly gives the fraction p_{n+1}/q_{n+1}.",
    "Original_Problem": "Assumption: \n$a_0, a_1, \\ldots, a_N$ are integers with $a_i > 0$ for $i > 0$,\nThe continued fraction $[a_0; a_1, \\ldots, a_N]$ is represented by the recursion,\n$p_{-1} = 1$, $q_{-1} = 0$,\n$p_0 = a_0$, $q_0 = 1$,\nFor $s \\geq 1$, $p_s = a_s p_{s-1} + p_{s-2}$,\nFor $s \\geq 1$, $q_s = a_s q_{s-1} + q_{s-2}$.\nProblem: \nProve that $$[a_0; a_1, \\ldots, a_N] = \\frac{p_s}{q_s}$$ using induction.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: $a_0, a_1, \\ldots, a_N$ are integers with $a_i > 0$ for $i > 0$,\nAssumption 2: The continued fraction $[a_0; a_1, \\ldots, a_N]$ is represented by the recursion,\nAssumption 3: $p_{-1} = 1$, $q_{-1} = 0$,\nAssumption 4: $p_0 = a_0$, $q_0 = 1$,\nAssumption 5: For $s \\geq 1$, $p_s = a_s p_{s-1} + p_{s-2}$,\nAssumption 6: For $s \\geq 1$, $q_s = a_s q_{s-1} + q_{s-2}$.\nProblem: \nProve that $$[a_0; a_1, \\ldots, a_N] = \\frac{p_s}{q_s}$$ using induction.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$\n  M(a_0,a_1,....,a_N)=\n\\pmatrix{a_0&1\\\\1&0} \\cdot \\pmatrix{a_1&1\\\\1&0} \\cdots \\pmatrix{a_N&1\\\\1&0} \n$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: $a_0, a_1, \\ldots, a_N$ are integers with $a_i > 0$ for $i > 0$,\nAssumption 2: The continued fraction $[a_0; a_1, \\ldots, a_N]$ is represented by the recursion,\nAssumption 3: $p_{-1} = 1$, $q_{-1} = 0$,\nAssumption 4: $p_0 = a_0$, $q_0 = 1$,\nAssumption 5: For $s \\geq 1$, $p_s = a_s p_{s-1} + p_{s-2}$,\nAssumption 6: For $s \\geq 1$, $q_s = a_s q_{s-1} + q_{s-2}$.\nAssumption 7: $$\n  M(a_0,a_1,....,a_N)=\n\\pmatrix{a_0&1\\\\1&0} \\cdot \\pmatrix{a_1&1\\\\1&0} \\cdots \\pmatrix{a_N&1\\\\1&0} \n$$\nProblem: \nProve that $$[a_0; a_1, \\ldots, a_N] = \\frac{p_s}{q_s}$$ using induction."
}