{
    "Link_API": "https://api.stackexchange.com/2.3/questions/476195",
    "Title": "Infinitely differentiable functions: how to prove that $e^\\frac{1}{x^2-1}$ has derivative of any order?",
    "Score": 23,
    "Category": "Chứng minh",
    "Tags": "real-analysis, derivatives, induction",
    "Link": "https://math.stackexchange.com/questions/476195/infinitely-differentiable-functions-how-to-prove-that-e-frac1x2-1-has-d",
    "Content": "Let $f:\\Bbb{R}\\to\\Bbb{R}$ be a function given by $$f(x)=\\begin{cases}\n\\exp\\left(\\frac{1}{x^2-1}\\right) & \\text{if }\\vert x\\vert\\lt 1\\\\ \n0 & \\text{if }\\vert x\\vert\\geqslant 1 \n\\end{cases}$$ I would like to prove that $f\\in C^\\infty$ , that is, $f\\in C^k$ for all $k\\in \\mathbb{N}$ . I think that it can be done by induction on $k$ . If $\\vert x\\vert\\gt1$ , the problem is trivial. On other points, the base case is the simplest and the only that I'm be able to do. Can someone help me? Thanks.",
    "AcceptedAnswer": "Do it for $$f(x)=\\begin{cases}\\exp\\left(-\\frac 1 x\\right)&x>0\\\\ 0&x\\leq 0\\end{cases}$$ Note that everywhere but in the origin, $f$ is infinitely differentiable. Moreover, for $x>0$ $$\\eqalign{\n   f'\\left( x \\right) &= \\frac{1}{{{x^2}}}f\\left( x \\right)  \\cr \n   f''\\left( x \\right) &= \\left( {\\frac{1}{{{x^4}}} - \\frac{2}{{{x^3}}}} \\right)f\\left( x \\right)  \\cr \n   f'''\\left( x \\right)&= \\left( {\\frac{1}{{{x^6}}} - \\frac{6}{{{x^5}}} + \\frac{6}{{{x^4}}}} \\right)f\\left( x \\right)\\cr &\\&c \\cr} $$ You can thus prove inductively that for $x>0$ , $$f^{(k)}(x)=P_{2k}(x^{-1})f(x)$$ where $P_{2k}$ is a polynomial of degree $2k$ . As $x\\to 0^+$ this amounts to looking at $$\\lim_{x\\to +\\infty}P(x)\\exp(-x)=0$$ for any polynomial $P$ . So, for any $k$ , the limit as $x\\to 0$ of the derivative is $0$ . Now we use a slightly underrated theorem Theorem (Spivak) Suppose $f$ is continuous at $x=a$ , that $f'(x)$ exists for all $x$ in a neighborhood of $a$ . Suppose moreover that $$\\lim_{x\\to a}f'(x)$$ exists. Then $f'(a)$ exists and $$f'(a)=\\lim_{x\\to a}f'(x)$$ Proof By definition, $$f'(a)=\\lim_{h\\to 0 }\\frac{f(a+h)-f(a)}h$$ Consider $h>0$ . For $h$ sufficiently small, $f$ will be continuous over $[a,a+h]$ , and differentiable over $(a,a+h)$ . Thus, by Lagrange, we can find $a<\\alpha_h<a+h$ such that $$\\frac{f(a+h)-f(a)}h=f'(\\alpha_h)$$ As $h\\to 0^+$ ; $\\alpha_h\\to a$ , and since the limit exists, $$f'(a)^+=\\lim_{h\\to 0^+}\\frac{f(a+h)-f(a)}h=\\lim_{h\\to 0^+}f'(\\alpha_h)=\\lim_{x\\to a}f'(x)$$ The case $h<0$ is analogous. $\\blacktriangle$ . The above lets you conclude that indeed $f^{(k)}(0)=0$ for all $k$ , whence $f$ is $C^k$ for any $k$ . Now, note your function is $$g(x)=f(1-x^2)$$",
    "llm_answer_create_structured_problem": "###BEGIN_OF_FORMAT###\nAssumption:\n$f: \\mathbb{R} \\to \\mathbb{R}$ is a piecewise-defined function,\nFor $|x| < 1$, $f(x) = \\exp\\left(\\frac{1}{x^2 - 1}\\right)$,\nFor $|x| \\geq 1$, $f(x) = 0$,\nThe exponential function $\\exp(z)$ is smooth in its domain,\nThe zero function is smooth,\nThe points $x = \\pm 1$ are boundaries between the two cases.\nProblem:\nProve that $f \\in C^\\infty(\\mathbb{R})$, i.e., $f$ has derivatives of all orders that are continuous on $\\mathbb{R}$.\n###",
    "reasoning_create_structured_problem": "Okay, let's try to tackle this problem. The user wants to prove that the function f(x) is in C^infinity, meaning it's infinitely differentiable. The function is defined piecewise: e^(1/(x²-1)) when |x| < 1 and 0 otherwise. The challenge is to show that all derivatives exist and are continuous, especially around the points x = 1 and x = -1 because that's where the function changes definition.\n\nFirst, I remember that for a function to be smooth (C^∞), all its derivatives must exist and be continuous everywhere. For |x| > 1, the function is 0, so all derivatives there are 0, which is straightforward. For |x| < 1, the function is e^(1/(x²-1)). The exponential function is smooth everywhere it's defined, but the exponent 1/(x²-1) might complicate things as x approaches ±1. So the critical points are at x = 1 and x = -1. We need to check the behavior of the derivatives from both sides.\n\nWhen approaching x = 1 from the left (x → 1⁻), the exponent 1/(x²-1) becomes 1/(something approaching 0 from the negative side), so it goes to -∞. Therefore, e^(-∞) approaches 0. Similarly, approaching x = -1 from the right (x → -1⁺), the exponent also tends to -∞, so the function approaches 0. So the function is continuous at these points.\n\nNow, the main issue is the differentiability at these points. For the function to be differentiable at x = 1 and x = -1, the left-hand and right-hand derivatives must match. Since the function is 0 outside |x| ≥ 1, the right-hand derivative at x = 1 and the left-hand derivative at x = -1 are both 0. So we need to check if the left-hand derivative at x = 1 (from inside the interval) also approaches 0, and similarly for x = -1.\n\nBut how do the derivatives behave? Let's consider the first derivative for x < 1. Let's compute f'(x) when |x| < 1. The derivative of e^g(x) is e^g(x) * g'(x). Here, g(x) = 1/(x² -1), so g'(x) = (-2x)/(x² -1)^2. So f'(x) = e^(1/(x²-1)) * (-2x)/(x² -1)^2. As x approaches 1 from the left, the denominator (x² -1)^2 approaches 0, but the exponent in the e term goes to -∞, which makes the entire expression go to 0. However, the other part is (-2x)/(x² -1)^2, which tends to -2/(0⁺) → -∞. So we have 0 * (-∞), which is an indeterminate form. So we need to analyze the limit more carefully.\n\nWait, maybe using L’Hospital’s Rule? Let’s see. Let’s denote h(x) = e^{1/(x²-1)}. We need to find the limit of h(x) * (-2x)/(x² -1)^2 as x → 1⁻. Let’s set t = 1 - x, so as t → 0⁺, x = 1 - t. Substitute into the exponent: 1/( (1 - t)^2 - 1 ) = 1/(1 - 2t + t² -1 ) = 1/(-2t + t²) ≈ -1/(2t) as t →0. So the exponent becomes approximately -1/(2t). Therefore, e^{-1/(2t)} decays exponentially to 0 as t→0. The other term is (-2(1 - t))/ ( ( (1 - t)^2 -1 )^2 ) ≈ (-2)/( (-2t)^2 ) = (-2)/(4t²) ) = -1/(2t²). So the entire expression is e^{-1/(2t)} * (-1/(2t²)). As t →0⁺, e^{-1/(2t)} decays faster than any polynomial in t, so the product tends to 0. Hence, the derivative from the left at x=1 is 0, matching the derivative from the right (which is 0). So the first derivative exists and is continuous at x=1. Similarly for x=-1.\n\nBut this is just the first derivative. The problem is to show that all derivatives exist and are continuous. The user mentioned using induction. So perhaps assume that the k-th derivative of f exists and is continuous at x=1 and x=-1, then show that the (k+1)-th derivative exists and is continuous.\n\nFor the induction step, suppose that for some k ≥ 0, the k-th derivative of f(x) exists everywhere and is continuous. Then, for |x| <1, the (k+1)-th derivative would be the derivative of the k-th derivative. For |x| >1, the (k+1)-th derivative is 0. At x=1 and x=-1, we need to check if the left-hand derivative of the k-th derivative equals the right-hand derivative (which is 0). If we can show that all derivatives of f(x) tend to 0 as x approaches ±1 from inside the interval, then the derivatives are continuous at those points.\n\nThe key idea here is that the function and all its derivatives have the form e^{1/(x²-1)} multiplied by a rational function (a ratio of polynomials) in x. As x approaches ±1 from within (-1,1), the exponential term tends to 0 faster than any polynomial term can blow up. Therefore, even though the rational function might have terms with denominators (x² -1)^m, which tend to infinity, the exponential decay dominates, making the entire expression go to 0. Hence, all derivatives at x=±1 will match (0 from the outside), ensuring continuity.\n\nTherefore, by induction, all derivatives exist and are continuous, so f is C^∞.\n\nBut to structure this as per the user's format:\n\nAssumptions need to list each condition. The function is defined piecewise, so each piece is an assumption. Also, the key properties about differentiability at the boundaries.\n\nAssumptions:\n- f: R → R is defined piecewise as exp(1/(x²−1)) when |x| < 1, and 0 otherwise.\n- The problem requires proving f is in C^∞(R), i.e., infinitely differentiable everywhere.\n- For |x| > 1, f is identically 0.\n- For |x| < 1, f is exp(1/(x²−1)), which is smooth in the interior of (-1,1).\n- The critical points are at x = ±1 where the piecewise definitions meet.\n\nProblem: Prove that f ∈ C^∞(R).\n\nBut according to the example given, each assumption should be a single property applied to one object. So breaking down:\n\nAssumption:\nf is defined as exp(1/(x²−1)) when |x| < 1,\nf is defined as 0 when |x| ≥ 1,\nf is a function from R to R,\nWe need to prove f is in C^∞ (infinitely differentiable),\nFor |x| > 1, f is smooth (all derivatives exist and are continuous),\nFor |x| < 1, f is smooth,\nThe critical points for differentiability are at x = ±1.\n\nBut per the example's structure, each assumption line addresses one property or condition applied to one object. So:\n\nAssumption:\nf: R → R is defined piecewise,\nFor |x| < 1, f(x) = exp(1/(x² - 1)),\nFor |x| ≥ 1, f(x) = 0,\nProve that f is in C^∞(R),\nThe exponential function is smooth on its domain,\nThe zero function is smooth,\nThe points x = ±1 are the boundaries between the piecewise definitions.\n\nBut the user's example lists assumptions as separate lines, each being a single condition. So for the formatted problem:\n\nAssumption:\nf is a function from R to R,\nf(x) = exp(1/(x² - 1)) when |x| < 1,\nf(x) = 0 when |x| ≥ 1,\nThe problem requires proving f is infinitely differentiable (C^∞),\nThe exponential function is smooth where it is defined,\nThe zero function is smooth,\nThe critical points for differentiability are at x = ±1.\n\nBut maybe the key is to list the given conditions from the problem. The original problem states the definition of f and asks to prove f is in C^infty. So in the assumption section, list the given conditions:\n\nAssumption:\nf: R → R is defined as exp(1/(x² -1)) for |x| < 1,\nf: R → R is defined as 0 for |x| ≥ 1,\nThe task is to prove f is in C^∞ (i.e., f is infinitely differentiable).\n\nBut according to the example, the assumptions include conditions on the objects involved. The example had \"n is an integer\" and \"n is divisible by 7\". Here, the assumptions are the definition of the function and what needs to be proven. However, the problem statement is \"Prove that f ∈ C^∞\". So the formatted problem should have the assumptions as the given conditions (the definition of f) and the problem is to prove it's in C^infty.\n\nTherefore:\n\n###BEGIN_OF_FORMAT###\nAssumption:\n$f: \\mathbb{R} \\to \\mathbb{R}$ is defined by\n$$\nf(x) = \\begin{cases}\n\\exp\\left(\\frac{1}{x^2 - 1}\\right) & \\text{if } |x| < 1, \\\\\n0 & \\text{if } |x| \\geq 1.\n\\end{cases}\n$$\nProblem:\nProve that $f \\in C^\\infty(\\mathbb{R})$, i.e., $f$ is infinitely differentiable.",
    "Original_Problem": "Assumption:\n$f: \\mathbb{R} \\to \\mathbb{R}$ is a piecewise-defined function,\nFor $|x| < 1$, $f(x) = \\exp\\left(\\frac{1}{x^2 - 1}\\right)$,\nFor $|x| \\geq 1$, $f(x) = 0$,\nThe exponential function $\\exp(z)$ is smooth in its domain,\nThe zero function is smooth,\nThe points $x = \\pm 1$ are boundaries between the two cases.\nProblem:\nProve that $f \\in C^\\infty(\\mathbb{R})$, i.e., $f$ has derivatives of all orders that are continuous on $\\mathbb{R}$.",
    "Original_Problem_with_numerical_assumption": "Assumption:\nAssumption 1: $f: \\mathbb{R} \\to \\mathbb{R}$ is a piecewise-defined function,\nAssumption 2: For $|x| < 1$, $f(x) = \\exp\\left(\\frac{1}{x^2 - 1}\\right)$,\nAssumption 3: For $|x| \\geq 1$, $f(x) = 0$,\nAssumption 4: The exponential function $\\exp(z)$ is smooth in its domain,\nAssumption 5: The zero function is smooth,\nAssumption 6: The points $x = \\pm 1$ are boundaries between the two cases.\nProblem:\nProve that $f \\in C^\\infty(\\mathbb{R})$, i.e., $f$ has derivatives of all orders that are continuous on $\\mathbb{R}$.",
    "Proof_problem": "Yes",
    "Redundant_assumption": "$$f'(a)^+=\\lim_{h\\to 0^+}\\frac{f(a+h)-f(a)}h=\\lim_{h\\to 0^+}f'(\\alpha_h)=\\lim_{x\\to a}f'(x)$$",
    "Problem_with_redundant_assumption": "Assumption:\nAssumption 1: $f: \\mathbb{R} \\to \\mathbb{R}$ is a piecewise-defined function,\nAssumption 2: For $|x| < 1$, $f(x) = \\exp\\left(\\frac{1}{x^2 - 1}\\right)$,\nAssumption 3: For $|x| \\geq 1$, $f(x) = 0$,\nAssumption 4: The exponential function $\\exp(z)$ is smooth in its domain,\nAssumption 5: The zero function is smooth,\nAssumption 6: The points $x = \\pm 1$ are boundaries between the two cases.\nAssumption 7: $$f'(a)^+=\\lim_{h\\to 0^+}\\frac{f(a+h)-f(a)}h=\\lim_{h\\to 0^+}f'(\\alpha_h)=\\lim_{x\\to a}f'(x)$$\nProblem:\nProve that $f \\in C^\\infty(\\mathbb{R})$, i.e., $f$ has derivatives of all orders that are continuous on $\\mathbb{R}$."
}